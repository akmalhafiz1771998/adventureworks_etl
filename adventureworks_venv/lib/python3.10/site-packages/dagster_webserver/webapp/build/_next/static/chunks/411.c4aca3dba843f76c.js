"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[411],{97411:function(e,n,t){t.r(n),t.d(n,{OverviewRoot:function(){return OverviewRoot},default:function(){return nC}});var r=t(52322),i=t(7267),o=t(58467),s=t(17131),a=t(81308),l=t(9001),c=t(22139),u=t(2784),d=t(85333),h=t(6692),f=t(73235),p=t(40794),v=t(63832),m=t(34822),x=t(25195),g=t(21106),j=t(34448),y=t(57830),b=t(17276),w=t(44678),k=t(88510),O=t(47933),S=t(35505),C=t(56266),_=t(55237),T=t(68028),A=t(8560),E=t(99322),R=t(35157),P=t(16339),N=t(58885),I=t(65885),B=t(74711),z=t(28252),L=t(71277),F=t(63386),M=t(55658),$=t(37160),D=t(38153);function _templateObject(){var e=(0,f._)(["\n  display: grid;\n  grid-template-columns: ",";\n  height: 100%;\n  > * {\n    vertical-align: middle;\n  }\n"]);return _templateObject=function(){return e},e}function _templateObject1(){var e=(0,f._)(["\n  font-size: 12px;\n  pointer-events: none;\n  a {\n    color: ",";\n    pointer-events: none;\n    max-width: ",";\n  }\n"]);return _templateObject1=function(){return e},e}function _templateObject2(){var e=(0,f._)(["\n  cursor: pointer;\n  &:hover {\n    font-weight: 600;\n  }\n"]);return _templateObject2=function(){return e},e}function _templateObject3(){var e=(0,f._)(["\n  &:hover {\n    text-decoration: none;\n  }\n"]);return _templateObject3=function(){return e},e}var OverviewAssetsRoot=function(e){var n,t,i,s=e.Header,a=e.TabButton;(0,T.Px)(),(0,z.j)("Overview | Assets");var l=(0,p.a)(I.C1,{notifyOnNetworkStatusChange:!0}),d=(0,_.C4)(l,_.dT),h=u.useMemo(function(){var e,n,t;return(null===(e=l.data)||void 0===e?void 0:e.assetsOrError.__typename)==="AssetConnection"?(n=l.data.assetsOrError.nodes,t={},n.forEach(function(e){if(e.definition){var n=e.definition.groupName,r=e.definition.repository.name,i="".concat(n,"||").concat(r),o=t[i]||{groupName:n,repositoryName:r,assets:[]};o.assets.push(e),t[i]=o}}),Object.values(t)):[]},[null===(i=l.data)||void 0===i?void 0:i.assetsOrError]),f=(0,o._)((0,L.q)({queryKey:"q",decode:function(e){return e.searchQuery?JSON.parse(e.searchQuery):""},encode:function(e){return{searchQuery:e?JSON.stringify(e):void 0}}}),2),x=f[0],g=f[1],j=u.useMemo(function(){return""===x?h:h.filter(function(e){return(e.groupName||K).toLowerCase().includes(x.toLowerCase())||e.repositoryName.toLowerCase().includes(x.toLowerCase())})},[h,x]),y=u.useRef(null),b=(0,k.MG)({count:j.length,getScrollElement:function(){return y.current},estimateSize:function(){return 82},overscan:5}),w=b.getTotalSize(),O=b.getVirtualItems();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{style:{position:"sticky",top:0,zIndex:1},children:[(0,r.jsx)(s,{refreshState:d}),(0,r.jsxs)(c.x,{padding:{horizontal:24,vertical:16},flex:{alignItems:"center",gap:12,grow:0},children:[(0,r.jsx)(a,{selected:"assets"}),(0,r.jsx)(m.oi,{value:x,onChange:function(e){g(e.target.value)},placeholder:"Filter asset groups…"})]})]}),(t=null===(n=l.data)||void 0===n?void 0:n.assetsOrError,!l.data&&l.loading?(0,r.jsx)(c.x,{flex:{alignItems:"center",justifyContent:"center",direction:"column",grow:1},style:{width:"100%"},children:(0,r.jsx)(v.$,{purpose:"page"})}):(null==t?void 0:t.__typename)==="PythonError"?(0,r.jsx)(c.x,{flex:{alignItems:"center",justifyContent:"center",direction:"column",grow:1},style:{width:"100%"},children:(0,r.jsx)(C.T9,{error:t})}):(0,r.jsx)(c.x,{flex:{direction:"column"},style:{overflow:"hidden"},children:(0,r.jsxs)(M.W2,{ref:y,children:[(0,r.jsx)(VirtualHeaderRow,{}),(0,r.jsx)(M.Nh,{$totalHeight:w,children:O.map(function(e){var n=e.index,t=e.key,i=e.size,o=e.start,s=j[n];return(0,r.jsx)(VirtualRow,{start:o,height:i,group:s},t)})})]})}))]})},U="5fr 1fr 1fr 1fr 1fr";function VirtualHeaderRow(){return(0,r.jsxs)(c.x,{border:"top-and-bottom",style:{display:"grid",gridTemplateColumns:U,height:"32px",fontSize:"12px",color:x.$(),position:"sticky",top:0,zIndex:1,background:x.v8()},children:[(0,r.jsx)(M.qN,{children:"Group name"}),(0,r.jsx)(M.qN,{children:"Missing"}),(0,r.jsx)(M.qN,{children:"Failed/Overdue"}),(0,r.jsx)(M.qN,{children:"In progress"}),(0,r.jsx)(M.qN,{children:"Materialized"})]})}var K="Ungrouped Assets";function VirtualRow(e){var n,t,i=e.height,o=e.start,s=e.group,a=u.useMemo(function(){return s.assets.map(function(e){return{path:e.key.path}})},[s.assets]),l=(0,A.YP)(a).liveDataByNode,f=u.useMemo(function(){return(0,P.s)(s.assets,l)},[l,s.assets]),p=null===(t=s.assets.find(function(e){var n;return null===(n=e.definition)||void 0===n?void 0:n.repository}))||void 0===t?void 0:null===(n=t.definition)||void 0===n?void 0:n.repository,m=(0,$.kQ)((null==p?void 0:p.name)||"",(null==p?void 0:p.location.name)||""),b=(0,g.S)(),w=b.containerProps,k=b.viewport,S=a.length!==Object.keys(l).length,C=S?"":"0";return(0,r.jsx)(M.X2,{$height:i,$start:o,children:(0,r.jsxs)(J,{border:"bottom",children:[(0,r.jsx)(Cell,{children:(0,r.jsxs)(c.x,{flex:{direction:"row",justifyContent:"space-between",grow:1},children:[(0,r.jsxs)(c.x,{flex:{direction:"column",gap:2,grow:1},children:[(0,r.jsxs)(c.x,{flex:{direction:"row",gap:8},children:[(0,r.jsx)(j.JO,{name:"asset_group"}),s.groupName?(0,r.jsx)(O.rU,{style:{fontWeight:700},to:(0,D.$U)(m,"/asset-groups/".concat(s.groupName)),children:s.groupName}):K]}),(0,r.jsx)("div",(0,h._)((0,d._)({},w),{children:(0,r.jsx)(q,{maxWidth:k.width,children:(0,r.jsx)(F.b,{repoAddress:m,showRefresh:!1})})}))]}),(0,r.jsx)(c.x,{flex:{direction:"column",justifyContent:"center"},children:S?(0,r.jsx)(v.$,{purpose:"body-text"}):null})]})}),(0,r.jsx)(Cell,{children:f.missing.length?(0,r.jsx)(SelectOnHover,{assets:f.missing,getCount:function(e){var n=e.status;return n.case===E.KB.PARTITIONS_MISSING&&n.numMissing||0},adjective:"missing",children:(0,r.jsx)(y.V,{intent:"none",children:(0,r.jsxs)(c.x,{flex:{direction:"row",alignItems:"center",gap:6},children:[(0,r.jsx)("div",{style:{width:"12px",height:"12px",border:"2px solid ".concat(x.im()),borderRadius:"50%"}}),f.missing.length]})})}):C}),(0,r.jsx)(Cell,{children:f.failed.length?(0,r.jsx)(SelectOnHover,{assets:f.failed,getCount:function(e){var n=e.status;return n.case===E.KB.PARTITIONS_FAILED&&n.numFailed||0},adjective:"failed",children:(0,r.jsx)(y.V,{intent:"danger",children:(0,r.jsxs)(c.x,{flex:{direction:"row",alignItems:"center",gap:6},children:[(0,r.jsx)("div",{style:{width:0,height:0,borderLeft:"6px solid transparent",borderRight:"6px solid transparent",borderBottom:"10px solid red",display:"inline-block"}}),f.failed.length]})})}):C}),(0,r.jsx)(Cell,{children:f.inprogress.length?(0,r.jsx)(SelectOnHover,{assets:f.inprogress,getCount:function(e){var n=e.status;return n.case===E.KB.MATERIALIZING&&n.numMaterializing||0},adjective:"materializing",children:(0,r.jsx)(y.V,{intent:"primary",icon:"spinner",children:f.inprogress.length})}):C}),(0,r.jsx)(Cell,{children:f.successful.length?(0,r.jsx)(SelectOnHover,{assets:f.successful,getCount:function(e){var n=e.status;return n.case===E.KB.PARTITIONS_MATERIALIZED&&n.numMaterialized||0},adjective:"materialized",children:(0,r.jsx)(y.V,{intent:"success",children:(0,r.jsxs)(c.x,{flex:{direction:"row",alignItems:"center",gap:6},children:[(0,r.jsx)("div",{style:{backgroundColor:x.fA(),width:"10px",height:"10px",borderRadius:"50%"}}),f.successful.length]})})}):C})]})})}var J=(0,S.ZP)(c.x).withConfig({componentId:"sc-299f6f76-0"})(_templateObject(),U),Cell=function(e){var n=e.children;return(0,r.jsx)(M.E5,{style:{color:x.Ep()},children:(0,r.jsx)(c.x,{flex:{direction:"row",alignItems:"center",grow:1},children:n})})},q=S.ZP.div.withConfig({componentId:"sc-299f6f76-1"})(_templateObject1(),x.$(),function(e){var n=e.maxWidth;return n?"unset":"".concat(n,"px")});function SelectOnHover(e){var n=e.assets,t=e.children,i=e.getCount,o=e.adjective;return(0,r.jsx)(W,{children:(0,r.jsx)(b.P,{items:n,itemPredicate:function(e,n){return(0,R.ll)(n.asset.key).toLocaleLowerCase().includes(e.toLocaleLowerCase())},itemRenderer:function(e){var n=i(e);return(0,r.jsx)(V,{to:(0,B.p)(e.asset.key),target:"_blank",children:(0,r.jsx)(w.sN,{text:(0,r.jsxs)(c.x,{flex:{direction:"row",alignItems:"center",gap:4},children:[(0,r.jsx)("div",{style:{paddingLeft:"4px"},children:(0,r.jsx)(j.JO,{name:"asset"})}),(0,r.jsx)("div",{style:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},children:(0,R.ll)(e.asset.key)}),n&&n>0?(0,r.jsxs)(a.YS,{style:{color:x.$()},children:[(0,N._e)(n)," ",o]}):null]})},(0,R.ll)(e.asset.key))})},onItemSelect:function(){},children:t})})}var W=S.ZP.div.withConfig({componentId:"sc-299f6f76-2"})(_templateObject2()),V=(0,S.ZP)(O.rU).withConfig({componentId:"sc-299f6f76-3"})(_templateObject3()),H=t(56024),Q=t(36495),G=t(81966),X=t(40049),OverviewTabs=function(e){var n=e.refreshState,t=e.tab,i=(0,G.dx)(),o=(0,Q.e)();return(0,r.jsxs)(c.x,{flex:{direction:"row",justifyContent:"space-between",alignItems:"flex-end"},children:[(0,r.jsxs)(H.mQ,{selectedTabId:t,children:[(0,r.jsx)(X.f,{id:"activity",title:"Activity",to:"/overview/activity"}),(0,r.jsx)(X.f,{id:"jobs",title:"Jobs",to:"/overview/jobs"}),(0,r.jsx)(X.f,{id:"schedules",title:"Schedules",to:"/overview/schedules"}),(0,r.jsx)(X.f,{id:"sensors",title:"Sensors",to:"/overview/sensors"}),"has-global-amp"===o?(0,r.jsx)(X.f,{id:"amp",title:(0,r.jsxs)(c.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,r.jsx)("div",{children:"Auto-materialize"}),i.loading?(0,r.jsx)(v.$,{purpose:"body-text"}):(0,r.jsx)("div",{style:{width:"10px",height:"10px",borderRadius:"50%",backgroundColor:!1===i.paused?x.L$():x.md()}})]}),to:"/overview/automation"}):null,(0,r.jsx)(X.f,{id:"resources",title:"Resources",to:"/overview/resources"}),(0,r.jsx)(X.f,{id:"backfills",title:"Backfills",to:"/overview/backfills"})]}),n?(0,r.jsx)(c.x,{padding:{bottom:8},children:(0,r.jsx)(_.xi,{refreshState:n})}):null]})},Z=t(99596),Y=t(64595),ee=t(10952),en=t(75690),et=t(46988),RepoFilterButton=function(){var e=(0,u.useContext)(et.C5),n=e.allRepos,t=e.visibleRepos,i=e.toggleVisible,s=(0,o._)((0,u.useState)(!1),2),a=s[0],d=s[1];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(ee.Vq,{canOutsideClickClose:!0,canEscapeKeyClose:!0,isOpen:a,style:{width:"auto"},onClose:function(){return d(!1)},children:[(0,r.jsx)(ee.fK,{icon:"repo",label:"Filter code locations"}),(0,r.jsx)(en.e,{options:n,onBrowse:function(){return d(!1)},onToggle:i,selected:t}),(0,r.jsx)(ee.cN,{children:(0,r.jsx)(c.x,{padding:{top:8},children:(0,r.jsx)(l.zx,{intent:"none",onClick:function(){return d(!1)},children:"Done"})})})]}),(0,r.jsx)(l.zx,{outlined:!0,icon:(0,r.jsx)(j.JO,{name:"folder"}),rightIcon:(0,r.jsx)(j.JO,{name:"expand_more"}),onClick:function(){return d(!0)},children:"".concat(t.length," of ").concat(n.length)})]})},er=t(83568),ei=t(65435),eo=t(15282),useHourWindow=function(e){var n=(0,u.useCallback)(function(n){switch(n){case"1":case"6":case"12":case"24":return n;default:return e}},[e]),t=(0,o._)((0,eo.U)("dagster.run-timeline-hour-window",n),2),r=t[0],i=t[1],s=(0,u.useCallback)(function(n){i(n||e)},[e,i]);return(0,u.useMemo)(function(){return[r,s]},[r,s])},es=t(87612),ea=t(82550),el=t(60138),ec=t(6315),eu=t(38917),ed=t(16413),eh=t(61935);function NextTick_templateObject(){var e=(0,f._)(["\n  fragment ScheduleFutureTicksFragment on Schedule {\n    id\n    executionTimezone\n    scheduleState {\n      id\n      status\n    }\n    futureTicks(cursor: $tickCursor, until: $ticksUntil) {\n      results {\n        timestamp\n      }\n    }\n  }\n"]);return NextTick_templateObject=function(){return e},e}var ef=(0,el.Ps)(NextTick_templateObject()),ep=t(44254);function useRunsForTimeline_templateObject(){var e=(0,f._)(["\n  query RunTimelineQuery(\n    $inProgressFilter: RunsFilter!\n    $terminatedFilter: RunsFilter!\n    $tickCursor: Float\n    $ticksUntil: Float\n  ) {\n    unterminated: runsOrError(filter: $inProgressFilter) {\n      ... on Runs {\n        results {\n          id\n          pipelineName\n          repositoryOrigin {\n            id\n            repositoryName\n            repositoryLocationName\n          }\n          ...RunTimeFragment\n        }\n      }\n    }\n    terminated: runsOrError(filter: $terminatedFilter) {\n      ... on Runs {\n        results {\n          id\n          pipelineName\n          repositoryOrigin {\n            id\n            repositoryName\n            repositoryLocationName\n          }\n          ...RunTimeFragment\n        }\n      }\n    }\n    workspaceOrError {\n      ... on Workspace {\n        id\n        locationEntries {\n          id\n          name\n          loadStatus\n          displayMetadata {\n            key\n            value\n          }\n          locationOrLoadError {\n            ... on RepositoryLocation {\n              id\n              name\n              repositories {\n                id\n                name\n                pipelines {\n                  id\n                  name\n                  isJob\n                }\n                schedules {\n                  id\n                  name\n                  pipelineName\n                  scheduleState {\n                    id\n                    status\n                  }\n                  ...ScheduleFutureTicksFragment\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n\n  ","\n  ","\n"]);return useRunsForTimeline_templateObject=function(){return e},e}var useRunsForTimeline=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=(0,o._)(e,2),r=t[0],i=t[1],s=r/1e3,a=i/1e3,l=(0,p.a)(ev,{notifyOnNetworkStatusChange:!0,fetchPolicy:"no-cache",variables:{inProgressFilter:(0,h._)((0,d._)({},n),{statuses:[eh.VOA.CANCELING,eh.VOA.STARTED],createdBefore:a}),terminatedFilter:(0,h._)((0,d._)({},n),{statuses:Array.from(ec.cv),createdBefore:a,updatedAfter:s}),tickCursor:s,ticksUntil:a}}),c=l.data,f=l.previousData,v=l.loading&&!c,m=c||f||{},x=m.unterminated,g=m.terminated,j=m.workspaceOrError,y=(0,u.useMemo)(function(){var e={},n=Date.now();return(0,ea._)((null==x?void 0:x.__typename)==="Runs"?x.results:[]).concat((0,ea._)((null==g?void 0:g.__typename)==="Runs"?g.results:[])).forEach(function(t){if(t.startTime&&t.repositoryOrigin&&(0,ed.a)({start:r,end:i},{start:1e3*t.startTime,end:t.endTime?1e3*t.endTime:n})){var o=makeJobKey({name:t.repositoryOrigin.repositoryName,location:t.repositoryOrigin.repositoryLocationName},t.pipelineName);e[o]=(0,ea._)(e[o]||[]).concat([{id:t.id,status:t.status,startTime:1e3*t.startTime,endTime:t.endTime?1e3*t.endTime:n}])}}),e},[i,x,g,r]),b=(0,u.useMemo)(function(){if(!j||"Workspace"!==j.__typename)return[];var e=[],n=!0,t=!1,o=void 0;try{for(var s,a=j.locationEntries[Symbol.iterator]();!(n=(s=a.next()).done);n=!0)!function(){var n=s.value;if("WorkspaceLocationEntry"===n.__typename&&(null===(c=n.locationOrLoadError)||void 0===c?void 0:c.__typename)==="RepositoryLocation"){var t=Date.now(),o=!0,a=!1,l=void 0;try{for(var c,u,d=n.locationOrLoadError.repositories[Symbol.iterator]();!(o=(u=d.next()).done);o=!0)!function(){var o=u.value,s=(0,$.kQ)(o.name,n.locationOrLoadError.name),a=!0,l=!1,c=void 0;try{for(var d,h=o.pipelines[Symbol.iterator]();!(a=(d=h.next()).done);a=!0)!function(){var n=d.value,a=(o.schedules||[]).filter(function(e){return e.pipelineName===n.name}),l=[],c=!0,u=!1,h=void 0;try{for(var f,p=a[Symbol.iterator]();!(c=(f=p.next()).done);c=!0)!function(){var e=f.value;e.scheduleState.status===eh.ynu.RUNNING&&e.futureTicks.results.forEach(function(n){var o=n.timestamp,s=1e3*o;s>t&&(0,ed.a)({start:r,end:i},{start:s,end:s})&&l.push({id:"".concat(e.pipelineName,"-future-run-").concat(o),status:"SCHEDULED",startTime:s,endTime:s+5e3})})}()}catch(e){u=!0,h=e}finally{try{c||null==p.return||p.return()}finally{if(u)throw h}}var v=(0,R.pv)(n.name),m=makeJobKey(s,n.name),x=v?"Ad hoc materializations":n.name,g=y[m]||[];if(l.length||g.length){var j=(0,ea._)(g).concat((0,ea._)(l));if(v){var b,w=e.find(function(e){return"asset"===e.jobType&&e.repoAddress===s});if(w)return(b=w.runs).push.apply(b,(0,ea._)(j))}e.push({key:m,jobName:x,jobType:v?"asset":"job",repoAddress:s,path:(0,D.jT)({repoName:s.name,repoLocation:s.location,pipelineName:n.name,isJob:n.isJob}),runs:(0,ea._)(g).concat((0,ea._)(l))})}}()}catch(e){l=!0,c=e}finally{try{a||null==h.return||h.return()}finally{if(l)throw c}}}()}catch(e){a=!0,l=e}finally{try{o||null==d.return||d.return()}finally{if(a)throw l}}}}()}catch(e){t=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(t)throw o}}var l=e.reduce(function(e,n){var t,r=n.runs.map(function(e){return e.startTime});return(0,h._)((0,d._)({},e),(0,es._)({},n.key,(t=Math).min.apply(t,(0,ea._)(r))))},{});return e.sort(function(e,n){return l[e.key]-l[n.key]})},[j,y,r,i]);return(0,u.useMemo)(function(){return{jobs:b,initialLoading:v,queryData:l}},[v,b,l])},makeJobKey=function(e,n){return"".concat(n,"-").concat((0,ep.Uz)(e))},ev=(0,el.Ps)(useRunsForTimeline_templateObject(),eu.$X,ef),hourWindowToOffset=function(e){switch(e){case"1":return 36e5;case"6":return 216e5;case"12":return 432e5;case"24":return 864e5}},OverviewTimelineRoot=function(e){var n=e.Header,t=e.TabButton;(0,T.Px)(),(0,z.j)("Overview | Timeline");var i=(0,er.t)("OverviewTimelineRoot"),s=u.useContext(et.C5),a=s.allRepos,d=s.visibleRepos,h=(0,o._)(useHourWindow("12"),2),f=h[0],p=h[1],v=(0,o._)(u.useState(function(){return Date.now()}),2),x=v[0],g=v[1],j=(0,o._)(u.useState(function(){return 0}),2),y=j[0],b=j[1],w=(0,o._)((0,L.q)({queryKey:"search",defaults:{search:""}}),2),k=w[0],O=w[1];u.useEffect(function(){g(Date.now());var e=setInterval(function(){g(Date.now())},6e4);return function(){clearInterval(e)}},[f]);var S=u.useCallback(function(){b(function(e){return e-hourWindowToOffset(f)})},[f]),C=u.useCallback(function(){b(function(e){return e+hourWindowToOffset(f)})},[f]),A=u.useCallback(function(){b(0)},[]),E=u.useMemo(function(){return[x-36e5*Number(f)+y,x+36e5+y]},[f,x,y]),R=useRunsForTimeline(E),P=R.jobs,N=R.initialLoading,I=R.queryData,B=(0,_.C4)(I,_.dT);u.useEffect(function(){N||i.endTrace()},[N,i]);var F=u.useMemo(function(){var e=k.toLocaleLowerCase().trim(),n=d.flatMap(function(n){var t=(0,$.kQ)(n.repository.name,n.repositoryLocation.name);return n.repository.pipelines.filter(function(n){return n.name.toLocaleLowerCase().includes(e)}).map(function(e){return makeJobKey(t,e.name)})});return new Set(n)},[d,k]),M=u.useMemo(function(){return P.filter(function(e){var n=e.key;return F.has(n)})},[P,F]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n,{refreshState:B}),(0,r.jsxs)(c.x,{padding:{horizontal:24,vertical:16},flex:{alignItems:"center",justifyContent:"space-between"},children:[(0,r.jsxs)(c.x,{flex:{direction:"row",alignItems:"center",gap:12,grow:0},children:[(0,r.jsx)(t,{selected:"timeline"}),a.length>1&&(0,r.jsx)(RepoFilterButton,{}),(0,r.jsx)(m.oi,{icon:"search",value:k,onChange:function(e){return O(e.target.value)},placeholder:"Filter by job name…",style:{width:"200px"}})]}),(0,r.jsxs)(c.x,{flex:{direction:"row",gap:16,alignItems:"center"},children:[(0,r.jsx)(Z.h,{activeItems:new Set([f]),buttons:[{id:"1",label:"1hr"},{id:"6",label:"6hr"},{id:"12",label:"12hr"},{id:"24",label:"24hr"}],onClick:function(e){return p(e)}}),(0,r.jsxs)(c.x,{flex:{direction:"row",gap:4,alignItems:"center"},children:[(0,r.jsx)(l.zx,{onClick:S,children:"←"}),(0,r.jsx)(l.zx,{onClick:A,children:"Now"}),(0,r.jsx)(l.zx,{onClick:C,children:"→"})]})]})]}),(0,r.jsx)(Y.S,{region:"timeline",children:(0,r.jsx)(ei.q,{loading:N,range:E,jobs:M})})]})},em=t(46928),OverviewActivityRoot=function(){(0,T.Px)(),(0,z.j)("Overview | Activity");var e=u.useCallback(function(e){var n=e.refreshState;return(0,r.jsx)(s.m,{title:(0,r.jsx)(a.X6,{children:"Overview"}),tabs:(0,r.jsx)(OverviewTabs,{tab:"activity",refreshState:n})})},[]),n=(0,o._)((0,eo.U)("overview-activity-tab",function(e){return["timeline","assets"].includes(e)?e:"timeline"}),2),t=n[0],d=n[1],h=u.useCallback(function(e){var n=e.selected;return t!==n&&d(n),(0,r.jsxs)(l.zH,{children:[(0,r.jsx)(em.Q1,{$active:"timeline"===n,to:"/overview/activity/timeline",children:"Timeline"}),(0,r.jsx)(em.Q1,{$active:"assets"===n,to:"/overview/activity/assets",children:"Assets"})]})},[t,d]);return(0,r.jsx)(c.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:(0,r.jsxs)(i.rs,{children:[(0,r.jsx)(i.AW,{path:"/overview/activity/assets",children:(0,r.jsx)(OverviewAssetsRoot,{Header:e,TabButton:h})}),(0,r.jsx)(i.AW,{path:"/overview/activity/timeline",children:(0,r.jsx)(OverviewTimelineRoot,{Header:e,TabButton:h})}),(0,r.jsx)(i.AW,{path:"*",render:u.useCallback(function(){return"timeline"===t?(0,r.jsx)(i.l_,{to:"/overview/activity/timeline"}):(0,r.jsx)(i.l_,{to:"/overview/activity/assets"})},[t])})]})})},ex=t(92364),eg=t(43180),ej=t(68884),ey=t(77277),eb=t(42885),ew=t(9901),ek=t(86839),OverviewJobsTable=function(e){var n=e.repos,t=(0,u.useRef)(null),i=(0,u.useMemo)(function(){return n.map(function(e){var n=e.repoAddress;return(0,ep.Uz)(n)})},[n]),o=(0,eb.N)(ej.y,i),s=o.expandedKeys,a=o.onToggle,l=o.onToggleAll,c=(0,u.useMemo)(function(){var e=[];return n.forEach(function(n){var t=n.repoAddress,r=n.jobs;e.push({type:"header",repoAddress:t,jobCount:r.length});var i=(0,ep.Uz)(t);s.includes(i)&&r.forEach(function(n){var r=n.isJob,i=n.name;e.push({type:"job",repoAddress:t,isJob:r,name:i})})}),e},[n,s]),d=(0,ey.w)(n.map(function(e){return e.repoAddress.name})),h=(0,k.MG)({count:c.length,getScrollElement:function(){return t.current},estimateSize:function(e){var n=c[e];return(null==n?void 0:n.type)==="header"?32:64},overscan:10}),f=h.getTotalSize(),p=h.getVirtualItems();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ew.I,{}),(0,r.jsx)("div",{style:{overflow:"hidden"},children:(0,r.jsx)(M.W2,{ref:t,children:(0,r.jsx)(M.Nh,{$totalHeight:f,children:p.map(function(e){var n=e.index,t=e.key,i=e.size,o=e.start,u=c[n];return"header"===u.type?(0,r.jsx)(ek.vG,{repoAddress:u.repoAddress,height:i,start:o,onToggle:a,onToggleAll:l,expanded:s.includes((0,ep.Uz)(u.repoAddress)),showLocation:d.has(u.repoAddress.name),rightElement:(0,r.jsx)(eg.u,{content:1===u.jobCount?"1 job":"".concat(u.jobCount," jobs"),placement:"top",children:(0,r.jsx)(y.V,{children:u.jobCount})})},t):(0,r.jsx)(ew.b,{name:u.name,isJob:u.isJob,repoAddress:u.repoAddress,height:i,start:o},t)})})})})]})},sortRepoBuckets=function(e){return(0,ea._)(e).sort(function(e,n){var t=(0,ep.Uz)(e.repoAddress),r=(0,ep.Uz)(n.repoAddress);return t.localeCompare(r)})},visibleRepoKeys=function(e){return new Set(e.map(function(e){return(0,ep.Uz)((0,$.kQ)(e.repository.name,e.repositoryLocation.name))}))},eO=t(91195),useDelayedState=function(e){var n=(0,o._)((0,u.useState)(!1),2),t=n[0],r=n[1];return(0,u.useEffect)(function(){var n=setTimeout(function(){return r(!0)},e);return function(){return clearTimeout(n)}},[e]),t},SearchInputSpinner=function(e){var n=e.tooltipContent;return useDelayedState(2e3)?(0,r.jsx)(c.x,{margin:{top:1},children:(0,r.jsx)(eg.u,{placement:"top",canShow:!!n,content:n||"",children:(0,r.jsx)(v.$,{purpose:"body-text"})})}):null};function OverviewJobsRoot_templateObject(){var e=(0,f._)(["\n  query OverviewJobsQuery {\n    workspaceOrError {\n      ... on Workspace {\n        id\n        locationEntries {\n          id\n          locationOrLoadError {\n            ... on RepositoryLocation {\n              id\n              name\n              repositories {\n                id\n                name\n                pipelines {\n                  id\n                  name\n                  isJob\n                }\n              }\n            }\n            ...PythonErrorFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n"]);return OverviewJobsRoot_templateObject=function(){return e},e}var OverviewJobsRoot=function(){(0,T.Px)(),(0,z.j)("Overview | Jobs");var e=(0,u.useContext)(et.C5),n=e.allRepos,t=e.visibleRepos,i=e.loading,l=(0,o._)((0,L.q)({queryKey:"search",defaults:{search:""}}),2),d=l[0],h=l[1],f=n.length,g=(0,p.a)(eS,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0}),j=g.data,y=g.loading,b=(0,_.C4)(g,_.dT),w=(0,u.useMemo)(function(){var e=visibleRepoKeys(t);return buildBuckets(j).filter(function(n){var t=n.repoAddress;return e.has((0,ep.Uz)(t))})},[j,t]),k=d.trim().toLocaleLowerCase(),O=k.length>0,S=(0,u.useMemo)(function(){var e=k.toLocaleLowerCase();return w.map(function(n){return{repoAddress:n.repoAddress,jobs:n.jobs.filter(function(n){return n.name.toLocaleLowerCase().includes(e)})}}).filter(function(e){return e.jobs.length>0})},[w,k]),C=i&&!f||y&&!j;return(0,r.jsxs)(c.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,r.jsx)(s.m,{title:(0,r.jsx)(a.X6,{children:"Overview"}),tabs:(0,r.jsx)(OverviewTabs,{tab:"jobs",refreshState:b})}),(0,r.jsxs)(c.x,{padding:{horizontal:24,vertical:16},flex:{direction:"row",alignItems:"center",gap:12,grow:0},children:[f>1?(0,r.jsx)(RepoFilterButton,{}):null,(0,r.jsx)(m.oi,{icon:"search",value:d,rightElement:C?(0,r.jsx)(SearchInputSpinner,{tooltipContent:"Loading jobs…"}):void 0,onChange:function(e){return h(e.target.value)},placeholder:"Filter by job name…",style:{width:"340px"}})]}),y&&!f?(0,r.jsx)(c.x,{padding:64,children:(0,r.jsx)(v.$,{purpose:"page"})}):function(){if(y&&!j)return(0,r.jsx)(c.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,r.jsxs)(c.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,r.jsx)(v.$,{purpose:"body-text"}),(0,r.jsx)("div",{style:{color:x.$()},children:"Loading jobs…"})]})});var e=n.length>t.length;return S.length?(0,r.jsx)(OverviewJobsTable,{repos:S}):O?(0,r.jsx)(c.x,{padding:{top:20},children:(0,r.jsx)(ex.t,{icon:"search",title:"No matching jobs",description:e?(0,r.jsxs)("div",{children:["No jobs matching ",(0,r.jsx)("strong",{children:d})," were found in the selected code locations"]}):(0,r.jsxs)("div",{children:["No jobs matching ",(0,r.jsx)("strong",{children:d})," were found in your definitions"]})})}):(0,r.jsx)(c.x,{padding:{top:20},children:(0,r.jsx)(ex.t,{icon:"search",title:"No jobs",description:e?"No jobs were found in the selected code locations":"No jobs were found in your definitions"})})}()]})},buildBuckets=function(e){if((null==e?void 0:e.workspaceOrError.__typename)!=="Workspace")return[];var n=e.workspaceOrError.locationEntries.map(function(e){return e.locationOrLoadError}),t=[],r=!0,i=!1,o=void 0;try{for(var s,a=n[Symbol.iterator]();!(r=(s=a.next()).done);r=!0){var l=s.value;if((null==l?void 0:l.__typename)==="RepositoryLocation"){var c=!0,u=!1,d=void 0;try{for(var h,f=l.repositories[Symbol.iterator]();!(c=(h=f.next()).done);c=!0){var p=h.value,v=p.name,m=p.pipelines,x=(0,$.kQ)(v,l.name),g=m.filter(function(e){var n=e.name;return!(0,R.pv)(n)}).map(function(e){return{isJob:e.isJob,name:e.name}});g.length>0&&t.push({repoAddress:x,jobs:g})}}catch(e){u=!0,d=e}finally{try{c||null==f.return||f.return()}finally{if(u)throw d}}}}}catch(e){i=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return sortRepoBuckets(t)},eS=(0,el.Ps)(OverviewJobsRoot_templateObject(),eO.B),eC=t(98319),OverviewResourcesTable=function(e){var n=e.repos,t=(0,u.useRef)(null),i=(0,u.useMemo)(function(){return n.map(function(e){var n=e.repoAddress;return(0,ep.Uz)(n)})},[n]),o=(0,eb.N)(ej.y,i),s=o.expandedKeys,a=o.onToggle,l=o.onToggleAll,c=(0,u.useMemo)(function(){var e=[];return n.forEach(function(n){var t=n.repoAddress,r=n.resources;e.push({type:"header",repoAddress:t,resourceCount:r.length});var i=(0,ep.Uz)(t);s.includes(i)&&r.forEach(function(n){e.push((0,d._)({type:"resource",repoAddress:t},n))})}),e},[n,s]),h=(0,ey.w)(n.map(function(e){return e.repoAddress.name})),f=(0,k.MG)({count:c.length,getScrollElement:function(){return t.current},estimateSize:function(e){var n=c[e];return(null==n?void 0:n.type)==="header"?32:64},overscan:10}),p=f.getTotalSize(),v=f.getVirtualItems();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(eC.f,{}),(0,r.jsx)("div",{style:{overflow:"hidden"},children:(0,r.jsx)(M.W2,{ref:t,children:(0,r.jsx)(M.Nh,{$totalHeight:p,children:v.map(function(e){var n=e.index,t=e.key,i=e.size,o=e.start,u=c[n];return"header"===u.type?(0,r.jsx)(ek.vG,{repoAddress:u.repoAddress,height:i,start:o,onToggle:a,onToggleAll:l,expanded:s.includes((0,ep.Uz)(u.repoAddress)),showLocation:h.has(u.repoAddress.name),rightElement:(0,r.jsx)(eg.u,{content:1===u.resourceCount?"1 resource":"".concat(u.resourceCount," resources"),placement:"top",children:(0,r.jsx)(y.V,{children:u.resourceCount})})},t):(0,r.jsx)(eC.K,(0,d._)({height:i,start:o},u),t)})})})})]})},e_=t(76588);function OverviewResourcesRoot_templateObject(){var e=(0,f._)(["\n  query OverviewResourcesQuery {\n    workspaceOrError {\n      ... on Workspace {\n        id\n        locationEntries {\n          id\n          locationOrLoadError {\n            ... on RepositoryLocation {\n              id\n              name\n              repositories {\n                id\n                name\n                allTopLevelResourceDetails {\n                  id\n                  ...ResourceEntryFragment\n                }\n              }\n            }\n            ...PythonErrorFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"]);return OverviewResourcesRoot_templateObject=function(){return e},e}var OverviewResourcesRoot=function(){(0,T.Px)(),(0,z.j)("Overview | Resources");var e=(0,u.useContext)(et.C5),n=e.allRepos,t=e.visibleRepos,i=e.loading,l=(0,o._)((0,L.q)({queryKey:"search",defaults:{search:""}}),2),d=l[0],h=l[1],f=n.length,g=(0,p.a)(eT,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0}),j=g.data,y=g.loading,b=(0,_.C4)(g,_.dT),w=(0,u.useMemo)(function(){var e=visibleRepoKeys(t);return OverviewResourcesRoot_buildBuckets(j).filter(function(n){var t=n.repoAddress;return e.has((0,ep.Uz)(t))})},[j,t]),k=d.trim().toLocaleLowerCase(),O=k.length>0,S=(0,u.useMemo)(function(){var e=k.toLocaleLowerCase();return w.map(function(n){return{repoAddress:n.repoAddress,resources:n.resources.filter(function(n){return n.name.toLocaleLowerCase().includes(e)})}}).filter(function(e){return e.resources.length>0})},[w,k]),C=i&&!f||y&&!j;return(0,r.jsxs)(c.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,r.jsx)(s.m,{title:(0,r.jsx)(a.X6,{children:"Overview"}),tabs:(0,r.jsx)(OverviewTabs,{tab:"resources",refreshState:b})}),(0,r.jsxs)(c.x,{padding:{horizontal:24,vertical:16},flex:{direction:"row",alignItems:"center",gap:12,grow:0},children:[f>1?(0,r.jsx)(RepoFilterButton,{}):null,(0,r.jsx)(m.oi,{icon:"search",value:d,rightElement:C?(0,r.jsx)(SearchInputSpinner,{tooltipContent:"Loading resources…"}):void 0,onChange:function(e){return h(e.target.value)},placeholder:"Filter by resource name…",style:{width:"340px"}})]}),y&&!f?(0,r.jsx)(c.x,{padding:64,children:(0,r.jsx)(v.$,{purpose:"page"})}):function(){if(y&&!j)return(0,r.jsx)(c.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,r.jsxs)(c.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,r.jsx)(v.$,{purpose:"body-text"}),(0,r.jsx)("div",{style:{color:x.$()},children:"Loading resources…"})]})});var e=n.length>t.length;return S.length?(0,r.jsx)(OverviewResourcesTable,{repos:S}):O?(0,r.jsx)(c.x,{padding:{top:20},children:(0,r.jsx)(ex.t,{icon:"search",title:"No matching resources",description:e?(0,r.jsxs)("div",{children:["No resources matching ",(0,r.jsx)("strong",{children:d})," were found in the selected code locations"]}):(0,r.jsxs)("div",{children:["No resources matching ",(0,r.jsx)("strong",{children:d})," were found in your definitions"]})})}):(0,r.jsx)(c.x,{padding:{top:20},children:(0,r.jsx)(ex.t,{icon:"search",title:"No resources",description:e?"No resources were found in the selected code locations":"No resources were found in your definitions"})})}()]})},OverviewResourcesRoot_buildBuckets=function(e){if((null==e?void 0:e.workspaceOrError.__typename)!=="Workspace")return[];var n=e.workspaceOrError.locationEntries.map(function(e){return e.locationOrLoadError}),t=[],r=!0,i=!1,o=void 0;try{for(var s,a=n[Symbol.iterator]();!(r=(s=a.next()).done);r=!0){var l=s.value;if((null==l?void 0:l.__typename)==="RepositoryLocation"){var c=!0,u=!1,d=void 0;try{for(var h,f=l.repositories[Symbol.iterator]();!(c=(h=f.next()).done);c=!0){var p=h.value,v=p.name,m=p.allTopLevelResourceDetails,x=(0,$.kQ)(v,l.name);m.length>0&&t.push({repoAddress:x,resources:m})}}catch(e){u=!0,d=e}finally{try{c||null==f.return||f.return()}finally{if(u)throw d}}}}}catch(e){i=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return sortRepoBuckets(t)},eT=(0,el.Ps)(OverviewResourcesRoot_templateObject(),eO.B,e_.L),eA=t(2281),eE=t(72855),eR=t(157),eP=t(72349),OverviewScheduleTable=function(e){var n=e.repos,t=e.headerCheckbox,i=e.checkedKeys,o=e.onToggleCheckFactory,s=u.useRef(null),a=u.useMemo(function(){return n.map(function(e){var n=e.repoAddress;return(0,ep.Uz)(n)})},[n]),l=(0,eb.N)(ej.y,a),c=l.expandedKeys,d=l.onToggle,h=l.onToggleAll,f=u.useMemo(function(){var e=[];return n.forEach(function(n){var t=n.repoAddress,r=n.schedules;e.push({type:"header",repoAddress:t,scheduleCount:r.length});var i=(0,ep.Uz)(t);c.includes(i)&&r.forEach(function(n){e.push({type:"schedule",repoAddress:t,schedule:n})})}),e},[n,c]),p=(0,ey.w)(n.map(function(e){return e.repoAddress.name})),v=(0,k.MG)({count:f.length,getScrollElement:function(){return s.current},estimateSize:function(e){var n=f[e];return(null==n?void 0:n.type)==="header"?32:64},overscan:10}),m=v.getTotalSize(),x=v.getVirtualItems();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(eP.o,{checkbox:t}),(0,r.jsx)("div",{style:{overflow:"hidden"},children:(0,r.jsx)(M.W2,{ref:s,children:(0,r.jsx)(M.Nh,{$totalHeight:m,children:x.map(function(e){var n=e.index,s=e.key,a=e.size,l=e.start,u=f[n];if("header"===u.type)return(0,r.jsx)(ek.vG,{repoAddress:u.repoAddress,height:a,start:l,onToggle:d,onToggleAll:h,expanded:c.includes((0,ep.Uz)(u.repoAddress)),showLocation:p.has(u.repoAddress.name),rightElement:(0,r.jsx)(eg.u,{content:1===u.scheduleCount?"1 schedule":"".concat(u.scheduleCount," schedules"),placement:"top",children:(0,r.jsx)(y.V,{children:u.scheduleCount})})},s);var v=(0,eR.g)(u.repoAddress,u.schedule.name);return(0,r.jsx)(eP.i,{name:u.schedule.name,scheduleState:u.schedule.scheduleState,showCheckboxColumn:!!t,checked:i.has(v),onToggleChecked:o(v),repoAddress:u.repoAddress,height:a,start:l},s)})})})})]})},eN=t(73689),eI=t(31761),eB=t(30894),ez=t(24808),eL=t(84826),eF=t(30682),eM=t(77376),e$=t(54242),eD=t(8223);function OverviewSchedulesRoot_templateObject(){var e=(0,f._)(["\n  query OverviewSchedulesQuery {\n    workspaceOrError {\n      ... on Workspace {\n        id\n        locationEntries {\n          id\n          locationOrLoadError {\n            ... on RepositoryLocation {\n              id\n              name\n              repositories {\n                id\n                name\n                schedules {\n                  id\n                  name\n                  description\n                  scheduleState {\n                    id\n                    ...BasicInstigationStateFragment\n                  }\n                }\n              }\n            }\n            ...PythonErrorFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n    instance {\n      id\n      ...InstanceHealthFragment\n    }\n  }\n\n  ","\n  ","\n  ","\n"]);return OverviewSchedulesRoot_templateObject=function(){return e},e}var OverviewSchedulesRoot=function(){(0,T.Px)(),(0,z.j)("Overview | Schedules");var e=(0,u.useContext)(et.C5),n=e.allRepos,t=e.visibleRepos,i=e.loading,l=n.length,f=(0,o._)((0,L.q)({queryKey:"search",defaults:{search:""}}),2),g=f[0],j=f[1],y=(0,e$.A)(),b=(0,eD.g)(),w=(0,u.useMemo)(function(){return[y,b]},[y,b]),k=(0,eM.m)({filters:w}),O=k.button,S=k.activeFiltersJsx,C=(0,p.a)(eU,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0}),A=C.data,E=C.loading,R=(0,_.C4)(C,_.dT),P=(0,u.useMemo)(function(){var e=visibleRepoKeys(t);return OverviewSchedulesRoot_buildBuckets(A).filter(function(n){var t=n.repoAddress;return e.has((0,ep.Uz)(t))})},[A,t]),N=b.state,I=(0,u.useMemo)(function(){return P.map(function(e){var n=e.schedules,t=(0,eA._)(e,["schedules"]);return(0,h._)((0,d._)({},t),{schedules:N.size?n.filter(function(e){var n=e.scheduleState;return N.has(n.status)}):n})})},[P,N]),B=g.trim().toLocaleLowerCase(),F=B.length>0,M=(0,u.useMemo)(function(){var e=B.toLocaleLowerCase();return I.map(function(n){return{repoAddress:n.repoAddress,schedules:n.schedules.filter(function(n){return n.name.toLocaleLowerCase().includes(e)})}}).filter(function(e){return e.schedules.length>0})},[I,B]),$=(0,u.useMemo)(function(){return M.some(function(e){return e.schedules.length>0})},[M]),D=(0,u.useMemo)(function(){return P.map(function(e){var n=e.repoAddress;return e.schedules.filter(function(e){var n=e.scheduleState;return(0,eB.i)(n)}).map(function(e){return{repoAddress:n,scheduleName:e.name,scheduleState:e.scheduleState}})}).flat()},[P]),U=(0,u.useMemo)(function(){return D.map(function(e){var n=e.repoAddress,t=e.scheduleName;return(0,eR.g)(n,t)})},[D]),K=(0,o._)((0,eN.a)(U),2),J=K[0].checkedIds,q=K[1],W=q.onToggleFactory,V=q.onToggleAll,H=(0,u.useMemo)(function(){var e=new Set(M.map(function(e){var n=e.repoAddress;return e.schedules.map(function(e){var t=e.name;return(0,eR.g)(n,t)})}).flat());return U.filter(function(n){return e.has(n)})},[U,M]),Q=(0,u.useMemo)(function(){var e=new Set(H.filter(function(e){return J.has(e)}));return D.filter(function(n){var t=n.repoAddress,r=n.scheduleName;return e.has((0,eR.g)(t,r))})},[H,D,J]),G=U.length>0,X=Q.length,Z=i&&!l||E&&!A;return(0,r.jsxs)(c.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,r.jsx)(s.m,{title:(0,r.jsx)(a.X6,{children:"Overview"}),tabs:(0,r.jsx)(OverviewTabs,{tab:"schedules",refreshState:R})}),(0,r.jsxs)(c.x,{padding:{horizontal:24,vertical:16},flex:{direction:"row",alignItems:"center",justifyContent:"space-between"},children:[(0,r.jsxs)(c.x,{flex:{direction:"row",gap:12},children:[O,(0,r.jsx)(m.oi,{icon:"search",value:g,rightElement:Z?(0,r.jsx)(SearchInputSpinner,{tooltipContent:"Loading schedules…"}):void 0,onChange:function(e){j(e.target.value),V(!1)},placeholder:"Filter by schedule name…",style:{width:"340px"}})]}),(0,r.jsx)(eg.u,{content:"You do not have permission to start or stop these schedules",canShow:$&&!G,placement:"top-end",useDisabledButtonTooltipFix:!0,children:(0,r.jsx)(ez._,{schedules:Q,onDone:function(){return R.refetch()}})})]}),S.length?(0,r.jsx)(c.x,{padding:{vertical:8,horizontal:24},border:"top-and-bottom",flex:{direction:"row",gap:8},children:S}):null,E&&!l?(0,r.jsx)(c.x,{padding:64,children:(0,r.jsx)(v.$,{purpose:"page"})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(eL.K,{daemonHealth:null==A?void 0:A.instance.daemonHealth,padding:{vertical:16,horizontal:24},border:"top"}),function(){if(E&&!A)return(0,r.jsx)(c.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,r.jsxs)(c.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,r.jsx)(v.$,{purpose:"body-text"}),(0,r.jsx)("div",{style:{color:x.$()},children:"Loading schedules…"})]})});var e=n.length>t.length;return M.length?(0,r.jsx)(OverviewScheduleTable,{headerCheckbox:G?(0,r.jsx)(eF.W,{checkedCount:X,totalCount:H.length,onToggleAll:V}):void 0,repos:M,checkedKeys:J,onToggleCheckFactory:W}):F?(0,r.jsx)(c.x,{padding:{top:20},children:(0,r.jsx)(ex.t,{icon:"search",title:"No matching schedules",description:e?(0,r.jsxs)("div",{children:["No schedules matching ",(0,r.jsx)("strong",{children:g})," were found in the selected code locations"]}):(0,r.jsxs)("div",{children:["No schedules matching ",(0,r.jsx)("strong",{children:g})," were found in your definitions"]})})}):(0,r.jsx)(c.x,{padding:{top:20},children:(0,r.jsx)(ex.t,{icon:"search",title:"No schedules",description:e?"No matching schedules were found in the selected code locations":"No matching schedules were found in your definitions"})})}()]})]})},OverviewSchedulesRoot_buildBuckets=function(e){if((null==e?void 0:e.workspaceOrError.__typename)!=="Workspace")return[];var n=e.workspaceOrError.locationEntries.map(function(e){return e.locationOrLoadError}),t=[],r=!0,i=!1,o=void 0;try{for(var s,a=n[Symbol.iterator]();!(r=(s=a.next()).done);r=!0){var l=s.value;if((null==l?void 0:l.__typename)==="RepositoryLocation"){var c=!0,u=!1,d=void 0;try{for(var h,f=l.repositories[Symbol.iterator]();!(c=(h=f.next()).done);c=!0){var p=h.value,v=p.name,m=p.schedules,x=(0,$.kQ)(v,l.name),g=m.map(function(e){var n=e.name,t=e.scheduleState;return{name:n,scheduleState:t}});g.length>0&&t.push({repoAddress:x,schedules:g})}}catch(e){u=!0,d=e}finally{try{c||null==f.return||f.return()}finally{if(u)throw d}}}}}catch(e){i=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return sortRepoBuckets(t)},eU=(0,el.Ps)(OverviewSchedulesRoot_templateObject(),eE.i,eO.B,eI.O),eK=t(22478),eJ=t(16592),OverviewSensorTable=function(e){var n=e.repos,t=e.headerCheckbox,i=e.checkedKeys,o=e.onToggleCheckFactory,s=u.useRef(null),a=u.useMemo(function(){return n.map(function(e){var n=e.repoAddress;return(0,ep.Uz)(n)})},[n]),l=(0,eb.N)(ej.y,a),c=l.expandedKeys,d=l.onToggle,h=l.onToggleAll,f=u.useMemo(function(){var e=[];return n.forEach(function(n){var t=n.repoAddress,r=n.sensors;e.push({type:"header",repoAddress:t,sensorCount:r.length});var i=(0,ep.Uz)(t);c.includes(i)&&r.forEach(function(n){e.push({type:"sensor",repoAddress:t,sensor:n})})}),e},[n,c]),p=(0,ey.w)(n.map(function(e){return e.repoAddress.name})),v=(0,k.MG)({count:f.length,getScrollElement:function(){return s.current},estimateSize:function(e){var n=f[e];return(null==n?void 0:n.type)==="header"?32:64},overscan:10}),m=v.getTotalSize(),x=v.getVirtualItems();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(eJ.K,{checkbox:t}),(0,r.jsx)("div",{style:{overflow:"hidden"},children:(0,r.jsx)(M.W2,{ref:s,children:(0,r.jsx)(M.Nh,{$totalHeight:m,children:x.map(function(e){var n=e.index,s=e.key,a=e.size,l=e.start,u=f[n];if("header"===u.type)return(0,r.jsx)(ek.vG,{repoAddress:u.repoAddress,height:a,start:l,onToggle:d,onToggleAll:h,expanded:c.includes((0,ep.Uz)(u.repoAddress)),showLocation:p.has(u.repoAddress.name),rightElement:(0,r.jsx)(eg.u,{content:1===u.sensorCount?"1 sensor":"".concat(u.sensorCount," sensors"),placement:"top",children:(0,r.jsx)(y.V,{children:u.sensorCount})})},s);var v=(0,eK.x)(u.repoAddress,u.sensor.name);return(0,r.jsx)(eJ.R,{name:u.sensor.name,sensorState:u.sensor.sensorState,showCheckboxColumn:!!t,checked:i.has(v),onToggleChecked:o(v),repoAddress:u.repoAddress,height:a,start:l},s)})})})})]})},eq=t(67802),eW=t(56692);function OverviewSensorsRoot_templateObject(){var e=(0,f._)(["\n  query OverviewSensorsQuery {\n    workspaceOrError {\n      ... on Workspace {\n        id\n        locationEntries {\n          id\n          locationOrLoadError {\n            ... on RepositoryLocation {\n              id\n              name\n              repositories {\n                id\n                name\n                sensors {\n                  id\n                  name\n                  description\n                  sensorType\n                  sensorState {\n                    id\n                    ...BasicInstigationStateFragment\n                  }\n                }\n              }\n            }\n            ...PythonErrorFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n    instance {\n      id\n      ...InstanceHealthFragment\n    }\n  }\n\n  ","\n  ","\n  ","\n"]);return OverviewSensorsRoot_templateObject=function(){return e},e}var OverviewSensorsRoot=function(){(0,T.Px)(),(0,z.j)("Overview | Sensors");var e=(0,u.useContext)(et.C5),n=e.allRepos,t=e.visibleRepos,i=e.loading,l=n.length,f=(0,o._)((0,L.q)({queryKey:"search",defaults:{search:""}}),2),g=f[0],j=f[1],y=(0,e$.A)(),b=(0,eD.g)(),w=(0,u.useMemo)(function(){return[y,b]},[y,b]),k=(0,eM.m)({filters:w}),O=k.button,S=k.activeFiltersJsx,C=(0,p.a)(eV,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0}),A=C.data,E=C.loading,R=(0,_.C4)(C,_.dT),P=(0,u.useMemo)(function(){var e=visibleRepoKeys(t);return OverviewSensorsRoot_buildBuckets(A).filter(function(n){var t=n.repoAddress;return e.has((0,ep.Uz)(t))})},[A,t]),N=b.state,I=(0,u.useMemo)(function(){return P.map(function(e){var n=e.sensors,t=(0,eA._)(e,["sensors"]);return(0,h._)((0,d._)({},t),{sensors:N.size?n.filter(function(e){var n=e.sensorState;return N.has(n.status)}):n})})},[P,N]),B=g.trim().toLocaleLowerCase(),F=B.length>0,M=(0,u.useMemo)(function(){var e=B.toLocaleLowerCase();return I.map(function(n){return{repoAddress:n.repoAddress,sensors:n.sensors.filter(function(n){return n.name.toLocaleLowerCase().includes(e)})}}).filter(function(e){return e.sensors.length>0})},[I,B]),$=(0,u.useMemo)(function(){return M.some(function(e){return e.sensors.length>0})},[M]),D=(0,u.useMemo)(function(){return P.map(function(e){var n=e.repoAddress;return e.sensors.filter(function(e){var n=e.sensorState;return(0,eB.i)(n)}).map(function(e){return{repoAddress:n,sensorName:e.name,sensorState:e.sensorState}})}).flat()},[P]),U=(0,u.useMemo)(function(){return D.map(function(e){var n=e.repoAddress,t=e.sensorName;return(0,eK.x)(n,t)})},[D]),K=(0,o._)((0,eN.a)(U),2),J=K[0].checkedIds,q=K[1],W=q.onToggleFactory,V=q.onToggleAll,H=(0,u.useMemo)(function(){var e=new Set(M.map(function(e){var n=e.repoAddress;return e.sensors.map(function(e){var t=e.name;return(0,eK.x)(n,t)})}).flat());return U.filter(function(n){return e.has(n)})},[U,M]),Q=(0,u.useMemo)(function(){var e=new Set(H.filter(function(e){return J.has(e)}));return D.filter(function(n){var t=n.repoAddress,r=n.sensorName;return e.has((0,eK.x)(t,r))})},[H,D,J]),G=U.length>0,X=Q.length,Z=i&&!l||E&&!A;return(0,r.jsxs)(c.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,r.jsx)(s.m,{title:(0,r.jsx)(a.X6,{children:"Overview"}),tabs:(0,r.jsx)(OverviewTabs,{tab:"sensors",refreshState:R})}),(0,r.jsxs)(c.x,{padding:{horizontal:24,vertical:16},flex:{direction:"row",alignItems:"center",justifyContent:"space-between",gap:12,grow:0},children:[(0,r.jsxs)(c.x,{flex:{direction:"row",gap:12},children:[O,(0,r.jsx)(m.oi,{icon:"search",value:g,rightElement:Z?(0,r.jsx)(SearchInputSpinner,{tooltipContent:"Loading sensors…"}):void 0,onChange:function(e){return j(e.target.value)},placeholder:"Filter by sensor name…",style:{width:"340px"}})]}),(0,r.jsx)(eg.u,{content:"You do not have permission to start or stop these schedules",canShow:$&&!G,placement:"top-end",useDisabledButtonTooltipFix:!0,children:(0,r.jsx)(eq.b,{sensors:Q,onDone:function(){return R.refetch()}})})]}),S.length?(0,r.jsx)(c.x,{padding:{vertical:8,horizontal:24},border:"top-and-bottom",flex:{direction:"row",gap:8},children:S}):null,E&&!l?(0,r.jsx)(c.x,{padding:64,children:(0,r.jsx)(v.$,{purpose:"page"})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(eW.F,{daemonHealth:null==A?void 0:A.instance.daemonHealth,padding:{vertical:16,horizontal:24},border:"top"}),function(){if(E&&!A)return(0,r.jsx)(c.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,r.jsxs)(c.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,r.jsx)(v.$,{purpose:"body-text"}),(0,r.jsx)("div",{style:{color:x.$()},children:"Loading sensors…"})]})});var e=n.length>t.length;return M.length?(0,r.jsx)(OverviewSensorTable,{headerCheckbox:G?(0,r.jsx)(eF.W,{checkedCount:X,totalCount:H.length,onToggleAll:V}):void 0,repos:M,checkedKeys:J,onToggleCheckFactory:W}):F?(0,r.jsx)(c.x,{padding:{top:20},children:(0,r.jsx)(ex.t,{icon:"search",title:"No matching sensors",description:e?(0,r.jsxs)("div",{children:["No sensors matching ",(0,r.jsx)("strong",{children:g})," were found in the selected code locations"]}):(0,r.jsxs)("div",{children:["No sensors matching ",(0,r.jsx)("strong",{children:g})," were found in your definitions"]})})}):(0,r.jsx)(c.x,{padding:{top:20},children:(0,r.jsx)(ex.t,{icon:"search",title:"No sensors",description:e?"No sensors were found in the selected code locations":"No sensors were found in your definitions"})})}()]})]})},OverviewSensorsRoot_buildBuckets=function(e){if((null==e?void 0:e.workspaceOrError.__typename)!=="Workspace")return[];var n=e.workspaceOrError.locationEntries.map(function(e){return e.locationOrLoadError}),t=[],r=!0,i=!1,o=void 0;try{for(var s,a=n[Symbol.iterator]();!(r=(s=a.next()).done);r=!0){var l=s.value;if((null==l?void 0:l.__typename)==="RepositoryLocation"){var c=!0,u=!1,d=void 0;try{for(var h,f=l.repositories[Symbol.iterator]();!(c=(h=f.next()).done);c=!0){var p=h.value,v=p.name,m=p.sensors,x=(0,$.kQ)(v,l.name);m.length>0&&t.push({repoAddress:x,sensors:m})}}catch(e){u=!0,d=e}finally{try{c||null==f.return||f.return()}finally{if(u)throw d}}}}}catch(e){i=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return sortRepoBuckets(t)},eV=(0,el.Ps)(OverviewSensorsRoot_templateObject(),eE.i,eO.B,eI.O),eH=t(81862),eQ=t(22970),eG=t(83601),eX=t(28888),eZ=t(9676),eY=t(54266),e0=t(82585),e1=t(89102),e2=t(3490),e6=t(80428),e4=t(22370),e3=t(65767),InstanceAutomaterializationEvaluationHistoryTable=function(e){var n,t,i=e.setSelectedTick,s=e.setTableView,a=e.setTimerange,l=e.setParentStatuses,c=(0,o._)((0,L.q)({queryKey:"statuses",decode:(0,u.useCallback)(function(e){var n=e.statuses;return new Set(n?JSON.parse(n):[eh.izS.STARTED,eh.izS.SUCCESS,eh.izS.FAILURE,eh.izS.SKIPPED])},[]),encode:(0,u.useCallback)(function(e){return{statuses:JSON.stringify(Array.from(e))}},[])}),2),d=c[0],h=c[1],f=(0,e3.l)({query:e1.X,variables:{statuses:(0,u.useMemo)(function(){return Array.from(d)},[d])},nextCursorForResult:function(e){var n,t=e.autoMaterializeTicks;if(t.length)return null===(n=t[14])||void 0===n?void 0:n.id},getResultArray:function(e){return(null==e?void 0:e.autoMaterializeTicks)?e.autoMaterializeTicks:[]},pageSize:15}),p=f.queryResult,v=f.paginationProps;return(0,_.C4)(p,1e4,!v.hasPrevCursor),(0,u.useEffect)(function(){if(v.hasPrevCursor){var e=null===(n=p.data)||void 0===n?void 0:n.autoMaterializeTicks;if(e&&e.length){var n,t,r,i=null===(t=e[e.length-1])||void 0===t?void 0:t.timestamp,o=null===(r=e[0])||void 0===r?void 0:r.endTimestamp;i&&o&&a([i,o])}}else a(void 0)},[v.hasPrevCursor,null===(n=p.data)||void 0===n?void 0:n.autoMaterializeTicks,a]),(0,u.useEffect)(function(){v.hasPrevCursor?l(Array.from(d)):l(void 0)},[v.hasPrevCursor,l,d]),(0,r.jsx)(e4.V,{loading:p.loading,ticks:(null===(t=p.data)||void 0===t?void 0:t.autoMaterializeTicks)||[],paginationProps:v,setSelectedTick:i,setStatuses:h,setTableView:s,statuses:d})},e8=t(75168),e5=t(54949),e9=t(46032),e7=t(90437),ne=t(85888),AutomaterializationRoot=function(){var e=(0,Q.e)();switch(e){case"unknown":return(0,r.jsx)("div",{});case"has-global-amp":return(0,r.jsx)(GlobalAutomaterializationRoot,{});case"has-sensor-amp":return(0,r.jsx)(i.l_,{to:"/overview/sensors"});default:(0,e9.UT)(e)}},GlobalAutomaterializationRoot=function(){var e,n,fetchData=function(){p({variables:A})};(0,T.Px)();var t=(0,G.dx)(),i=(0,e8.p)(),l=(0,e5.WB)().permissions,h=(void 0===l?{}:l).canToggleAutoMaterialize,f=(0,o._)((0,eG.t)(e1.X),2),p=f[0],m=f[1],g=(0,o._)((0,u.useState)(!1),2),j=g[0],y=g[1],b=(0,o._)((0,u.useState)(void 0),2),w=b[0],k=b[1],O=(0,o._)((0,u.useState)(void 0),2),S=O[0],C=O[1],A=(0,u.useMemo)(function(){return S||w?{afterTimestamp:null==S?void 0:S[0],beforeTimestamp:null==S?void 0:S[1],statuses:w}:{afterTimestamp:(Date.now()-12e5)/1e3}},[w,S]);(0,u.useLayoutEffect)(fetchData,[A]),(0,_.C4)(m,2e3,!j&&!S&&!w,fetchData);for(var E=(0,o._)((0,u.useState)(null),2),R=E[0],P=E[1],N=(0,o._)((0,L.q)((0,u.useMemo)(function(){return{queryKey:"view",decode:function(e){return"runs"===e.view?"runs":"evaluations"},encode:function(e){return{view:e,cursor:void 0,statuses:void 0}}}},[])),2),I=N[0],B=N[1],z=null!==(n=m.data)&&void 0!==n?n:m.previousData,F=z?z.autoMaterializeTicks.map(function(e){return"".concat(e.id,":").concat(e.status)}):[];F.length<100;)F.push("");var M=(0,u.useMemo)(function(){var e,n=null==z?void 0:z.autoMaterializeTicks;return null!==(e=null==n?void 0:n.map(function(e,t){var r=n[t-1];if(r&&(0,ne.g6)(e,t)){var i=(0,d._)({},e);return i.endTimestamp=r.timestamp,i.status=eh.izS.FAILURE,i}return e}))&&void 0!==e?e:[]},(0,ea._)(F.slice(0,100))),$=(0,u.useCallback)(function(e){y(!!e)},[y]);return(0,r.jsxs)(eX.T,{children:[(0,r.jsx)(s.m,{title:(0,r.jsx)(a.X6,{children:"Overview"}),tabs:(0,r.jsx)(OverviewTabs,{tab:"amp"})}),(0,r.jsx)(c.x,{padding:{vertical:12,horizontal:24},flex:{direction:"column",gap:12},children:(0,r.jsx)(eZ.b,{intent:"info",title:"[Experimental] Dagster can automatically materialize assets when criteria are met.",description:(0,r.jsxs)(r.Fragment,{children:["Auto-materialization enables a declarative approach to asset scheduling – instead of defining imperative workflows to materialize your assets, you just describe the conditions under which they should be materialized."," ",(0,r.jsx)("a",{href:"https://docs.dagster.io/concepts/assets/asset-auto-execution",target:"_blank",rel:"noreferrer",children:"Learn more about auto-materialization here"}),"."]})})}),(0,r.jsx)(eY.i,{children:(0,r.jsxs)("tbody",{children:[(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Running"}),(0,r.jsx)("td",{children:t.loading?(0,r.jsx)(v.$,{purpose:"body-text"}):(0,r.jsx)(e0.X,{format:"switch",checked:!t.paused,disabled:!h,onChange:(e=(0,eH._)(function(e){var n;return(0,eQ.Jh)(this,function(r){switch(r.label){case 0:if(n=e.target.checked)return[3,2];return[4,i({title:"Pause Auto-materializing?",description:"Pausing Auto-materializing will prevent new materializations triggered by an Auto-materializing policy."})];case 1:r.sent(),r.label=2;case 2:return t.setPaused(!n),[2]}})}),function(n){return e.apply(this,arguments)})})})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Evaluation frequency"}),(0,r.jsx)("td",{children:"~30s"})]})]})}),(0,r.jsx)(c.x,{padding:{vertical:12,horizontal:24},border:"bottom",children:(0,r.jsx)(a.Tj,{children:"Evaluation timeline"})}),z?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e7.p,{ticks:M,onHoverTick:$,onSelectTick:P,exactRange:S,timeRange:12e5,tickGrid:3e5,timeAfter:18e4}),(0,r.jsx)(e2.d,{tick:R,isOpen:!!R,close:function(){P(null)}}),"evaluations"===I?(0,r.jsx)(InstanceAutomaterializationEvaluationHistoryTable,{setSelectedTick:P,setTableView:B,setParentStatuses:k,setTimerange:C}):(0,r.jsx)(e6.o,{setTableView:B})]}):(0,r.jsxs)(c.x,{padding:{vertical:48},flex:{direction:"row",justifyContent:"center",gap:12,alignItems:"center"},children:[(0,r.jsx)(v.$,{purpose:"body-text"}),(0,r.jsx)("div",{style:{color:x.$()},children:"Loading evaluations…"})]})]})},nn=t(83302),nt=t(94611),nr=t(62311),ni=t(16292);function InstanceBackfills_templateObject(){var e=(0,f._)(["\n  query InstanceHealthForBackfillsQuery {\n    instance {\n      id\n      ...InstanceHealthFragment\n    }\n  }\n\n  ","\n"]);return InstanceBackfills_templateObject=function(){return e},e}function InstanceBackfills_templateObject1(){var e=(0,f._)(["\n  query InstanceBackfillsQuery($status: BulkActionStatus, $cursor: String, $limit: Int) {\n    partitionBackfillsOrError(status: $status, cursor: $cursor, limit: $limit) {\n      ... on PartitionBackfills {\n        results {\n          id\n          status\n          isValidSerialization\n          numPartitions\n          timestamp\n          partitionSetName\n          partitionSet {\n            id\n            name\n            mode\n            pipelineName\n            repositoryOrigin {\n              id\n              repositoryName\n              repositoryLocationName\n            }\n          }\n          error {\n            ...PythonErrorFragment\n          }\n\n          ...BackfillTableFragment\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"]);return InstanceBackfills_templateObject1=function(){return e},e}var labelForBackfillStatus=function(e){switch(e){case eh.Jv3.CANCELED:return"Canceled";case eh.Jv3.CANCELING:return"Canceling";case eh.Jv3.COMPLETED:return"Completed";case eh.Jv3.FAILED:return"Failed";case eh.Jv3.REQUESTED:return"In progress"}},no=Object.keys(eh.Jv3).map(function(e){var n=labelForBackfillStatus(e);return{label:n,value:e,match:[e,n]}}),InstanceBackfills=function(){(0,T.Px)(),(0,z.j)("Overview | Backfills");var e=(0,p.a)(ns),n=(0,ni.im)({name:"Status",icon:"status",allValues:no,allowMultipleSelections:!1,closeOnSelect:!0,renderLabel:function(e){var n=e.value;return(0,r.jsx)("div",{children:labelForBackfillStatus(n)})},getStringValue:function(e){return labelForBackfillStatus(e)}}),t=n.state,i=(0,eM.m)({filters:[n]}),o=i.button,l=i.activeFiltersJsx,u=(0,e3.l)({query:na,variables:{status:t.size>0?Array.from(t)[0]:void 0},pageSize:10,nextCursorForResult:function(e){var n;return"PartitionBackfills"===e.partitionBackfillsOrError.__typename?null===(n=e.partitionBackfillsOrError.results[9])||void 0===n?void 0:n.id:void 0},getResultArray:function(e){return(null==e?void 0:e.partitionBackfillsOrError.__typename)==="PartitionBackfills"?e.partitionBackfillsOrError.results:[]}}),h=u.queryResult,f=u.paginationProps,m=(0,_.C4)(h,_.dT),g=h.loading,j=h.data;return(0,r.jsxs)(eX.T,{children:[(0,r.jsx)(s.m,{title:(0,r.jsx)(a.X6,{children:"Overview"}),tabs:(0,r.jsx)(OverviewTabs,{tab:"backfills",refreshState:m})}),(0,r.jsx)(c.x,{padding:{vertical:12,horizontal:20},children:(0,r.jsxs)(c.x,{flex:{direction:"column",gap:8},children:[(0,r.jsx)("div",{children:o}),l]})}),function(){if(g&&!j)return(0,r.jsx)(c.x,{padding:{vertical:64},flex:{direction:"column",alignItems:"center"},children:(0,r.jsxs)(c.x,{flex:{direction:"row",alignItems:"center",gap:8},children:[(0,r.jsx)(v.$,{purpose:"body-text"}),(0,r.jsx)("div",{style:{color:x.$()},children:"Loading backfills…"})]})});var n,i=null==j?void 0:j.partitionBackfillsOrError;if((null==i?void 0:i.__typename)==="PythonError")return(0,r.jsx)(C.T9,{error:i});if(!i||!(null==i?void 0:i.results.length))return t.size>0?(0,r.jsx)(c.x,{padding:{vertical:64},children:(0,r.jsx)(ex.t,{icon:"no-results",title:"No matching backfills",description:"No backfills were found for this filter."})}):(0,r.jsx)(c.x,{padding:{vertical:64},children:(0,r.jsx)(ex.t,{icon:"no-results",title:"No backfills found",description:"This instance does not have any backfill jobs."})});var o=((null===(n=e.data)||void 0===n?void 0:n.instance.daemonHealth.allDaemonStatuses)||[]).filter(function(e){return"BACKFILL"===e.daemonType}).map(function(e){return e.required&&e.healthy}),s=o.length&&o.every(function(e){return e});return(0,r.jsxs)("div",{children:[s?null:(0,r.jsx)(c.x,{padding:{horizontal:24,vertical:16},children:(0,r.jsx)(nr.B1,{})}),(0,r.jsx)(nt.G,{backfills:i.results.slice(0,10),refetch:h.refetch}),i.results.length>0?(0,r.jsx)(c.x,{margin:{top:16},children:(0,r.jsx)(nn.b$,(0,d._)({},f))}):null]})}()]})},ns=(0,el.Ps)(InstanceBackfills_templateObject(),eI.O),na=(0,el.Ps)(InstanceBackfills_templateObject1(),eO.B,nt.b),nl=t(56675),nc=t(12084),nu=t(28879),nd=t.n(nu),nh=t(64989),nf=t.n(nh),np=t(77491),nv=t.n(np),nm=t(1813),nx=t(68651),ng=t(67690),nj=t(58701),ny=t(60130),nb=t(49313),nw=t(68052);function BackfillPage_templateObject(){var e=(0,f._)(["\n  color: ",";\n  font-size: 12px;\n  line-height: 16px;\n"]);return BackfillPage_templateObject=function(){return e},e}function BackfillPage_templateObject1(){var e=(0,f._)(["\n  query BackfillStatusesByAsset($backfillId: String!) {\n    partitionBackfillOrError(backfillId: $backfillId) {\n      ...PartitionBackfillFragment\n      ...PythonErrorFragment\n      ... on BackfillNotFoundError {\n        message\n      }\n    }\n  }\n\n  fragment PartitionBackfillFragment on PartitionBackfill {\n    id\n    status\n    timestamp\n    endTimestamp\n    numPartitions\n    ...BackfillActionsBackfillFragment\n\n    error {\n      ...PythonErrorFragment\n    }\n    assetBackfillData {\n      rootTargetedPartitions {\n        partitionKeys\n        ranges {\n          start\n          end\n        }\n      }\n      assetBackfillStatuses {\n        ... on AssetPartitionsStatusCounts {\n          assetKey {\n            path\n          }\n          numPartitionsTargeted\n          numPartitionsInProgress\n          numPartitionsMaterialized\n          numPartitionsFailed\n        }\n        ... on UnpartitionedAssetStatus {\n          assetKey {\n            path\n          }\n          inProgress\n          materialized\n          failed\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return BackfillPage_templateObject1=function(){return e},e}function BackfillPage_templateObject2(){var e=(0,f._)(["\n  query BackfillPartitionsForAssetKey($backfillId: String!, $assetKey: AssetKeyInput!) {\n    partitionBackfillOrError(backfillId: $backfillId) {\n      ... on PartitionBackfill {\n        id\n        partitionsTargetedForAssetKey(assetKey: $assetKey) {\n          partitionKeys\n          ranges {\n            start\n            end\n          }\n        }\n      }\n    }\n  }\n"]);return BackfillPage_templateObject2=function(){return e},e}nd().extend(nf()),nd().extend(nv());var BackfillPage=function(){var e=(0,nl.x)(),n=(0,i.k6)(),t=(0,i.UO)().backfillId;(0,T.Px)(),(0,z.j)("Backfill | ".concat(t));var o=(0,p.a)(nO,{variables:{backfillId:t}}),l=o.data,u=(null==l?void 0:l.partitionBackfillOrError.__typename)==="PartitionBackfill"?l.partitionBackfillOrError:null,d=!u||[eh.Jv3.REQUESTED,eh.Jv3.CANCELING].includes(u.status),h=(0,_.C4)(o,1e4,d);return(0,r.jsxs)(eX.T,{children:[(0,r.jsx)(s.m,{title:(0,r.jsxs)(a.X6,{children:[(0,r.jsx)(O.rU,{to:"/overview/backfills",style:{color:x.$()},children:"Backfills"})," / ",t]}),right:(0,r.jsxs)(c.x,{flex:{gap:12,alignItems:"center"},children:[d?(0,r.jsx)(_.xi,{refreshState:h}):null,u?(0,r.jsx)(nm.WH,{backfill:u,refetch:o.refetch,canCancelRuns:u.status===eh.Jv3.REQUESTED}):null]})}),function(){if(!l||!l.partitionBackfillOrError)return(0,r.jsx)(c.x,{padding:64,"data-testid":(0,nw.N)("page-loading-indicator"),children:(0,r.jsx)(v.$,{purpose:"page"})});if("PythonError"===l.partitionBackfillOrError.__typename)return(0,r.jsx)(C.T9,{error:l.partitionBackfillOrError});if("BackfillNotFoundError"===l.partitionBackfillOrError.__typename)return(0,r.jsx)(ex.t,{icon:"no-results",title:l.partitionBackfillOrError.message});var i,o,s,a=l.partitionBackfillOrError;function getRunsUrl(e){var n=[{token:"tag",value:"dagster/backfill=".concat(t)}];switch(e){case"inProgress":n.push({token:"status",value:eh.VOA.STARTED},{token:"status",value:eh.VOA.QUEUED},{token:"status",value:eh.VOA.STARTING},{token:"status",value:eh.VOA.CANCELING},{token:"status",value:eh.VOA.NOT_STARTED});break;case"complete":n.push({token:"status",value:eh.VOA.SUCCESS});break;case"failed":n.push({token:"status",value:eh.VOA.FAILURE}),n.push({token:"status",value:eh.VOA.CANCELED})}return(0,nb.it)(n)}var u=(i=(0,eH._)(function(r,i){var o,s,a,l;return(0,eQ.Jh)(this,function(c){switch(c.label){case 0:if(o={},!i)return[3,2];return[4,e.query({query:nS,variables:{backfillId:t,assetKey:(0,ny.W1)(r)}})];case 1:(l="PartitionBackfill"===(a=c.sent()).data.partitionBackfillOrError.__typename?a.data.partitionBackfillOrError.partitionsTargetedForAssetKey:null)&&(null===(s=l.ranges)||void 0===s?void 0:s.length)&&(o={default_range:l.ranges.map(function(e){return"[".concat(e.start,"...").concat(e.end,"]")}).join(",")}),c.label=2;case 2:return[2,n.push((0,B.p)(r,o))]}})}),function(e,n){return i.apply(this,arguments)});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(c.x,{padding:24,flex:{direction:"row",justifyContent:"space-between",wrap:"nowrap",alignItems:"center"},"data-testid":(0,nw.N)("backfill-page-details"),children:[(0,r.jsx)(Detail,{label:"Created",detail:(0,r.jsx)(nj.E,{timestamp:{ms:Number(1e3*a.timestamp)},timeFormat:{showSeconds:!0,showTimezone:!1}})}),(0,r.jsx)(Detail,{label:"Duration",detail:(0,r.jsx)(Duration,{start:1e3*a.timestamp,end:a.endTimestamp?1e3*a.endTimestamp:null})}),(0,r.jsx)(Detail,{label:"Partition selection",detail:(0,r.jsx)(ng.b,{targetPartitionCount:a.numPartitions||0,targetPartitions:null===(o=a.assetBackfillData)||void 0===o?void 0:o.rootTargetedPartitions})}),(0,r.jsx)(Detail,{label:"Status",detail:(0,r.jsx)(nx.w,{backfill:a})})]}),(0,r.jsxs)(eY.i,{children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{style:{width:"50%"},children:"Asset name"}),(0,r.jsx)("th",{children:(0,r.jsx)(O.rU,{to:getRunsUrl("targeted"),children:"Partitions targeted"})}),(0,r.jsx)("th",{children:(0,r.jsx)(O.rU,{to:getRunsUrl("inProgress"),children:"In progress"})}),(0,r.jsx)("th",{children:(0,r.jsx)(O.rU,{to:getRunsUrl("complete"),children:"Completed"})}),(0,r.jsx)("th",{children:(0,r.jsx)(O.rU,{to:getRunsUrl("failed"),children:"Failed"})})]})}),(0,r.jsx)("tbody",{children:null===(s=a.assetBackfillData)||void 0===s?void 0:s.assetBackfillStatuses.map(function(e){var n,t,i,o;return"AssetPartitionsStatusCounts"===e.__typename?(n=e.numPartitionsTargeted,t=e.numPartitionsInProgress,i=e.numPartitionsMaterialized,o=e.numPartitionsFailed):(n=1,o=e.failed?1:0,t=e.inProgress?1:0,i=e.materialized?1:0),(0,r.jsxs)("tr",{"data-testid":(0,nw.N)("backfill-asset-row-".concat((0,R.Je)(e.assetKey))),children:[(0,r.jsx)("td",{children:(0,r.jsxs)(c.x,{flex:{direction:"row",justifyContent:"space-between"},children:[(0,r.jsx)("div",{children:(0,r.jsx)(nc.Z,{onClick:function(){return u(e.assetKey,"AssetPartitionsStatusCounts"===e.__typename)},children:e.assetKey.path.join("/")})}),(0,r.jsx)("div",{children:(0,r.jsx)(StatusBar,{targeted:n,inProgress:t,completed:i,failed:o})})]})}),"AssetPartitionsStatusCounts"===e.__typename?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("td",{children:n}),(0,r.jsx)("td",{children:t}),(0,r.jsx)("td",{children:i}),(0,r.jsx)("td",{children:o})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("td",{children:"-"}),(0,r.jsx)("td",{children:t?(0,r.jsx)(y.V,{icon:"spinner",intent:"primary",children:"In progress"}):"-"}),(0,r.jsx)("td",{children:i?(0,r.jsx)(y.V,{intent:"success",children:"Completed"}):"-"}),(0,r.jsx)("td",{children:o?(0,r.jsx)(y.V,{intent:"danger",children:"Failed"}):"-"})]})]},(0,R.Je)(e.assetKey))})})]})]})}()]})},Detail=function(e){var n=e.label,t=e.detail;return(0,r.jsxs)(c.x,{flex:{direction:"column",gap:4},style:{minWidth:"280px"},children:[(0,r.jsx)(nk,{children:n}),(0,r.jsx)("div",{children:t})]})};function StatusBar(e){var n=e.targeted,t=e.inProgress,i=e.completed,o=e.failed;return(0,r.jsxs)("div",{style:{borderRadius:"8px",backgroundColor:x.gJ(),display:"grid",gridTemplateColumns:"".concat(100*i/n,"% ").concat(100*o/n,"% ").concat(100*t/n,"%"),gridTemplateRows:"100%",height:"12px",width:"200px",overflow:"hidden"},children:[(0,r.jsx)("div",{style:{background:x.fA()}}),(0,r.jsx)("div",{style:{background:x.FY()}}),(0,r.jsx)("div",{style:{background:x.L$()}})]})}var nk=S.ZP.div.withConfig({componentId:"sc-f232c43-0"})(BackfillPage_templateObject(),x.$()),Duration=function(e){var n=e.start,t=e.end,i=(0,o._)((0,u.useReducer)(function(e,n){return e+1},0),2),s=(i[0],i[1]);(0,u.useEffect)(function(){if(!t){var e=setInterval(s,6e4);return function(){return clearInterval(e)}}},[n,t]);var a=t?t-n:Date.now()-n;return(0,r.jsx)("span",{children:formatDuration(a)})},nO=(0,el.Ps)(BackfillPage_templateObject1(),eO.B,nm.V2),nS=(0,el.Ps)(BackfillPage_templateObject2()),formatDuration=function(e){var n=Math.floor(e/6e4%60),t=Math.floor(e/36e5%24),r=Math.floor(e/864e5),i="";return r>0?i+="".concat(r,"d ")+"".concat(t,"h"):t>0?i+="".concat(t,"h ")+"".concat(n,"m"):n>0&&(i+="".concat(n,"m ")+"".concat(Math.floor(e/1e3%60),"s")),i.trim()},OverviewRoot=function(){return(0,r.jsxs)(i.rs,{children:[(0,r.jsx)(i.AW,{path:"/overview/activity",children:(0,r.jsx)(OverviewActivityRoot,{})}),(0,r.jsx)(i.AW,{path:"/overview/jobs",children:(0,r.jsx)(OverviewJobsRoot,{})}),(0,r.jsx)(i.AW,{path:"/overview/schedules",children:(0,r.jsx)(OverviewSchedulesRoot,{})}),(0,r.jsx)(i.AW,{path:"/overview/sensors",children:(0,r.jsx)(OverviewSensorsRoot,{})}),(0,r.jsx)(i.AW,{path:"/overview/automation",children:(0,r.jsx)(AutomaterializationRoot,{})}),(0,r.jsx)(i.AW,{path:"/overview/backfills/:backfillId",children:(0,r.jsx)(BackfillPage,{})}),(0,r.jsx)(i.AW,{path:"/overview/backfills",exact:!0,children:(0,r.jsx)(InstanceBackfills,{})}),(0,r.jsx)(i.AW,{path:"/overview/resources",children:(0,r.jsx)(OverviewResourcesRoot,{})}),(0,r.jsx)(i.AW,{path:"*",render:function(){return(0,r.jsx)(i.l_,{to:"/overview/activity"})}})]})},nC=OverviewRoot}}]);
//# sourceMappingURL=411.c4aca3dba843f76c.js.map