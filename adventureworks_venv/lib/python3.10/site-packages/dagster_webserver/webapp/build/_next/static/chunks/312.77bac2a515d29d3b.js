"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[312],{41222:function(e,n,t){t.d(n,{K:function(){return AssetPageHeader},w:function(){return AssetGlobalLineageLink}});var r=t(81862),i=t(85333),o=t(2281),s=t(58467),a=t(73235),l=t(22970),c=t(52322),u=t(38058),d=t(17131),p=t(22139),h=t(81308),m=t(43180),x=t(34448),f=t(25195),g=t(2784),j=t(47933),v=t(35505),S=t(19211),y=t(47544);function _templateObject(){var e=(0,a._)(["\n  border: none;\n  background: transparent;\n  cursor: pointer;\n  padding: 3px;\n  margin-top: 2px;\n\n  :focus {\n    outline: none;\n  }\n\n  "," {\n    transition: background-color 100ms linear;\n  }\n\n  :hover "," {\n    background-color: ",";\n  }\n"]);return _templateObject=function(){return e},e}function _templateObject1(){var e=(0,a._)(["\n  & li:not(:first-child)::after {\n    background: none;\n    font-size: 20px;\n    font-weight: bold;\n    color: ",";\n    content: '/';\n    width: 8px;\n    line-height: 16px;\n  }\n"]);return _templateObject1=function(){return e},e}function _templateObject2(){var e=(0,a._)(["\n  color: ",";\n\n  :hover,\n  :active {\n    color: ",";\n  }\n"]);return _templateObject2=function(){return e},e}var AssetPageHeader=function(e){var n=e.assetKey,t=(0,o._)(e,["assetKey"]),a=(0,y.m)(),u=n.path.join("/"),j=(0,s._)(g.useState(!1),2),v=j[0],R=j[1],k=g.useRef(),A=g.useCallback((0,r._)(function(){return(0,l.Jh)(this,function(e){switch(e.label){case 0:return k.current&&clearTimeout(k.current),a(u),R(!0),[4,(0,S.B7)({icon:"done",intent:"primary",message:"Copied asset key!"})];case 1:return e.sent(),k.current=setTimeout(function(){R(!1)},2e3),[2]}})}),[a,u]),P=g.useMemo(function(){var e=[{text:"Assets",href:"/assets"}];return n.path.reduce(function(n,t){var r="".concat(n,"/").concat(encodeURIComponent(t));return e.push({text:t,href:r}),r},"/assets"),e},[n.path]);return(0,c.jsx)(d.m,(0,i._)({title:(0,c.jsxs)(p.x,{flex:{alignItems:"center",gap:4},style:{maxWidth:"600px",overflow:"hidden",marginBottom:4},children:[(0,c.jsx)(_,{items:P,currentBreadcrumbRenderer:function(e){var n=e.text;return(0,c.jsx)(h.X6,{children:n})},breadcrumbRenderer:function(e){var n=e.text,t=e.href;return(0,c.jsx)(h.X6,{children:(0,c.jsx)(O,{to:t||"#",children:n})})}}),(0,c.jsx)(m.u,{placement:"bottom",content:"Copy asset key",children:(0,c.jsx)(b,{onClick:A,children:(0,c.jsx)(x.JO,{name:v?"copy_to_clipboard_done":"copy_to_clipboard",color:f.md()})})})]})},t))},b=v.ZP.button.withConfig({componentId:"sc-deeab33b-0"})(_templateObject(),x.a1,x.a1,f.$l()),AssetGlobalLineageLink=function(){return(0,c.jsx)(j.rU,{to:"/asset-groups",children:(0,c.jsxs)(p.x,{flex:{gap:4},children:[(0,c.jsx)(x.JO,{color:f.Es(),name:"schema"}),"View global asset lineage"]})})},_=(0,v.ZP)(u.Oo).withConfig({componentId:"sc-deeab33b-1"})(_templateObject1(),f.Aw()),O=(0,v.ZP)(j.rU).withConfig({componentId:"sc-deeab33b-2"})(_templateObject2(),f.$(),f.$())},87631:function(e,n,t){t.d(n,{m:function(){return AutomaterializeDaemonStatusTag}});var r=t(52322),i=t(43180),o=t(57830),s=t(47933),a=t(81966),AutomaterializeDaemonStatusTag=function(){var e=(0,a.dx)().paused;return(0,r.jsx)(i.u,{content:e?"Auto-materializing is paused. New materializations will not be triggered by auto-materialization policies.":"",canShow:e,children:(0,r.jsx)(s.rU,{to:"/health",style:{outline:"none"},children:(0,r.jsx)(o.V,{icon:e?"toggle_off":"toggle_on",intent:e?"warning":"success",children:e?"Auto-materialize off":"Auto-materialize on"})})})}},29211:function(e,n,t){t.d(n,{G:function(){return PipelineRunsRoot}});var r=t(85333),i=t(6692),o=t(58467),s=t(73235),a=t(82550),l=t(52322),c=t(60138),u=t(21221),d=t(28888),p=t(22139),h=t(92364),m=t(57830),x=t(12084),f=t(83302),g=t(34448),j=t(2784),v=t(7267),S=t(88286),y=t(14388),b=t(91195),_=t(55237),O=t(68028),R=t(83568),k=t(12746),A=t(84495),P=t(38917),E=t(49313),C=t(65767),N=t(16148),w=t(90894),T=t(19358),F=t(46988),I=t(44254),$=t(38153);function _templateObject(){var e=(0,s._)(["\n  query PipelineRunsRootQuery($limit: Int, $cursor: String, $filter: RunsFilter!) {\n    pipelineRunsOrError(limit: $limit, cursor: $cursor, filter: $filter) {\n      ... on Runs {\n        results {\n          id\n          ...RunTableRunFragment\n        }\n      }\n      ... on InvalidPipelineRunsFilterError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"]);return _templateObject=function(){return e},e}var D=["status","tag","id","created_date_before","created_date_after"],PipelineRunsRoot=function(e){(0,O.Px)();var n=(0,v.UO)().pipelinePath,t=e.repoAddress,s=void 0===t?null:t,c=(0,S.p3)(n),g=c.pipelineName,b=c.snapshotId,N=(0,F.Ux)(s),$=(0,F.E8)(N,g);(0,y.b)(c,$);var L=(0,R.t)("PipelineRunsRoot"),U=(0,o._)((0,E.oD)(D),2),J=U[0],M=U[1],q=(0,j.useMemo)(function(){return[$?{token:"job",value:g}:{token:"pipeline",value:g},b?{token:"snapshotId",value:b}:null].filter(Boolean)},[$,g,b]),V=(0,a._)(J).concat((0,a._)(q));if(s){var W={token:"tag",value:"".concat(A.H.RepositoryLabelTag,"=").concat((0,I.Wg)(s))};V.push(W)}var B=(0,C.l)({query:z,pageSize:25,variables:{filter:(0,i._)((0,r._)({},(0,E.VH)(V)),{pipelineName:g,snapshotId:b})},nextCursorForResult:function(e){var n;if("Runs"===e.pipelineRunsOrError.__typename)return null===(n=e.pipelineRunsOrError.results[24])||void 0===n?void 0:n.id},getResultArray:function(e){return e&&"Runs"===e.pipelineRunsOrError.__typename?e.pipelineRunsOrError.results:[]}}),H=B.queryResult,G=B.paginationProps,K=(0,j.useCallback)(function(e){var n=(0,u.HY)(e);J.some(function(e){return(0,u.HY)(e)===n})||M((0,a._)(J).concat([e]))},[J,M]),Q=(0,_.C4)(H,_.dT),Z=(0,E.Vv)({enabledFilters:D,tokens:J,onChange:M,loading:H.loading}),Y=Z.button,X=Z.activeFiltersJsx;return(0,j.useEffect)(function(){H.loading||L.endTrace()},[H.loading,L]),(0,l.jsx)(P.Lw.Provider,{value:{refetch:H.refetch},children:(0,l.jsx)(d.T,{children:(0,l.jsx)(w.g,{queryResult:H,allowStaleData:!0,children:function(e){var t=e.pipelineRunsOrError;if("Runs"!==t.__typename)return(0,l.jsx)(p.x,{padding:{vertical:64},children:(0,l.jsx)(h.t,{icon:"error",title:"Query Error",description:t.message})});var i=t.results.slice(0,25),o=G.hasNextCursor,a=G.hasPrevCursor;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(T.Y,{$top:0,children:(0,l.jsx)(k.AL,{runs:i,onAddTag:K,actionBarComponents:(0,l.jsxs)(p.x,{flex:{direction:"row",justifyContent:"space-between",grow:1,alignItems:"center",gap:4},margin:{right:8},children:[Y,(0,l.jsx)(_.xi,{refreshState:Q})]}),belowActionBarComponents:(0,l.jsxs)(l.Fragment,{children:[q.map(function(e){var n=e.token,t=e.value;return(0,l.jsx)(m.V,{children:"".concat(n,":").concat(t)},n)}),X.length?(0,l.jsxs)(l.Fragment,{children:[X,(0,l.jsx)(x.Z,{onClick:function(){M([])},children:"Clear all"})]}):null]}),emptyState:function(){return(0,l.jsx)(EmptyState,{repoAddress:s,anyFilter:J.length>0,jobName:g,jobPath:n})}})}),o||a?(0,l.jsx)("div",{style:{marginTop:"20px"},children:(0,l.jsx)(f.pI,(0,r._)({},G))}):null]})}})})})},EmptyState=function(e){var n=e.repoAddress,t=e.anyFilter,r=e.jobName,i=e.jobPath,o=(0,F.Ux)(n),s=(0,F.Hb)(o,r);return(0,l.jsx)(p.x,{padding:{vertical:64},children:(0,l.jsx)(h.t,{icon:"run",title:"No runs found",description:n?s?(0,l.jsxs)(p.x,{flex:{direction:"column",gap:12},children:[(0,l.jsx)("div",{children:t?"There are no matching runs for these filters.":"You have not materialized any assets with this job yet."}),(0,l.jsx)("div",{children:(0,l.jsx)(N.A,{icon:(0,l.jsx)(g.JO,{name:"materialization"}),to:(0,$.$U)(n,"/jobs/".concat(i)),children:"Materialize an asset"})})]}):(0,l.jsxs)(p.x,{flex:{direction:"column",gap:12},children:[(0,l.jsx)("div",{children:t?"There are no matching runs for these filters.":"You have not launched any runs for this job yet."}),(0,l.jsx)("div",{children:(0,l.jsx)(N.A,{icon:(0,l.jsx)(g.JO,{name:"add_circle"}),to:(0,$.$U)(n,"/jobs/".concat(i,"/playground")),children:"Launch a run"})})]}):(0,l.jsx)("div",{children:"You have not launched any runs for this job."})})})},z=(0,c.Ps)(_templateObject(),k.ZZ,b.B)},39852:function(e,n,t){t.d(n,{i:function(){return ReloadAllButton}});var r=t(58467),i=t(52322),o=t(43180),s=t(9001),a=t(34448),l=t(10952),c=t(2784),u=t(70958),d=t(54949),p=t(56266),h=t(40092),ReloadAllButton=function(e){var n=e.label,t=void 0===n?"Reload all":n,m=(0,d.WB)(),x=m.permissions.canReloadWorkspace,f=m.disabledReasons,g=(0,h.Dc)({scope:"workspace",reloadFn:h.rL}),j=g.reloading,v=g.tryReload,S=g.error,y=g.errorLocationId,b=(0,r._)((0,c.useState)(!!S),2),_=b[0],O=b[1];return((0,c.useEffect)(function(){return O(!!S)},[S]),x)?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.zx,{outlined:!0,onClick:v,icon:(0,i.jsx)(a.JO,{name:"refresh"}),loading:j,children:t}),y?(0,i.jsx)(u.V,{error:S,location:y,reloading:j,onTryReload:v,onDismiss:function(){return O(!1)},isOpen:_}):(0,i.jsxs)(l.Vq,{icon:"error",title:"Reload error",canEscapeKeyClose:!1,canOutsideClickClose:!1,style:{width:"90%"},isOpen:_,children:[(0,i.jsx)(l.a7,{children:S&&(0,i.jsx)(p.T9,{error:S})}),(0,i.jsx)(l.cN,{children:(0,i.jsx)(s.zx,{onClick:function(){return O(!1)},children:"Dismiss"})})]})]}):(0,i.jsx)(o.u,{content:f.canReloadWorkspace,children:(0,i.jsx)(s.zx,{outlined:!0,icon:(0,i.jsx)(a.JO,{name:"refresh"}),disabled:!0,children:t})})}},44312:function(e,n,t){t.r(n),t.d(n,{WorkspaceRoot:function(){return WorkspaceRoot},default:function(){return t2}});var r,i,o=t(52322),s=t(22139),a=t(92364),l=t(82370),c=t(2784),u=t(7267),d=t(58467),p=t(73235),h=t(40794),m=t(60138),x=t(17131),f=t(81308),g=t(57830),j=t(91195),v=t(68028),S=t(28252),y=t(63386),b=t(42982),_=t(15848),O=t(88286),R=t(90894),k=t(38153);function _templateObject(){var e=(0,p._)(["\n  query GraphExplorerRootQuery(\n    $graphSelector: GraphSelector\n    $rootHandleID: String!\n    $requestScopeHandleID: String\n  ) {\n    graphOrError(selector: $graphSelector) {\n      ... on Graph {\n        id\n        name\n        solidHandle(handleID: $rootHandleID) {\n          ...GraphExplorerSolidHandleFragment\n        }\n        solidHandles(parentHandleID: $requestScopeHandleID) {\n          handleID\n          solid {\n            name\n          }\n          ...GraphExplorerSolidHandleFragment\n        }\n        ...GraphExplorerFragment\n      }\n      ... on GraphNotFoundError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n  ","\n"]);return _templateObject=function(){return e},e}var GraphRoot=function(e){(0,v.Px)();var n=e.repoAddress,t=(0,u.UO)(),r=(0,O.p3)(t[0]),i=r.opNames.length>1?r.opNames[r.opNames.length-2]:r.pipelineName;return(0,S.j)("Graph: ".concat(i)),(0,o.jsxs)("div",{style:{height:"100%",display:"flex",flexDirection:"column"},children:[(0,o.jsx)(x.m,{title:(0,o.jsx)(f.X6,{children:i}),tags:(0,o.jsxs)(g.V,{icon:"schema",children:["Graph in ",(0,o.jsx)(y.b,{repoAddress:n})]})}),(0,o.jsx)(s.x,{border:"top",style:{minHeight:0,flex:1,display:"flex"},children:(0,o.jsx)(GraphExplorerRoot,{repoAddress:n})})]})},GraphExplorerRoot=function(e){var n=e.repoAddress,t=(0,u.UO)(),r=(0,O.p3)(t["0"]),i=(0,u.k6)(),s=(0,d._)((0,c.useState)({explodeComposites:!1,preferAssetRendering:!0}),2),l=s[0],p=s[1],m=r.opNames.slice(0,r.opNames.length-1),x=(0,h.a)(A,{variables:{graphSelector:{repositoryName:(null==n?void 0:n.name)||"",repositoryLocationName:(null==n?void 0:n.location)||"",graphName:r.pipelineName},rootHandleID:m.join("."),requestScopeHandleID:l.explodeComposites?void 0:m.join(".")}});return(0,o.jsx)(R.g,{queryResult:x,children:function(t){var s=t.graphOrError;if("GraphNotFoundError"===s.__typename)return(0,o.jsx)(a.t,{icon:"error",title:"Graph not found",description:s.message});if("PythonError"===s.__typename)return(0,o.jsx)(a.t,{icon:"error",title:"Query Error",description:s.message});var c=s.solidHandle,u=l.explodeComposites?(0,b.i)(s.solidHandles):s.solidHandles;return(0,o.jsx)(_.m0,{options:l,setOptions:p,explorerPath:r,onChangeExplorerPath:function(n,t){var r=(0,k.$U)(e.repoAddress,"/graphs/".concat((0,O.gY)(n)));"push"===t?i.push(r):i.replace(r)},container:s,repoAddress:n,handles:u,parentHandle:c||void 0,isGraph:!0,getInvocations:function(e){return u.filter(function(n){return n.solid.definition.name===e}).map(function(e){return{handleID:e.handleID}})}})}})},A=(0,m.Ps)(_templateObject(),_.Q,_.Sm,j.B),P=t(63832),E=t(25195),C=t(34822),N=t(82550),w=t(34448),T=t(88510),F=t(47933),I=t(35505),$=t(90537),D=t(44254),z=t(34263),L=t(62175),U=t(15282),J=t(55658);function VirtualizedRepoAssetTable_templateObject(){var e=(0,p._)(["\n  cursor: pointer;\n\n  :focus,\n  :active {\n    outline: none;\n  }\n\n  ",'[aria-label="arrow_drop_down"] {\n    transition: transform 100ms linear;\n    ',"\n  }\n"]);return VirtualizedRepoAssetTable_templateObject=function(){return e},e}function _templateObject1(){var e=(0,p._)(["\n  fragment RepoAssetTableFragment on AssetNode {\n    id\n    assetKey {\n      path\n    }\n    groupName\n    ...AssetTableDefinitionFragment\n  }\n\n  ","\n"]);return _templateObject1=function(){return e},e}var M="UNGROUPED",VirtualizedRepoAssetTable=function(e){var n=e.repoAddress,t=e.assets,r=(0,c.useRef)(null),i=(0,D.Uz)(n),s=useAssetGroupExpansionState("".concat(i,"-").concat("assets-virtualized-expansion-state")),a=s.expandedKeys,l=s.onToggle,u=(0,c.useMemo)(function(){var e={},n=!0,r=!1,i=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value,l=a.groupName||M,c=e[l]||[];e[l]=(0,N._)(c).concat([a])}}catch(e){r=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}return e},[t]),p=(0,c.useMemo)(function(){var e=[];return Object.entries(u).forEach(function(n){var t=(0,d._)(n,2),r=t[0],i=t[1];e.push({type:"group",name:r,assetCount:i.length}),a.includes(r)&&i.forEach(function(n){e.push({type:"asset",id:n.id,definition:n})})}),e},[u,a]),h=(0,T.MG)({count:p.length,getScrollElement:function(){return r.current},estimateSize:function(e){var n=p[e];return(null==n?void 0:n.type)==="group"?48:64},overscan:5}),m=h.getTotalSize(),x=h.getVirtualItems();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)($.XC,{nameLabel:"Asset name"}),(0,o.jsx)("div",{style:{overflow:"hidden"},children:(0,o.jsx)(J.W2,{ref:r,children:(0,o.jsx)(J.Nh,{$totalHeight:m,children:x.map(function(e){var t=e.index,r=e.key,i=e.size,s=e.start,c=p[t];return"group"===c.type?(0,o.jsx)(GroupNameRow,{repoAddress:n,groupName:c.name,assetCount:c.assetCount,expanded:a.includes(c.name),height:i,start:s,onToggle:l},r):(0,o.jsx)($.pN,{showCheckboxColumn:!1,definition:c.definition,path:c.definition.assetKey.path,type:"asset",repoAddress:n,showRepoColumn:!1,height:i,start:s,checked:!1,onToggleChecked:function(){},onWipe:function(){}},r)})})})})]})},GroupNameRow=function(e){var n=e.repoAddress,t=e.groupName,r=e.assetCount,i=e.expanded,a=e.height,l=e.start,c=e.onToggle;return(0,o.jsx)(q,{$height:a,$start:l,onClick:function(){return c(t)},$open:i,tabIndex:0,onKeyDown:function(e){("Space"===e.code||"Enter"===e.code)&&(e.preventDefault(),c(t))},children:(0,o.jsxs)(s.x,{background:E.gJ(),flex:{direction:"row",alignItems:"center",gap:8,justifyContent:"space-between"},padding:{horizontal:24},border:"bottom",style:{height:"100%"},children:[(0,o.jsxs)(s.x,{flex:{alignItems:"center",gap:8},children:[(0,o.jsx)(w.JO,{name:"asset_group"}),t===M?(0,o.jsx)("div",{children:"Ungrouped assets"}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("strong",{children:t}),t!==M?(0,o.jsx)(s.x,{margin:{left:12},children:(0,o.jsx)(F.rU,{to:(0,k.$U)(n,"/asset-groups/".concat(t)),children:(0,o.jsxs)(s.x,{flex:{direction:"row",alignItems:"center",gap:4},children:[(0,o.jsx)("span",{children:"View lineage"}),(0,o.jsx)(w.JO,{name:"open_in_new",size:16,color:E.Es()})]})})}):null]})]}),(0,o.jsxs)(s.x,{flex:{direction:"row",alignItems:"center",gap:12},children:[(0,o.jsx)(g.V,{children:1===r?"1 asset":"".concat(r," assets")}),(0,o.jsx)(w.JO,{name:"arrow_drop_down",size:20})]})]})})},q=(0,I.ZP)(J.X2).withConfig({componentId:"sc-4b9d569a-0"})(VirtualizedRepoAssetTable_templateObject(),w.a1,function(e){return e.$open?null:"transform: rotate(-90deg);"}),validateExpandedKeys=function(e){return Array.isArray(e)?e:[]},useAssetGroupExpansionState=function(e){var n=(0,c.useContext)(z.I).basePath,t=(0,d._)((0,U.U)("".concat(n,":dagster.").concat(e),validateExpandedKeys),2),r=t[0],i=t[1],o=(0,c.useCallback)(function(e){i(function(n){var t=new Set(n||[]);return t.has(e)?t.delete(e):t.add(e),Array.from(t)})},[i]);return(0,c.useMemo)(function(){return{expandedKeys:r,onToggle:o}},[r,o])},V=(0,m.Ps)(_templateObject1(),L.s),W=t(20763),B=t(56121),H=t(55237),G=t(88983),K=t(71277);function WorkspaceAssetsRoot_templateObject(){var e=(0,p._)(["\n  query WorkspaceAssetsQuery($selector: RepositorySelector!) {\n    repositoryOrError(repositorySelector: $selector) {\n      ... on Repository {\n        id\n        name\n        assetNodes {\n          id\n          ...RepoAssetTableFragment\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"]);return WorkspaceAssetsRoot_templateObject=function(){return e},e}var WorkspaceAssetsRoot=function(e){var n=e.repoAddress;(0,v.Px)();var t=(0,D.Uz)(n);(0,S.j)("Assets: ".concat(t));var r=(0,B.$)(n),i=(0,d._)((0,K.q)({queryKey:"search",defaults:{search:""}}),2),l=i[0],u=i[1],p=(0,h.a)(Q,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0,variables:{selector:r}}),m=p.data,x=p.loading,f=(0,H.C4)(p,H.dT),g=l.trim().toLocaleLowerCase().length>0,j=(0,c.useMemo)(function(){return(null==m?void 0:m.repositoryOrError.__typename)==="Repository"?m.repositoryOrError.assetNodes:[]},[m]),y=(0,G.h)(l,j);return(0,o.jsxs)(s.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,o.jsx)(W.h,{repoAddress:n,tab:"assets",refreshState:f,queryData:p}),(0,o.jsx)(s.x,{padding:{horizontal:24,vertical:16},children:(0,o.jsx)(C.oi,{icon:"search",value:l,onChange:function(e){return u(e.target.value)},placeholder:"Filter by asset name…",style:{width:"340px"}})}),x&&!m?(0,o.jsx)(s.x,{padding:64,children:(0,o.jsx)(P.$,{purpose:"page"})}):x&&!m?(0,o.jsx)(s.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,o.jsxs)(s.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,o.jsx)(P.$,{purpose:"body-text"}),(0,o.jsx)("div",{style:{color:E.$()},children:"Loading assets…"})]})}):y.length?(0,o.jsx)(VirtualizedRepoAssetTable,{repoAddress:n,assets:y}):g?(0,o.jsx)(s.x,{padding:{top:20},children:(0,o.jsx)(a.t,{icon:"search",title:"No matching assets",description:(0,o.jsxs)("div",{children:["No assets matching ",(0,o.jsx)("strong",{children:l})," were found in ",t]})})}):(0,o.jsx)(s.x,{padding:{top:20},children:(0,o.jsx)(a.t,{icon:"search",title:"No assets",description:"No assets were found in ".concat(t)})})]})},Q=(0,m.Ps)(WorkspaceAssetsRoot_templateObject(),V,j.B),Z=t(46988),Y=t(83601),X=t(86839);function VirtualizedGraphTable_templateObject(){var e=(0,p._)(["\n  display: grid;\n  grid-template-columns: 100%;\n  height: 100%;\n"]);return VirtualizedGraphTable_templateObject=function(){return e},e}function VirtualizedGraphTable_templateObject1(){var e=(0,p._)(["\n  query SingleGraphQuery($selector: GraphSelector!) {\n    graphOrError(selector: $selector) {\n      ... on Graph {\n        id\n        name\n        description\n      }\n    }\n  }\n"]);return VirtualizedGraphTable_templateObject1=function(){return e},e}var VirtualizedGraphTable=function(e){var n=e.repoAddress,t=e.graphs,r=(0,c.useRef)(null),i=(0,T.MG)({count:t.length,getScrollElement:function(){return r.current},estimateSize:function(){return 64},overscan:10}),a=i.getTotalSize(),l=i.getVirtualItems();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(s.x,{border:"top-and-bottom",style:{display:"grid",gridTemplateColumns:"100%",height:"32px",fontSize:"12px",color:E.$()},children:(0,o.jsx)(J.qN,{children:"Graph"})}),(0,o.jsx)("div",{style:{overflow:"hidden"},children:(0,o.jsx)(J.W2,{ref:r,children:(0,o.jsx)(J.Nh,{$totalHeight:a,children:l.map(function(e){var r=e.index,i=e.key,s=e.size,a=e.start,l=t[r];return(0,o.jsx)(GraphRow,{name:l.name,description:l.description,path:l.path,repoAddress:n,height:s,start:a},i)})})})})]})},GraphRow=function(e){var n=e.name,t=e.path,r=e.description,i=e.repoAddress,a=e.start,l=e.height,u=(0,d._)((0,Y.t)(en,{variables:{selector:{repositoryName:i.name,repositoryLocationName:i.location,graphName:n}}}),2),p=u[0],h=u[1];(0,X.v5)(p);var m=h.data,x=(0,c.useMemo)(function(){return r||((null==m?void 0:m.graphOrError.__typename)==="Graph"?m.graphOrError.description:null)},[m,r]);return(0,o.jsx)(J.X2,{$height:l,$start:a,children:(0,o.jsx)(ee,{border:"bottom",children:(0,o.jsx)(J.E5,{children:(0,o.jsxs)(s.x,{flex:{direction:"column"},children:[(0,o.jsx)("div",{style:{whiteSpace:"nowrap",fontWeight:500},children:(0,o.jsx)(F.rU,{to:(0,k.$U)(i,t),children:n})}),x?(0,o.jsx)("div",{style:{maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis"},children:(0,o.jsx)(f.YS,{style:{color:E.$(),whiteSpace:"nowrap"},children:x})}):null]})})})})},ee=(0,I.ZP)(s.x).withConfig({componentId:"sc-6068164d-0"})(VirtualizedGraphTable_templateObject()),en=(0,m.Ps)(VirtualizedGraphTable_templateObject1()),et=t(35157);function WorkspaceGraphsRoot_templateObject(){var e=(0,p._)(["\n  query WorkspaceGraphsQuery($selector: RepositorySelector!) {\n    repositoryOrError(repositorySelector: $selector) {\n      ... on Repository {\n        id\n        usedSolids {\n          definition {\n            ... on CompositeSolidDefinition {\n              id\n              name\n              description\n            }\n          }\n          invocations {\n            pipeline {\n              id\n              name\n            }\n            solidHandle {\n              handleID\n            }\n          }\n        }\n        pipelines {\n          id\n          name\n          isJob\n          graphName\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n"]);return WorkspaceGraphsRoot_templateObject=function(){return e},e}var WorkspaceGraphsRoot=function(e){var n=e.repoAddress;(0,v.Px)();var t=(0,D.Uz)(n);(0,S.j)("Graphs: ".concat(t));var r=(0,B.$)(n),i=(0,d._)((0,K.q)({queryKey:"search",defaults:{search:""}}),2),l=i[0],u=i[1],p=(0,h.a)(er,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0,variables:{selector:r}}),m=p.data,x=p.loading,f=(0,H.C4)(p,H.dT),g=l.trim().toLocaleLowerCase(),j=g.length>0,y=(0,c.useMemo)(function(){var e=null==m?void 0:m.repositoryOrError;if(!e||"Repository"!==e.__typename)return[];var n=Array.from(new Set(e.pipelines.filter(function(e){return e.isJob&&!(0,et.pv)(e.name)}).map(function(e){return e.graphName}))).map(function(e){return{name:e,path:"/graphs/".concat(e),description:null}});return e.usedSolids.forEach(function(e){if("CompositeSolidDefinition"===e.definition.__typename){var t=e.invocations[0];t&&n.push({name:e.definition.name,path:"/graphs/".concat(t.pipeline.name,"/").concat(t.solidHandle.handleID,"/"),description:e.definition.description})}}),n.sort(function(e,n){return e.name.localeCompare(n.name)})},[m]),b=(0,c.useMemo)(function(){var e=g.toLocaleLowerCase();return y.filter(function(n){return n.name.toLocaleLowerCase().includes(e)})},[y,g]);return(0,o.jsxs)(s.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,o.jsx)(W.h,{repoAddress:n,tab:"graphs",refreshState:f,queryData:p}),(0,o.jsx)(s.x,{padding:{horizontal:24,vertical:16},children:(0,o.jsx)(C.oi,{icon:"search",value:l,onChange:function(e){return u(e.target.value)},placeholder:"Filter by graph name…",style:{width:"340px"}})}),x&&!m?(0,o.jsx)(s.x,{padding:64,children:(0,o.jsx)(P.$,{purpose:"page"})}):x&&!m?(0,o.jsx)(s.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,o.jsxs)(s.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,o.jsx)(P.$,{purpose:"body-text"}),(0,o.jsx)("div",{style:{color:E.$()},children:"Loading graphs…"})]})}):b.length?(0,o.jsx)(VirtualizedGraphTable,{repoAddress:n,graphs:b}):j?(0,o.jsx)(s.x,{padding:{top:20},children:(0,o.jsx)(a.t,{icon:"search",title:"No matching graphs",description:(0,o.jsxs)("div",{children:["No graphs matching ",(0,o.jsx)("strong",{children:l})," were found in ",t]})})}):(0,o.jsx)(s.x,{padding:{top:20},children:(0,o.jsx)(a.t,{icon:"search",title:"No graphs",description:"No graphs were found in ".concat(t)})})]})},er=(0,m.Ps)(WorkspaceGraphsRoot_templateObject(),j.B),ei=t(9901),VirtualizedJobTable=function(e){var n=e.repoAddress,t=e.jobs,r=(0,c.useRef)(null),i=(0,T.MG)({count:t.length,getScrollElement:function(){return r.current},estimateSize:function(){return 64},overscan:10}),s=i.getTotalSize(),a=i.getVirtualItems();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(ei.I,{}),(0,o.jsx)("div",{style:{overflow:"hidden"},children:(0,o.jsx)(J.W2,{ref:r,children:(0,o.jsx)(J.Nh,{$totalHeight:s,children:a.map(function(e){var r=e.index,i=e.key,s=e.size,a=e.start,l=t[r];return(0,o.jsx)(ei.b,{name:l.name,isJob:l.isJob,repoAddress:n,height:s,start:a},i)})})})})]})},eo=t(83568);function WorkspaceJobsRoot_templateObject(){var e=(0,p._)(["\n  query WorkspaceJobsQuery($selector: RepositorySelector!) {\n    repositoryOrError(repositorySelector: $selector) {\n      ... on Repository {\n        id\n        name\n        pipelines {\n          id\n          name\n          isJob\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n"]);return WorkspaceJobsRoot_templateObject=function(){return e},e}var WorkspaceJobsRoot=function(e){var n=e.repoAddress,t=(0,eo.t)("WorkspaceJobsRoot");(0,v.Px)();var r=(0,D.Uz)(n);(0,S.j)("Jobs: ".concat(r));var i=(0,B.$)(n),l=(0,d._)((0,K.q)({queryKey:"search",defaults:{search:""}}),2),u=l[0],p=l[1],m=(0,h.a)(es,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0,variables:{selector:i}}),x=m.data,f=m.loading;(0,c.useLayoutEffect)(function(){f||t.endTrace()},[f,t]);var g=(0,H.C4)(m,H.dT),j=u.trim().toLocaleLowerCase(),y=j.length>0,b=(0,c.useMemo)(function(){return(null==x?void 0:x.repositoryOrError.__typename)==="Repository"?x.repositoryOrError.pipelines:[]},[x]),_=(0,c.useMemo)(function(){var e=j.toLocaleLowerCase();return b.filter(function(n){var t=n.name;return!(0,et.pv)(t)&&t.toLocaleLowerCase().includes(e)})},[b,j]);return(0,o.jsxs)(s.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,o.jsx)(W.h,{repoAddress:n,tab:"jobs",refreshState:g,queryData:m}),(0,o.jsx)(s.x,{padding:{horizontal:24,vertical:16},children:(0,o.jsx)(C.oi,{icon:"search",value:u,onChange:function(e){return p(e.target.value)},placeholder:"Filter by job name…",style:{width:"340px"}})}),f&&!x?(0,o.jsx)(s.x,{padding:64,children:(0,o.jsx)(P.$,{purpose:"page"})}):f&&!x?(0,o.jsx)(s.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,o.jsxs)(s.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,o.jsx)(P.$,{purpose:"body-text"}),(0,o.jsx)("div",{style:{color:E.$()},children:"Loading jobs…"})]})}):_.length?(0,o.jsx)(VirtualizedJobTable,{repoAddress:n,jobs:_}):y?(0,o.jsx)(s.x,{padding:{top:20},children:(0,o.jsx)(a.t,{icon:"search",title:"No matching jobs",description:(0,o.jsxs)("div",{children:["No jobs matching ",(0,o.jsx)("strong",{children:u})," were found in ",r]})})}):(0,o.jsx)(s.x,{padding:{top:20},children:(0,o.jsx)(a.t,{icon:"search",title:"No jobs",description:"No jobs were found in ".concat(r)})})]})},es=(0,m.Ps)(WorkspaceJobsRoot_templateObject(),j.B),ea=t(85333),el=t(6692),ec=t(82361),eu=t(21221),ed=t(10735),ep=t(19126),eh=t.n(ep),em=t(41061),ex=t(87763),ef=t(33161);function OpCard_templateObject(){var e=(0,p._)(["\n  fragment OpCardSolidDefinitionFragment on ISolidDefinition {\n    name\n    description\n    metadata {\n      key\n      value\n    }\n    inputDefinitions {\n      name\n    }\n    outputDefinitions {\n      name\n    }\n    ...OpNodeDefinitionFragment\n  }\n\n  ","\n"]);return OpCard_templateObject=function(){return e},e}function OpCard_templateObject1(){var e=(0,p._)(["\n  flex: 1;\n  max-width: 450px;\n  position: relative;\n"]);return OpCard_templateObject1=function(){return e},e}var OpCard=function(e){var n=e.definition,t=n.name,r=n.inputDefinitions,i=n.outputDefinitions,a=(0,ef.og)({name:t,inputs:r.map(function(e){return{definition:e,dependsOn:[]}}),outputs:i.map(function(e){return{definition:e,dependedBy:[]}}),definition:{description:null,assetNodes:[]}},{x:0,y:0});return(0,o.jsx)(s.x,{padding:24,children:(0,o.jsx)(ej,{style:{height:a.bounds.height},children:(0,o.jsx)(ex.Un,{invocation:void 0,definition:e.definition,minified:!1,onClick:function(){},onDoubleClick:function(){},onEnterComposite:function(){},onHighlightEdges:function(){},layout:a,selected:!1,focused:!1,highlightedEdges:[],dim:!1})})})},eg=(0,m.Ps)(OpCard_templateObject(),ex.WH),ej=I.ZP.div.withConfig({componentId:"sc-c5eb3a53-0"})(OpCard_templateObject1()),ev=t(65139);function OpDetailsRoot_templateObject(){var e=(0,p._)(["\n  query UsedSolidDetailsQuery($name: String!, $repositorySelector: RepositorySelector!) {\n    repositoryOrError(repositorySelector: $repositorySelector) {\n      ... on Repository {\n        id\n        usedSolid(name: $name) {\n          definition {\n            ...OpCardSolidDefinitionFragment\n            ...SidebarOpDefinitionFragment\n          }\n          invocations {\n            pipeline {\n              id\n              name\n            }\n            solidHandle {\n              handleID\n            }\n          }\n        }\n      }\n    }\n  }\n\n  ","\n  ","\n"]);return OpDetailsRoot_templateObject=function(){return e},e}function OpDetailsRoot_templateObject1(){var e=(0,p._)(["\n  overflow-y: scroll;\n  flex: 1;\n"]);return OpDetailsRoot_templateObject1=function(){return e},e}var UsedSolidDetails=function(e){var n=e.name,t=e.onClickInvocation,r=e.repoAddress,i=(0,B.$)(r),s=(0,h.a)(eS,{variables:{name:n,repositorySelector:i}});return(0,o.jsx)(R.g,{queryResult:s,children:function(e){var n=e.repositoryOrError;if(!((null==n?void 0:n.__typename)==="Repository"&&n.usedSolid))return null;var r=n.usedSolid;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(OpCard,{definition:r.definition}),(0,o.jsx)(ev.I,{definition:r.definition,showingSubgraph:!1,onClickInvocation:t,getInvocations:function(){return r.invocations.map(function(e){return{handleID:e.solidHandle.handleID,pipelineName:e.pipeline.name}})}})]})}})},eS=(0,m.Ps)(OpDetailsRoot_templateObject(),eg,ev.u),ey=I.ZP.div.withConfig({componentId:"sc-9eb4296a-0"})(OpDetailsRoot_templateObject1()),eb=t(89481);function OpsRoot_templateObject(){var e=(0,p._)(["\n  .solids-list:focus {\n    outline: none;\n  }\n"]);return OpsRoot_templateObject=function(){return e},e}function OpsRoot_templateObject1(){var e=(0,p._)(["\n  query OpsRootQuery($repositorySelector: RepositorySelector!) {\n    repositoryOrError(repositorySelector: $repositorySelector) {\n      ... on Repository {\n        id\n        usedSolids {\n          ...OpsRootUsedSolid\n        }\n      }\n    }\n  }\n\n  fragment OpsRootUsedSolid on UsedSolid {\n    definition {\n      name\n      ...OpTypeSignatureFragment\n    }\n    invocations {\n      pipeline {\n        id\n        isJob\n        name\n      }\n    }\n  }\n\n  ","\n"]);return OpsRoot_templateObject1=function(){return e},e}function _templateObject2(){var e=(0,p._)(["\n  align-items: flex-start;\n  background: ",";\n  box-shadow:\n    "," 4px 0 0 inset,\n    "," 0 -1px 0 inset;\n  color: ",";\n  cursor: pointer;\n  font-size: 14px;\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n  padding: 12px 24px;\n  user-select: none;\n"]);return _templateObject2=function(){return e},e}function _templateObject3(){var e=(0,p._)(["\n  flex: 1;\n  font-weight: 600;\n"]);return _templateObject3=function(){return e},e}function _templateObject4(){var e=(0,p._)(["\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n"]);return _templateObject4=function(){return e},e}var e_=em.qj,eO=em.Z8,eR=em.aV;function flatUniq(e){var n={},t=!0,r=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(t=(o=s.next()).done);t=!0){var a=o.value,l=!0,c=!1,u=void 0;try{for(var d,p=a[Symbol.iterator]();!(l=(d=p.next()).done);l=!0)n[d.value]=!0}catch(e){c=!0,u=e}finally{try{l||null==p.return||p.return()}finally{if(c)throw u}}}}catch(e){r=!0,i=e}finally{try{t||null==s.return||s.return()}finally{if(r)throw i}}return Object.keys(n).sort(function(e,n){return e.localeCompare(n)})}var OpsRoot=function(e){(0,v.Px)(),(0,S.j)("Ops");var n=(0,u.UO)().name,t=e.repoAddress,r=(0,B.$)(t),i=(0,h.a)(eA,{variables:{repositorySelector:r}});return(0,o.jsx)("div",{style:{flex:1,minHeight:0},children:(0,o.jsx)(R.g,{queryResult:i,children:function(r){var i=r.repositoryOrError;return(null==i?void 0:i.__typename)==="Repository"&&i.usedSolids?(0,o.jsx)(OpsRootWithData,(0,el._)((0,ea._)({},e),{name:n,repoAddress:t,usedSolids:i.usedSolids})):null}})})},OpsRootWithData=function(e){var n=e.name,t=e.repoAddress,r=e.usedSolids,i=(0,u.k6)(),l=(0,u.TH)(),d=eh().parse(l.search,{ignoreQueryPrefix:!0}),p=d.q,h=d.typeExplorer,m=[{token:"name",values:function(){return r.map(function(e){return e.definition.name})}},{token:"job",values:function(){return flatUniq(r.map(function(e){return e.invocations.filter(function(e){return!e.pipeline.isJob}).map(function(e){return e.pipeline.name})}))}},{token:"pipeline",values:function(){return flatUniq(r.map(function(e){return e.invocations.filter(function(e){return e.pipeline.isJob}).map(function(e){return e.pipeline.name})}))}},{token:"input",values:function(){return flatUniq(r.map(function(e){return e.definition.inputDefinitions.map(function(e){return e.type.displayName})}))}},{token:"output",values:function(){return flatUniq(r.map(function(e){return e.definition.outputDefinitions.map(function(e){return e.type.displayName})}))}}],x=(0,eu.HE)(p||"",m),f=r.filter(function(e){var n=!0,t=!1,r=void 0;try{for(var i,o=x[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var s=function(){var n=i.value;if(("name"===n.token||void 0===n.token)&&!e.definition.name.startsWith(n.value)||("pipeline"===n.token||"job"===n.token)&&!e.invocations.some(function(e){return e.pipeline.name===n.value})||"input"===n.token&&!e.definition.inputDefinitions.some(function(e){return e.type.displayName.startsWith(n.value)})||"output"===n.token&&!e.definition.outputDefinitions.some(function(e){return e.type.displayName.startsWith(n.value)}))return{v:!1}}();if("object"===(0,ec._)(s))return s.v}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}return!0}),g=r.find(function(e){return e.definition.name===n}),onSearch=function(e){i.replace({search:"?".concat(eh().stringify({q:(0,eu.jP)(e)}))})},onClickOp=function(e){i.replace((0,k.$U)(t,"/ops/".concat(e,"?").concat(eh().stringify({q:p}))))};c.useEffect(function(){1!==f.length||g&&f[0]===g||onClickOp(f[0].definition.name),"string"==typeof h&&onSearch((0,N._)(x).concat([{token:"input",value:h}]))});var j=c.useCallback(function(e){var n=e.pipelineName,r=e.handleID;i.push((0,k.$U)(t,"/pipeline_or_job/".concat(n,"/").concat(r.split(".").join("/"))))},[i,t]);return(0,o.jsx)("div",{style:{height:"100%",display:"flex"},children:(0,o.jsx)(ed.O,{identifier:"ops",firstInitialPercent:40,firstMinSize:420,first:(0,o.jsxs)(eC,{children:[(0,o.jsx)(s.x,{padding:{vertical:12,horizontal:24},border:"bottom",children:(0,o.jsx)(eu.Gf,{values:x,onChange:function(e){return onSearch(e)},suggestionProviders:m,placeholder:"Filter by name or input/output type..."})}),(0,o.jsx)("div",{style:{flex:1},children:(0,o.jsx)(e_,{nonce:window.__webpack_nonce__,children:function(e){var n=e.height,t=e.width;return(0,o.jsx)(OpList,{height:n,width:t,selected:g,onClickOp:onClickOp,items:f.sort(function(e,n){return e.definition.name.localeCompare(n.definition.name)})})}})})]}),second:g?(0,o.jsx)(ey,{children:(0,o.jsx)(UsedSolidDetails,{name:g.definition.name,onClickInvocation:j,repoAddress:t})}):(0,o.jsx)(s.x,{padding:{vertical:64},children:(0,o.jsx)(a.t,{icon:"no-results",title:"No op selected",description:"Select an op to see its definition and invocations"})})})})},OpList=function(e){var n=e.items,t=e.selected,r=c.useRef(new em.t1({defaultHeight:60,fixedWidth:!0})),i=c.useRef(e.width);e.width!==i.current&&(r.current.clearAll(),i.current=e.width);var s=t?n.findIndex(function(e){return e===t}):void 0;return(0,o.jsx)(ek,{children:(0,o.jsx)(eR,{width:e.width,height:e.height,rowCount:e.items.length,rowHeight:r.current.rowHeight,scrollToIndex:s,className:"solids-list",rowRenderer:function(n){var t=n.parent,i=n.index,s=n.key,a=n.style,l=e.items[i];return(0,o.jsx)(eO,{cache:r.current,index:i,parent:t,children:(0,o.jsxs)(eP,{style:a,$selected:l===e.selected,onClick:function(){return e.onClickOp(l.definition.name)},children:[(0,o.jsx)(eE,{children:l.definition.name}),(0,o.jsx)("div",{children:(0,o.jsx)(eb.z,{definition:l.definition})})]})},s)},overscanRowCount:10})})},ek=I.ZP.div.withConfig({componentId:"sc-d7e8bfec-0"})(OpsRoot_templateObject()),eA=(0,m.Ps)(OpsRoot_templateObject1(),eb.C),eP=I.ZP.div.withConfig({componentId:"sc-d7e8bfec-1"})(_templateObject2(),function(e){return e.$selected?E.fk():E.v8()},function(e){return e.$selected?E.yM():"transparent"},E.wL(),function(e){return e.$selected?E.Ep():E.$()}),eE=I.ZP.div.withConfig({componentId:"sc-d7e8bfec-2"})(_templateObject3()),eC=I.ZP.div.withConfig({componentId:"sc-d7e8bfec-3"})(_templateObject4()),WorkspaceOpsRoot=function(e){var n=e.repoAddress;(0,v.Px)();var t=(0,D.Uz)(n);return(0,S.j)("Ops: ".concat(t)),(0,o.jsxs)(s.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,o.jsx)(W.h,{repoAddress:n,tab:"ops"}),(0,o.jsx)(OpsRoot,{repoAddress:n})]})},eN=t(43180),ew=t(72349),eT=t(157),VirtualizedScheduleTable=function(e){var n=e.repoAddress,t=e.schedules,r=e.headerCheckbox,i=e.checkedKeys,s=e.onToggleCheckFactory,a=c.useRef(null),l=(0,T.MG)({count:t.length,getScrollElement:function(){return a.current},estimateSize:function(){return 64},overscan:10}),u=l.getTotalSize(),d=l.getVirtualItems();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(ew.o,{checkbox:r}),(0,o.jsx)("div",{style:{overflow:"hidden"},children:(0,o.jsx)(J.W2,{ref:a,children:(0,o.jsx)(J.Nh,{$totalHeight:u,children:d.map(function(e){var a=e.index,l=e.key,c=e.size,u=e.start,d=t[a],p=(0,eT.g)(n,d.name);return(0,o.jsx)(ew.i,{name:d.name,repoAddress:n,scheduleState:d.scheduleState,checked:i.has(p),showCheckboxColumn:!!r,onToggleChecked:s(p),height:c,start:u},l)})})})})]})},eF=t(73689),eI=t(30894),e$=t(72855),eD=t(24808),ez=t(30682),eL=t(77376),eU=t(8223);function WorkspaceSchedulesRoot_templateObject(){var e=(0,p._)(["\n  query WorkspaceSchedulesQuery($selector: RepositorySelector!) {\n    repositoryOrError(repositorySelector: $selector) {\n      ... on Repository {\n        id\n        name\n        schedules {\n          id\n          name\n          description\n          scheduleState {\n            id\n            ...BasicInstigationStateFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"]);return WorkspaceSchedulesRoot_templateObject=function(){return e},e}var WorkspaceSchedulesRoot=function(e){var n=e.repoAddress;(0,v.Px)();var t=(0,D.Uz)(n);(0,S.j)("Schedules: ".concat(t));var r=(0,B.$)(n),i=(0,d._)((0,K.q)({queryKey:"search",defaults:{search:""}}),2),l=i[0],u=i[1],p=(0,eU.g)(),m=(0,c.useMemo)(function(){return[p]},[p]),x=(0,eL.m)({filters:m}),f=x.button,g=x.activeFiltersJsx,j=(0,h.a)(eJ,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0,variables:{selector:r}}),y=j.data,b=j.loading,_=(0,H.C4)(j,H.dT),O=l.trim().toLocaleLowerCase(),R=O.length>0,k=(0,c.useMemo)(function(){return(null==y?void 0:y.repositoryOrError.__typename)==="Repository"?y.repositoryOrError.schedules:[]},[y]),A=p.state,N=(0,c.useMemo)(function(){return A.size?k.filter(function(e){var n=e.scheduleState;return A.has(n.status)}):k},[k,A]),w=(0,c.useMemo)(function(){var e=O.toLocaleLowerCase();return N.filter(function(n){return n.name.toLocaleLowerCase().includes(e)})},[N,O]),T=w.length>0,F=(0,c.useMemo)(function(){return w.filter(function(e){var n=e.scheduleState;return(0,eI.i)(n)})},[w]),I=(0,c.useMemo)(function(){return F.map(function(e){var t=e.name;return(0,eT.g)(n,t)})},[F,n]),$=(0,d._)((0,eF.a)(I),2),z=$[0].checkedIds,L=$[1],U=L.onToggleFactory,J=L.onToggleAll,M=(0,c.useMemo)(function(){return F.filter(function(e){var t=e.name;return z.has((0,eT.g)(n,t))}).map(function(e){return{repoAddress:n,scheduleName:e.name,scheduleState:e.scheduleState}})},[F,z,n]),q=I.length,V=z.size,G=I.length>0;return(0,o.jsxs)(s.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,o.jsx)(W.h,{repoAddress:n,tab:"schedules",refreshState:_,queryData:j}),(0,o.jsxs)(s.x,{padding:{horizontal:24,vertical:16},flex:{justifyContent:"space-between"},children:[(0,o.jsxs)(s.x,{flex:{direction:"row",gap:12},children:[f,(0,o.jsx)(C.oi,{icon:"search",value:l,onChange:function(e){u(e.target.value),J(!1)},placeholder:"Filter by schedule name…",style:{width:"340px"}})]}),(0,o.jsx)(eN.u,{content:"You do not have permission to start or stop these schedules",canShow:T&&!G,placement:"top-end",useDisabledButtonTooltipFix:!0,children:(0,o.jsx)(eD._,{schedules:M,onDone:function(){return _.refetch()}})})]}),g.length?(0,o.jsx)(s.x,{padding:{vertical:8,horizontal:24},border:"top-and-bottom",flex:{direction:"row",gap:8},children:g}):null,b&&!y?(0,o.jsx)(s.x,{padding:64,children:(0,o.jsx)(P.$,{purpose:"page"})}):b&&!y?(0,o.jsx)(s.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,o.jsxs)(s.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,o.jsx)(P.$,{purpose:"body-text"}),(0,o.jsx)("div",{style:{color:E.$()},children:"Loading schedules…"})]})}):w.length?(0,o.jsx)(VirtualizedScheduleTable,{repoAddress:n,schedules:w,headerCheckbox:G?(0,o.jsx)(ez.W,{checkedCount:V,totalCount:q,onToggleAll:J}):void 0,checkedKeys:z,onToggleCheckFactory:U}):R?(0,o.jsx)(s.x,{padding:{top:20},children:(0,o.jsx)(a.t,{icon:"search",title:"No matching schedules",description:(0,o.jsxs)("div",{children:["No schedules matching ",(0,o.jsx)("strong",{children:l})," were found in ",t]})})}):(0,o.jsx)(s.x,{padding:{top:20},children:(0,o.jsx)(a.t,{icon:"search",title:"No schedules",description:"No schedules were found in ".concat(t)})})]})},eJ=(0,m.Ps)(WorkspaceSchedulesRoot_templateObject(),e$.i,j.B),eM=t(16592),eq=t(22478),VirtualizedSensorTable=function(e){var n=e.repoAddress,t=e.sensors,r=e.headerCheckbox,i=e.checkedKeys,s=e.onToggleCheckFactory,a=c.useRef(null),l=(0,T.MG)({count:t.length,getScrollElement:function(){return a.current},estimateSize:function(){return 64},overscan:10}),u=l.getTotalSize(),d=l.getVirtualItems();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(eM.K,{checkbox:r}),(0,o.jsx)("div",{style:{overflow:"hidden"},children:(0,o.jsx)(J.W2,{ref:a,children:(0,o.jsx)(J.Nh,{$totalHeight:u,children:d.map(function(e){var a=e.index,l=e.key,c=e.size,u=e.start,d=t[a],p=(0,eq.x)(n,d.name);return(0,o.jsx)(eM.R,{name:d.name,repoAddress:n,sensorState:d.sensorState,checked:i.has(p),showCheckboxColumn:!!r,onToggleChecked:s(p),height:c,start:u},l)})})})})]})},eV=t(67802);function WorkspaceSensorsRoot_templateObject(){var e=(0,p._)(["\n  query WorkspaceSensorsQuery($selector: RepositorySelector!) {\n    repositoryOrError(repositorySelector: $selector) {\n      ... on Repository {\n        id\n        name\n        sensors {\n          id\n          name\n          description\n          sensorState {\n            id\n            ...BasicInstigationStateFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"]);return WorkspaceSensorsRoot_templateObject=function(){return e},e}var WorkspaceSensorsRoot=function(e){var n=e.repoAddress;(0,v.Px)();var t=(0,D.Uz)(n);(0,S.j)("Sensors: ".concat(t));var r=(0,B.$)(n),i=(0,d._)((0,K.q)({queryKey:"search",defaults:{search:""}}),2),l=i[0],u=i[1],p=(0,eU.g)(),m=(0,c.useMemo)(function(){return[p]},[p]),x=(0,eL.m)({filters:m}),f=x.button,g=x.activeFiltersJsx,j=(0,h.a)(eW,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0,variables:{selector:r}}),y=j.data,b=j.loading,_=(0,H.C4)(j,H.dT),O=l.trim().toLocaleLowerCase(),R=O.length>0,k=(0,c.useMemo)(function(){return(null==y?void 0:y.repositoryOrError.__typename)==="Repository"?y.repositoryOrError.sensors:[]},[y]),A=p.state,N=(0,c.useMemo)(function(){return A.size?k.filter(function(e){var n=e.sensorState;return A.has(n.status)}):k},[k,A]),w=(0,c.useMemo)(function(){var e=O.toLocaleLowerCase();return N.filter(function(n){return n.name.toLocaleLowerCase().includes(e)})},[N,O]),T=w.length>0,F=(0,c.useMemo)(function(){return w.filter(function(e){var n=e.sensorState;return(0,eI.i)(n)})},[w]),I=(0,c.useMemo)(function(){return F.map(function(e){var t=e.name;return(0,eq.x)(n,t)})},[F,n]),$=(0,d._)((0,eF.a)(I),2),z=$[0].checkedIds,L=$[1],U=L.onToggleFactory,J=L.onToggleAll,M=(0,c.useMemo)(function(){return F.filter(function(e){var t=e.name;return z.has((0,eq.x)(n,t))}).map(function(e){return{repoAddress:n,sensorName:e.name,sensorState:e.sensorState}})},[F,z,n]),q=I.length,V=z.size,G=I.length>0;return(0,o.jsxs)(s.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,o.jsx)(W.h,{repoAddress:n,tab:"sensors",refreshState:_,queryData:j}),(0,o.jsxs)(s.x,{padding:{horizontal:24,vertical:16},flex:{justifyContent:"space-between"},children:[(0,o.jsxs)(s.x,{flex:{direction:"row",gap:12},children:[f,(0,o.jsx)(C.oi,{icon:"search",value:l,onChange:function(e){return u(e.target.value)},placeholder:"Filter by sensor name…",style:{width:"340px"}})]}),(0,o.jsx)(eN.u,{content:"You do not have permission to start or stop these sensors",canShow:T&&!G,placement:"top-end",useDisabledButtonTooltipFix:!0,children:(0,o.jsx)(eV.b,{sensors:M,onDone:function(){return _.refetch()}})})]}),g.length?(0,o.jsx)(s.x,{padding:{vertical:8,horizontal:24},border:"top-and-bottom",flex:{direction:"row",gap:8},children:g}):null,b&&!y?(0,o.jsx)(s.x,{padding:64,children:(0,o.jsx)(P.$,{purpose:"page"})}):b&&!y?(0,o.jsx)(s.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,o.jsxs)(s.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,o.jsx)(P.$,{purpose:"body-text"}),(0,o.jsx)("div",{style:{color:E.$()},children:"Loading sensors…"})]})}):w.length?(0,o.jsx)(VirtualizedSensorTable,{repoAddress:n,sensors:w,headerCheckbox:G?(0,o.jsx)(ez.W,{checkedCount:V,totalCount:q,onToggleAll:J}):void 0,checkedKeys:z,onToggleCheckFactory:U}):R?(0,o.jsx)(s.x,{padding:{top:20},children:(0,o.jsx)(a.t,{icon:"search",title:"No matching sensors",description:(0,o.jsxs)("div",{children:["No sensors matching ",(0,o.jsx)("strong",{children:l})," were found in ",t]})})}):(0,o.jsx)(s.x,{padding:{top:20},children:(0,o.jsx)(a.t,{icon:"search",title:"No sensors",description:"No sensors were found in ".concat(t)})})]})},eW=(0,m.Ps)(WorkspaceSensorsRoot_templateObject(),e$.i,j.B),eB=t(31197),eH=t(28888),eG=t(56024),eK=t(41222),eQ=t(65885),eZ=t(87631),eY=t(36495),eX=t(74711),e0=t(47888),e1=t(40049),e2=t(39852);function AssetGroupRoot_templateObject(){var e=(0,p._)(["\n  query AssetGroupMetadataQuery($selector: AssetGroupSelector!) {\n    assetNodes(group: $selector) {\n      id\n      autoMaterializePolicy {\n        policyType\n      }\n    }\n  }\n"]);return AssetGroupRoot_templateObject=function(){return e},e}var AssetGroupRoot=function(e){var n=e.repoAddress,t=e.tab;(0,v.Px)();var r=(0,u.UO)(),i=r.groupName,a=r[0],l=(0,u.k6)();(0,S.j)("Asset Group: ".concat(i));var d=(0,k.$U)(n,"/asset-groups/".concat(i)),p=(0,c.useMemo)(function(){return{groupName:i,repositoryLocationName:n.location,repositoryName:n.name}},[i,n]),h=(0,c.useCallback)(function(e,n){l[n]("".concat(d,"/").concat((0,O.gY)(e)))},[d,l]),m=(0,c.useCallback)(function(e){e.groupName&&e.repoAddress?l.push((0,k.$U)(e.repoAddress,"/asset-groups/".concat(e.groupName,"/lineage/").concat(e.assetKey.path.map(encodeURIComponent).join("/")))):l.push((0,eX.p)(e.assetKey,{view:"definition"}))},[l]);return(0,o.jsxs)(eH.T,{style:{display:"flex",flexDirection:"column",paddingBottom:0},children:[(0,o.jsx)(x.m,{title:(0,o.jsx)(f.X6,{children:i}),right:(0,o.jsx)(e2.i,{label:"Reload definitions"}),tags:(0,o.jsx)(AssetGroupTags,{groupSelector:p,repoAddress:n}),tabs:(0,o.jsxs)(s.x,{flex:{direction:"row",justifyContent:"space-between",alignItems:"center"},margin:{right:4},children:[(0,o.jsxs)(eG.mQ,{selectedTabId:t,children:[(0,o.jsx)(e1.f,{id:"lineage",title:"Lineage",to:"".concat(d,"/lineage")}),(0,o.jsx)(e1.f,{id:"list",title:"List",to:"".concat(d,"/list")})]}),(0,o.jsx)(eK.w,{})]})}),"lineage"===t?(0,o.jsx)(e0.OK,{fetchOptions:{groupSelector:p},options:{preferAssetRendering:!0,explodeComposites:!0},explorerPath:(0,O.p3)(a||"lineage/"),onChangeExplorerPath:h,onNavigateToSourceAssetNode:m}):(0,o.jsx)(eQ.fv,{groupSelector:p,prefixPath:a.split("/").map(decodeURIComponent).filter(Boolean),setPrefixPath:function(e){return l.push("".concat(d,"/list/").concat(e.map(encodeURIComponent).join("/")))}})]})},e4=(0,m.Ps)(AssetGroupRoot_templateObject()),AssetGroupTags=function(e){var n,t=e.repoAddress,r=e.groupSelector,i=(0,eY.e)(),s=(0,h.a)(e4,{variables:{selector:r}}).data;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(g.V,{icon:"asset_group",children:["Asset Group in ",(0,o.jsx)(y.b,{repoAddress:t})]}),(n=null==s?void 0:s.assetNodes)&&0!==n.length&&"has-global-amp"===i&&n.some(function(e){return!!e.autoMaterializePolicy})?(0,o.jsx)(eZ.m,{}):null]})},e8=t(16057),PipelineOrJobDisambiguationRoot=function(e){var n=e.repoAddress,t=(0,u.TH)(),r=(0,u.UO)().pipelinePath,i=(0,O.p3)(r).pipelineName,s=(0,Z.Ux)(n),a=(0,Z.E8)(s,i),l=t.pathname,c=t.search,d=l.replace("/pipeline_or_job/",a?"/jobs/":"/pipelines/");return(0,o.jsx)(u.l_,{to:"".concat(d).concat(c)})},e3=t(29211),e6=t(1222),e5=t(37563),e7=t(25545),e9=t(78567),ne=t(54949),nn=t(14388);function LaunchpadSetupFromRunRoot_templateObject(){var e=(0,p._)(["\n  query ConfigForRunQuery($runId: ID!) {\n    runOrError(runId: $runId) {\n      ... on Run {\n        id\n        mode\n        runConfigYaml\n        solidSelection\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n"]);return LaunchpadSetupFromRunRoot_templateObject=function(){return e},e}var LaunchpadSetupFromRunRoot=function(e){var n=e.repoAddress,t=(0,ne.xz)(n.location).permissions.canLaunchPipelineExecution,r=(0,u.UO)(),i=r.repoPath,s=r.pipelinePath,a=r.runId;return t?(0,o.jsx)(LaunchpadSetupFromRunAllowedRoot,{pipelinePath:s,repoAddress:n,runId:a}):(0,o.jsx)(u.l_,{to:"/locations/".concat(i,"/pipeline_or_job/").concat(s)})},LaunchpadSetupFromRunAllowedRoot=function(e){var n=e.pipelinePath,t=e.repoAddress,r=e.runId,i=(0,O.p3)(n),s=i.pipelineName,a=(0,Z.Ux)(t),l=(0,Z.E8)(a,s);(0,nn.b)(i,l);var p=(0,d._)((0,e9.aC)(t,s),2),m=p[0],x=p[1],f=(0,h.a)(nt,{variables:{runId:r}}),g=f.data,j=f.loading,v=null==g?void 0:g.runOrError,S=(null==v?void 0:v.__typename)==="Run"?v:null;return((0,c.useEffect)(function(){if(S){var e=S.runConfigYaml,n=S.mode,t=S.solidSelection;if(e||n||t){var r={name:"From run ".concat(S.id.slice(0,8))};"string"==typeof e&&(r.runConfigYaml=e),"string"==typeof n&&(r.mode=n),t instanceof Array&&t.length>0?r.solidSelection=t:"string"==typeof t&&t&&(r.solidSelection=[t]),x(function(e){return(0,e9.f0)(e,r)})}}},[S,m,x]),j)?(0,o.jsx)(e7.m,{}):v&&"RunNotFoundError"!==v.__typename?"PythonError"===v.__typename?(0,o.jsx)(e5.U,{icon:"error",title:"Python error",description:v.message}):(0,o.jsx)(u.l_,{to:{pathname:(0,k.$U)(t,"/".concat(l?"jobs":"pipelines","/").concat(s,"/playground"))}}):(0,o.jsx)(e5.U,{icon:"error",title:"No run found",description:"The run with this ID does not exist or has been cleaned up."})},nt=(0,m.Ps)(LaunchpadSetupFromRunRoot_templateObject(),j.B),LaunchpadSetupRoot=function(e){var n=e.repoAddress,t=(0,ne.xz)(n.location).permissions.canLaunchPipelineExecution,r=(0,u.UO)(),i=r.repoPath,s=r.pipelinePath;return t?(0,o.jsx)(LaunchpadSetupAllowedRoot,{pipelinePath:s,repoAddress:n}):(0,o.jsx)(u.l_,{to:"/locations/".concat(i,"/pipeline_or_job/").concat(s)})},LaunchpadSetupAllowedRoot=function(e){var n=e.pipelinePath,t=e.repoAddress,r=(0,O.p3)(n),i=r.pipelineName,s=(0,Z.Ux)(t),a=(0,Z.E8)(s,i);(0,nn.b)(r,a);var l=(0,d._)((0,e9.aC)(t,i),2),p=(l[0],l[1]),h=eh().parse(window.location.search,{ignoreQueryPrefix:!0});return(0,c.useEffect)(function(){if(h.config||h.mode||h.solidSelection||h.tags||h.assetSelection){var e={};"string"==typeof h.config&&(e.runConfigYaml=h.config),"string"==typeof h.mode&&(e.mode=h.mode),h.solidSelection instanceof Array&&h.solidSelection.length>0?e.solidSelection=h.solidSelection:"string"==typeof h.solidSelection&&h.solidSelection&&(e.solidSelection=[h.solidSelection]),"string"==typeof h.solidSelectionQuery&&(e.solidSelectionQuery=h.solidSelectionQuery),Array.isArray(h.tags)&&(e.tags=h.tags),Array.isArray(h.assetSelection)&&(e.assetSelection=h.assetSelection),p(function(n){return(0,e9.f0)(n,e)})}}),(0,o.jsx)(u.l_,{to:{pathname:(0,k.$U)(t,"/".concat(a?"jobs":"pipelines","/").concat(i,"/playground"))}})},nr=t(12084),ni=t(10952),no=t(9001),ns=t(75652),na=t.n(ns),nl=t(95223),nc=t(61935),nu=t(21485),nd=t(84495),np=t(76487),nh=t(38917),nm=t(30301);function LatestRunTag_templateObject(){var e=(0,p._)(["\n  query LatestRunTagQuery($runsFilter: RunsFilter) {\n    pipelineRunsOrError(filter: $runsFilter, limit: 1) {\n      ... on Runs {\n        results {\n          id\n          status\n          ...RunTimeFragment\n        }\n      }\n    }\n  }\n\n  ","\n"]);return LatestRunTag_templateObject=function(){return e},e}var nx={showSeconds:!0,showTimezone:!1},LatestRunTag=function(e){var n=e.pipelineName,t=e.repoAddress,r=(0,h.a)(nf,{variables:{runsFilter:{pipelineName:n,tags:[{key:nd.H.RepositoryLabelTag,value:(0,D.Wg)(t)}]}},notifyOnNetworkStatusChange:!0});(0,H.C4)(r,H.dT);var i=(0,c.useMemo)(function(){var e,n=null===(e=r.data)||void 0===e?void 0:e.pipelineRunsOrError;return n&&"Runs"===n.__typename&&n.results[0]||null},[r]);if(!i)return null;var a={start:i.startTime,end:i.endTime,status:i.status};return(0,o.jsx)(g.V,{intent:function(){switch(i.status){case nc.VOA.SUCCESS:return"success";case nc.VOA.CANCELED:case nc.VOA.CANCELING:case nc.VOA.FAILURE:return"danger";default:return"none"}}(),children:(0,o.jsxs)(s.x,{flex:{direction:"row",alignItems:"center",gap:4},children:[(0,o.jsx)(nu.K9,{status:i.status,size:10}),"Latest run:",a?(0,o.jsx)(eN.u,{placement:"bottom",content:(0,o.jsx)(nl.k6,{children:(0,o.jsxs)("tbody",{children:[(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{style:{color:E.Aw()},children:(0,o.jsx)(s.x,{padding:{right:16},children:"Started"})}),(0,o.jsx)("td",{children:a.start?(0,o.jsx)(nm.v,{timestamp:a.start,timeFormat:nx}):(0,np.Z0)(a.status)})]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{style:{color:E.Aw()},children:"Ended"}),(0,o.jsx)("td",{children:a.end?(0,o.jsx)(nm.v,{timestamp:a.end,timeFormat:nx}):(0,np.Z0)(a.status)})]})]})}),children:(0,o.jsx)(F.rU,{to:"/runs/".concat(i.id),children:(0,o.jsx)(nh.Zr,{run:i})})}):null]})})},nf=(0,m.Ps)(LatestRunTag_templateObject(),nh.$X),ng=t(12518),nj=t(66207),nv=t(23054);function JobMetadata_templateObject(){var e=(0,p._)(["\n  query JobMetadataQuery($params: PipelineSelector!, $runsFilter: RunsFilter!) {\n    pipelineOrError(params: $params) {\n      ... on Pipeline {\n        id\n        ...JobMetadataFragment\n      }\n    }\n    assetNodes(pipeline: $params) {\n      id\n      ...JobMetadataAssetNode\n    }\n    pipelineRunsOrError(filter: $runsFilter, limit: 5) {\n      ... on PipelineRuns {\n        results {\n          id\n          ...RunMetadataFragment\n        }\n      }\n    }\n  }\n\n  fragment JobMetadataAssetNode on AssetNode {\n    id\n    autoMaterializePolicy {\n      policyType\n    }\n    assetKey {\n      path\n    }\n  }\n\n  fragment JobMetadataFragment on Pipeline {\n    id\n    isJob\n    name\n    schedules {\n      id\n      mode\n      ...ScheduleSwitchFragment\n    }\n    sensors {\n      id\n      targets {\n        pipelineName\n        mode\n      }\n      ...SensorSwitchFragment\n    }\n  }\n\n  fragment RunMetadataFragment on PipelineRun {\n    id\n    status\n    assets {\n      id\n      key {\n        path\n      }\n    }\n    ...RunTimeFragment\n  }\n\n  ","\n  ","\n  ","\n"]);return JobMetadata_templateObject=function(){return e},e}var JobMetadata=function(e){var n,t=e.pipelineName,r=e.repoAddress,i=(n=(0,h.a)(nS,{variables:{runsFilter:{pipelineName:t,tags:[{key:nd.H.RepositoryLabelTag,value:(0,D.Wg)(r)}]},params:{pipelineName:t,repositoryName:r.name,repositoryLocationName:r.location}}}).data,(0,c.useMemo)(function(){return{assetNodes:(null==n?void 0:n.assetNodes)||null,job:(null==n?void 0:n.pipelineOrError)&&"Pipeline"===n.pipelineOrError.__typename?n.pipelineOrError:null,runsForAssetScan:(null==n?void 0:n.pipelineRunsOrError)&&"Runs"===n.pipelineRunsOrError.__typename?n.pipelineRunsOrError.results:[]}},[n]));return(0,o.jsxs)(o.Fragment,{children:[i.job?(0,o.jsx)(JobScheduleOrSensorTag,{job:i.job,repoAddress:r}):null,(0,o.jsx)(LatestRunTag,{pipelineName:t,repoAddress:r}),i.assetNodes&&i.assetNodes.some(function(e){return!!e.autoMaterializePolicy})&&(0,o.jsx)(eZ.m,{}),i.runsForAssetScan?(0,o.jsx)(RelatedAssetsTag,{relatedAssets:i.assetNodes?i.assetNodes.map(function(e){return(0,et.Je)(e.assetKey)}):na()(i.runsForAssetScan.flatMap(function(e){return e.assets.map(function(e){return(0,et.Je)(e.key)})}))}):null]})},JobScheduleOrSensorTag=function(e){var n=e.job,t=e.repoAddress,r=(0,c.useMemo)(function(){return(null==n?void 0:n.__typename)==="Pipeline"&&n.schedules.length?n.schedules:[]},[n]),i=(0,c.useMemo)(function(){return(null==n?void 0:n.__typename)==="Pipeline"&&n.sensors.length?n.sensors:[]},[n]);return(0,o.jsx)(ng.I,{schedules:r,sensors:i,repoAddress:t})},RelatedAssetsTag=function(e){var n=e.relatedAssets,t=(0,d._)((0,c.useState)(!1),2),r=t[0],i=t[1];if(0===n.length)return null;if(1===n.length){var a=n[0];return(0,o.jsxs)(g.V,{icon:"asset",children:["Asset: ",(0,o.jsx)(F.rU,{to:"/assets/".concat(a),children:a})]})}return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(g.V,{icon:"asset",children:(0,o.jsx)(nr.Z,{color:E.Es(),onClick:function(){return i(!0)},children:"View ".concat(n.length," assets")})}),(0,o.jsxs)(ni.Vq,{title:"Related assets",canOutsideClickClose:!0,canEscapeKeyClose:!0,isOpen:r,onClose:function(){return i(!1)},style:{maxWidth:"80%",minWidth:"500px",width:"auto"},children:[n.map(function(e,t){return(0,o.jsx)(s.x,{padding:{vertical:12,horizontal:20},border:t<n.length-1?"bottom":null,children:(0,o.jsx)(F.rU,{to:"/assets/".concat(e),style:{wordBreak:"break-word"},children:e},e)},e)}),(0,o.jsx)(ni.cN,{topBorder:!0,children:(0,o.jsx)(no.zx,{intent:"primary",onClick:function(){return i(!1)},children:"OK"})})]})]})},nS=(0,m.Ps)(JobMetadata_templateObject(),nj.J,nv.U,nh.$X),ny=t(7575),PipelineNav=function(e){var n=e.repoAddress,t=(0,ne.xz)(n.location),r=(0,c.useContext)(e8.v).tabBuilder,i=(0,u.$B)(["/locations/:repoPath/pipelines/:selector/:tab?","/locations/:repoPath/jobs/:selector/:tab?","/locations/:repoPath/pipeline_or_job/:selector/:tab?"]),a=(0,O.p3)(i.params.selector),l=a.pipelineName,d=a.snapshotId,p=(0,Z.Ux)(n),h=null==p?void 0:p.repository.pipelines.find(function(e){return e.name===l}),m=!!(null==h?void 0:h.isJob),j=r({hasLaunchpad:!(null==h?void 0:h.isAssetJob),hasPartitionSet:((null==p?void 0:p.repository.partitionSets)||[]).some(function(e){return e.pipelineName===l})});return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(x.m,{title:(0,o.jsx)(f.X6,{children:l}),tags:(0,o.jsxs)(s.x,{flex:{direction:"row",alignItems:"center",gap:8,wrap:"wrap"},children:[(0,o.jsxs)(g.V,{icon:"job",children:[m?"Job in ":"Pipeline in ",(0,o.jsx)(y.b,{repoAddress:n})]}),d?null:(0,o.jsx)(JobMetadata,{pipelineName:l,repoAddress:n})]}),tabs:(0,o.jsx)(ny.IJ,{repoAddress:n,isJob:m,explorerPath:a,permissions:t,matchingTab:i.params.tab,tabs:j})})})},nb=t(21106),n_=t(83302),nO=t(94611);function JobBackfillsTable_templateObject(){var e=(0,p._)(["\n  query JobBackfillsQuery(\n    $partitionSetName: String!\n    $repositorySelector: RepositorySelector!\n    $cursor: String\n    $limit: Int\n  ) {\n    partitionSetOrError(\n      repositorySelector: $repositorySelector\n      partitionSetName: $partitionSetName\n    ) {\n      ... on PartitionSet {\n        id\n        pipelineName\n        backfills(cursor: $cursor, limit: $limit) {\n          id\n          ...BackfillTableFragment\n        }\n      }\n    }\n  }\n\n  ","\n"]);return JobBackfillsTable_templateObject=function(){return e},e}var JobBackfillsTable=function(e){var n=e.partitionSetName,t=e.partitionNames,r=e.repositorySelector,i=e.refetchCounter,l=(0,d._)((0,c.useState)(function(){return[]}),2),u=l[0],p=l[1],m=(0,d._)((0,c.useState)(),2),x=m[0],f=m[1],g=(0,h.a)(nR,{variables:{partitionSetName:n,repositorySelector:r,cursor:x,limit:10}}),j=g.refetch;return(0,c.useEffect)(function(){i&&j()},[j,i]),(0,o.jsx)(R.g,{queryResult:g,children:function(e){var n=e.partitionSetOrError;if("PartitionSetNotFoundError"===n.__typename)return(0,o.jsx)(s.x,{margin:{vertical:20},children:(0,o.jsx)(a.t,{title:"Partition set not found.",icon:"no-results"})});if("PythonError"===n.__typename)return(0,o.jsx)(s.x,{margin:{vertical:20},children:(0,o.jsx)(a.t,{title:"An error occurred.",icon:"no-results"})});var r=n.backfills,i=n.pipelineName;if(!r.length)return(0,o.jsx)(s.x,{margin:{vertical:20},children:(0,o.jsx)(a.t,{title:"No backfills for ".concat(i),icon:"no-results"})});var l={hasPrevCursor:!!x,hasNextCursor:r&&10===r.length,popCursor:function(){var e=(0,N._)(u);f(e.pop()),p(e)},advanceCursor:function(){x&&p(function(e){return(0,N._)(e).concat([x])});var e=r&&r[r.length-1].id;e&&f(e)},reset:function(){p([]),f(void 0)}};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(nO.G,{backfills:r,refetch:j,showBackfillTarget:!1,allPartitions:t}),(0,o.jsx)(n_.b$,(0,ea._)({},l))]})}})},nR=(0,m.Ps)(JobBackfillsTable_templateObject(),nO.b),nk=t(81862),nA=t(22970),nP=t(33379),nE=t(82585),nC=t(62311),nN=t(61599),nw=t(87612),nT=t(87424),nF=t(68052),PartitionRunStatusCheckboxes=function(e){var n=e.counts,t=e.value,r=e.onChange,i=e.allowed,a=e.disabled;return(0,o.jsx)(s.x,{flex:{direction:"row",alignItems:"center",gap:12},style:{overflow:"hidden"},children:i.map(function(e){return(0,o.jsx)(nE.X,{"data-testid":(0,nF.N)("run-status-".concat(e,"-checkbox")),disabled:a,style:{marginBottom:0,marginLeft:10,minWidth:200},checked:t.includes(e)&&!a,label:"".concat((0,nT.fi)(e)," (").concat(n[e],")"),onChange:function(){return r(t.includes(e)?t.filter(function(n){return n!==e}):(0,N._)(t).concat([e]))}},e)})})},nI=t(82329),n$=t(311),nD=t(84692),nz=t(18190),nL=t(56101),nU=t(14877),nJ=t(18970),nM=t(20093);function BackfillSelector_templateObject(){var e=(0,p._)(["\n  query BackfillSelectorQuery($pipelineSelector: PipelineSelector!) {\n    pipelineSnapshotOrError(activePipelineSelector: $pipelineSelector) {\n      ... on PipelineSnapshot {\n        id\n        name\n        solidHandles {\n          handleID\n          solid {\n            name\n            definition {\n              name\n            }\n            inputs {\n              dependsOn {\n                solid {\n                  name\n                }\n              }\n            }\n            outputs {\n              dependedBy {\n                solid {\n                  name\n                }\n              }\n            }\n          }\n          ...GraphExplorerSolidHandleFragment\n        }\n      }\n    }\n    instance {\n      id\n      ...UsingDefaultLauncherAlertInstanceFragment\n      ...DaemonNotRunningAlertInstanceFragment\n    }\n  }\n\n  ","\n  ","\n  ","\n"]);return BackfillSelector_templateObject=function(){return e},e}var BackfillPartitionSelector=function(e){var n=e.partitionSetName,t=e.onLaunch,r=e.onCancel,i=e.onSubmit,l=e.repoAddress,p=e.runStatusData,m=e.pipelineName,x=e.partitionNames,f=(0,u.k6)(),g=(0,d._)(c.useState(Object.keys(p).filter(function(e){return!p[e]||p[e]===nc.VOA.FAILURE})),2),j=g[0],v=g[1],S=(0,d._)(c.useState([nc.VOA.NOT_STARTED,nc.VOA.FAILURE]),2),y=S[0],_=S[1],O=c.useMemo(function(){return j.filter(function(e){return y.includes(p[e])})},[j,y,p]),R=(0,d._)(c.useState(!1),2),k=R[0],A=R[1],C=(0,d._)(c.useState([]),2),N=C[0],T=C[1],F=(0,d._)(c.useState(""),2),I=F[0],$=F[1],D=(0,d._)(c.useState({reexecute:!1,fromFailure:!1}),2),z=D[0],L=D[1],U=(0,B.$)(l),J=(0,h.a)(nq,{variables:{pipelineSelector:(0,el._)((0,ea._)({},U),{pipelineName:m})},fetchPolicy:"network-only"}).data,M=c.useRef(!0);if(c.useEffect(function(){return M.current=!0,function(){M.current=!1}},[t]),!J)return(0,o.jsx)(s.x,{margin:{vertical:32},flex:{justifyContent:"center"},children:(0,o.jsx)(P.$,{purpose:"section"})});if("PipelineSnapshot"!==J.pipelineSnapshotOrError.__typename)return(0,o.jsx)(s.x,{margin:20,children:(0,o.jsx)(a.t,{icon:"error",title:"Could not fetch job details"})});var q=J.pipelineSnapshotOrError,V=J.instance,W=(0,b.i)(q.solidHandles).map(function(e){return e.solid}),H=(0,nI.V)(W,I),G=(0,nz.tc)({nodes:H.all,mode:nD.hS.FLAT}).boxes.map(function(e){return{x:e.x,name:e.node.name}}),isFailed=function(e){return p[e]===nc.VOA.FAILURE},K=x.filter(isFailed),Q=function(e){var n=(o={},(0,nw._)(o,nc.VOA.SUCCESS,0),(0,nw._)(o,nc.VOA.NOT_STARTED,0),(0,nw._)(o,nc.VOA.FAILURE,0),(0,nw._)(o,nc.VOA.QUEUED,0),(0,nw._)(o,nc.VOA.STARTED,0),o),t=!0,r=!1,i=void 0;try{for(var o,s,a=e[Symbol.iterator]();!(t=(s=a.next()).done);t=!0){var l=s.value;n[l.state]=(n[l.state]||0)+1}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n}(j.map(function(e){return{partitionKey:e,state:p[e]}}));return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(ni.a7,{children:(0,o.jsxs)(s.x,{flex:{direction:"column",gap:24},children:[(0,o.jsxs)(Section,{title:"Partitions",children:[(0,o.jsx)(s.x,{children:"Select partitions to materialize. Click and drag to select a range on the timeline."}),(0,o.jsx)(nN.x,{selected:j,setSelected:function(e){var n=new Set(e);v(x.filter(function(e){return n.has(e)})),z.fromFailure&&e.filter(function(e){return!isFailed(e)}).length>0&&L((0,el._)((0,ea._)({},z),{fromFailure:!1}))},health:{runStatusForPartitionKey:function(e){return p[e]}},partitionKeys:x,dimensionType:(0,n$.vH)(x[0])?nc.iVC.TIME_WINDOW:nc.iVC.STATIC}),(0,o.jsx)(PartitionRunStatusCheckboxes,{value:y,onChange:_,counts:Q,allowed:z.fromFailure?[nc.VOA.FAILURE]:[nc.VOA.NOT_STARTED,nc.VOA.FAILURE,nc.VOA.QUEUED,nc.VOA.STARTED,nc.VOA.SUCCESS]})]}),K.length?(0,o.jsx)(Section,{title:"Reexecution",children:(0,o.jsx)(nE.X,{checked:z.fromFailure,disabled:!O.every(isFailed),onChange:function(){var e=(0,el._)((0,ea._)({},z),{fromFailure:!z.fromFailure,reexecute:!z.reexecute});e.fromFailure&&_([nc.VOA.FAILURE]),$(""),L(e)},label:(0,o.jsxs)(s.x,{flex:{display:"inline-flex",alignItems:"center"},children:[(0,o.jsx)(s.x,{margin:{right:4},children:"Re-execute from failures"}),(0,o.jsx)(eN.u,{placement:"top",content:"For each partition, if the most recent run failed, launch a re-execution starting from the steps that failed. Only applies for selections of failed partitions.",children:(0,o.jsx)(w.JO,{name:"info",color:E.md()})})]})})}):null,(0,o.jsx)(Section,{title:(0,o.jsxs)(s.x,{flex:{display:"inline-flex",alignItems:"center"},children:[(0,o.jsx)(s.x,{margin:{right:4},children:"Step subset"}),(0,o.jsx)(eN.u,{placement:"top",content:"Applies a step-selection to each run for the requested partitions.",children:(0,o.jsx)(w.JO,{name:"info",color:E.md()})})]}),children:(0,o.jsxs)(s.x,{flex:{direction:"row",alignItems:"center",gap:12},children:[(0,o.jsx)(nM.j,{disabled:z.fromFailure,width:520,items:W,value:I,placeholder:"Type a step subset",onChange:$,autoApplyChanges:!0}),I?(0,o.jsxs)("div",{style:{color:E.$()},children:[G.length," step",1===G.length?"":"s"," selected"]}):null]})}),(0,o.jsxs)(Section,{title:"Tags",children:[(0,o.jsx)(nJ.U,{tagsFromSession:N,onChange:T,open:k,onRequestClose:function(){return A(!1)}}),N.length?(0,o.jsx)("div",{style:{border:"1px solid ".concat(E.im()),borderRadius:8,padding:3},children:(0,o.jsx)(nJ.x,{tagsFromSession:N,onRequestEdit:function(){return A(!0)}})}):(0,o.jsx)("div",{children:(0,o.jsx)(no.zx,{onClick:function(){return A(!0)},children:"Add tags to backfill runs"})})]}),(0,o.jsxs)(s.x,{flex:{direction:"column",gap:16},children:[(0,o.jsx)(nC.So,{instance:V}),(0,o.jsx)(nC.d,{instance:V})]})]})}),(0,o.jsxs)(ni.cN,{children:[(0,o.jsx)(no.zx,{intent:"none",onClick:r,children:"Cancel"}),(0,o.jsx)(LaunchBackfillButton,{partitionNames:O,partitionSetName:n,reexecutionSteps:!z.fromFailure&&H.all.length<W.length?G.map(function(e){return e.name}):void 0,fromFailure:z.fromFailure,tags:N,onSubmit:i,onSuccess:function(e){(0,nC.Xd)(f,e,!1),null==t||t(e,I)},onError:function(e){(0,nC.mv)(e)},repoAddress:l})]})]})},LaunchBackfillButton=function(e){var n,t=e.partitionSetName,r=e.partitionNames,i=e.reexecutionSteps,s=e.fromFailure,a=e.tags,l=e.onSuccess,u=e.onError,p=e.onSubmit,h=e.repoAddress,m=(0,B.$)(h),x=c.useRef(!0),f=(0,d._)((0,nP.D)(nL.f),2),g=f[0],j=f[1].loading;c.useEffect(function(){return x.current=!0,function(){x.current=!1}},[l]);var v=(n=(0,nk._)(function(){var e;return(0,nA.Jh)(this,function(n){switch(n.label){case 0:return p(),[4,g({variables:{backfillParams:{selector:{partitionSetName:t,repositorySelector:m},partitionNames:r,reexecutionSteps:i,fromFailure:s,tags:a}}})];case 1:if(e=n.sent().data,!x.current)return[2];return e&&"LaunchBackfillSuccess"===e.launchPartitionBackfill.__typename?null==l||l(e.launchPartitionBackfill.backfillId,!1):null==u||u(e),[2]}})}),function(){return n.apply(this,arguments)}),S=r.length,y=null==i?void 0:i.length,b=[j?"Submitting ".concat(S," ").concat(1===S?"run":"runs","…"):S?"Submit ".concat(S," ").concat(1===S?"run":"runs"):"Select partitions to submit",!j&&y?"(".concat(y," selected ").concat(1===y?"step":"steps",")"):""].join(" ");return(0,o.jsx)(nU.C,{runCount:S,config:{title:b,icon:"open_in_new",disabled:!S||j,onClick:v}})},nq=(0,m.Ps)(BackfillSelector_templateObject(),_.Q,nC.op,nC.EC),Section=function(e){var n=e.title,t=e.children;return(0,o.jsxs)(s.x,{flex:{direction:"column",gap:4},children:[(0,o.jsx)(f.pm,{children:n}),(0,o.jsx)(s.x,{flex:{direction:"column",gap:8},padding:{top:16},border:"top",children:t})]})},nV=t(343),nW=t(46032);function PartitionGraph_templateObject(){var e=(0,p._)(["\n  display: flex;\n  color: ",";\n  padding: 24px 12px;\n  text-decoration: none;\n"]);return PartitionGraph_templateObject=function(){return e},e}var PartitionGraph=function(e){var n,t,r=e.partitionNames,i=e.jobDataByPartition,s=e.stepDataByPartition,a=e.title,l=e.yLabel,u=e.isJob,p=e.hiddenStepKeys,h=(0,d._)((0,c.useState)(function(){return{}}),2),m=h[0],x=h[1],f=(0,c.useRef)(null),g=(0,c.useCallback)(function(e){var n=f.current;if(n){var t=n.scales["x-axis-0"];if(t){var r=e.offsetX,i=e.offsetY;if("click"===e.type&&r<=n.chartArea.right&&r>=n.chartArea.left&&i<=n.chartArea.bottom&&i>=n.chartArea.top&&e.shiftKey){var o=t.getValueForPixel(r),s=n.data.labels[o];x(function(e){return(0,el._)((0,ea._)({},e),(0,nw._)({},s,!e[s]))})}}}},[]),j=(0,c.useMemo)(function(){return{title:a?{display:!0,text:a}:void 0,animation:!1,scales:l?{y:{id:"y",title:{display:!0,text:l}},x:{id:"x",title:{display:!0,text:a}}}:void 0,plugins:{legend:{display:!1,onClick:function(e,n){}}},onClick:g,maintainAspectRatio:!1}},[g,a,l]),v=(n=[],t={},r.forEach(function(e){var r=!!m[e];i&&n.push({x:e,y:r?void 0:i[e]}),s&&Object.entries(s[e]||{}).forEach(function(n){var i=(0,d._)(n,2),o=i[0],s=i[1];(null==p||!p.includes(o))&&s&&(t[o]=(0,N._)(t[o]||[]).concat([{x:e,y:r?void 0:s}]))})}),Object.keys(t).forEach(function(e){t[e]=_fillPartitions(r,t[e])}),{jobData:n,stepData:t}),S=v.jobData,y=v.stepData,b=u?"Total job":"Total pipeline",_={labels:r,datasets:(0,N._)(!i||p&&p.includes(b)?[]:[{label:b,data:S,borderColor:E.im(),backgroundColor:E.Bj()}]).concat((0,N._)(Object.keys(y).map(function(e){return{label:e,data:y[e],borderColor:(0,nW.kU)(e),backgroundColor:E.Bj()}})))};return(0,o.jsx)(nB,{children:(0,o.jsx)(nV.x1,{data:function(){return _},height:300,options:j,ref:f})})},_fillPartitions=function(e,n){var t={};return n.forEach(function(e){t[e.x]=e.y}),e.map(function(e){return{x:e,y:t[e]}})},nB=I.ZP.div.withConfig({componentId:"sc-d897c5f0-0"})(PartitionGraph_templateObject(),E.$()),nH=t(52246),nG=t(79321),nK=t(6749),nQ=t(6871),nZ=t(56266);function OpJobPartitionsView_templateObject(){var e=(0,p._)(["\n  query PartitionsStatusQuery(\n    $partitionSetName: String!\n    $repositorySelector: RepositorySelector!\n  ) {\n    partitionSetOrError(\n      repositorySelector: $repositorySelector\n      partitionSetName: $partitionSetName\n    ) {\n      ... on PartitionSet {\n        id\n        ...OpJobPartitionSet\n      }\n      ... on PartitionSetNotFoundError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  fragment OpJobPartitionSet on PartitionSet {\n    id\n    name\n    pipelineName\n    partitionsOrError {\n      ... on Partitions {\n        results {\n          name\n        }\n      }\n      ...PythonErrorFragment\n    }\n    partitionStatusesOrError {\n      ... on PartitionStatuses {\n        results {\n          id\n          ...OpJobPartitionStatus\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  fragment OpJobPartitionStatus on PartitionStatus {\n    id\n    partitionName\n    runStatus\n    runDuration\n  }\n\n  ","\n"]);return OpJobPartitionsView_templateObject=function(){return e},e}var OpJobPartitionsView=function(e){var n=e.partitionSetName,t=e.repoAddress,r=(0,B.$)(t),i=(0,h.a)(nY,{variables:{partitionSetName:n,repositorySelector:r}}),l=i.data,c=i.loading;if(!l)return c?(0,o.jsx)(s.x,{padding:32,flex:{direction:"column",alignItems:"center"},children:(0,o.jsxs)(s.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,o.jsx)(P.$,{purpose:"body-text"}),(0,o.jsx)("div",{children:"Loading partitions…"})]})}):(0,o.jsx)(s.x,{padding:32,children:(0,o.jsx)(a.t,{icon:"error",title:"An error occurred",description:"An unexpected error occurred."})});var u=l.partitionSetOrError;if("PartitionSetNotFoundError"===u.__typename)return(0,o.jsx)(s.x,{padding:32,children:(0,o.jsx)(a.t,{icon:"search",title:"Partition set not found",description:u.message})});if("PythonError"===u.__typename)return(0,o.jsx)(s.x,{padding:32,children:(0,o.jsx)(nZ.T9,{error:u})});if("PythonError"===u.partitionsOrError.__typename)return(0,o.jsx)(s.x,{padding:32,children:(0,o.jsx)(nZ.T9,{error:u.partitionsOrError})});var d=u.partitionsOrError.results.map(function(e){return e.name});return(0,o.jsx)(OpJobPartitionsViewContent,{partitionNames:d,partitionSet:u,repoAddress:t})};function usePartitionDurations(e){return(0,c.useMemo)(function(){var n={},t={};return e.forEach(function(e){if(e.runsLoaded&&0!==e.runs.length){var r=e.runs.sort(function(e,n){return e.startTime||0-(n.startTime||0)}),i=r[r.length-1];n[e.name]={},t[e.name]=(null==i?void 0:i.endTime)&&(null==i?void 0:i.startTime)?i.endTime-i.startTime:void 0,i.stepStats.forEach(function(t){n[e.name][t.stepKey]=[t.endTime&&t.startTime?t.endTime-t.startTime:void 0]})}}),{runDurationData:t,stepDurationData:n}},[e])}var OpJobPartitionsViewContent=function(e){var n=e.partitionSet,t=e.partitionNames,r=e.repoAddress,i=(0,ne.xz)(r.location),a=i.permissions.canLaunchPartitionBackfill,l=i.disabledReasons,u=(0,nb.S)(),p=u.viewport,h=u.containerProps,m=(0,d._)((0,c.useState)(60),2),x=m[0],g=m[1],j=(0,d._)((0,c.useState)(0),2),v=j[0],S=j[1],y=(0,d._)((0,c.useState)(!1),2),b=y[0],_=y[1],O=(0,d._)((0,c.useState)(!1),2),R=O[0],k=O[1],A=(0,d._)((0,c.useState)(!1),2),P=A[0],E=A[1],C=(0,B.$)(r),N=(0,d._)((0,c.useState)(0),2),T=N[0],F=N[1],I=(0,nQ.T)({partitionSetName:n.name,partitionTagName:nd.H.Partition,partitionNames:t,pageSize:x,runsFilter:[],repositorySelector:C,jobName:n.pipelineName,offset:v,skipQuery:!b});(0,c.useEffect)(function(){p.width&&!b&&g((0,nG.Rc)(p.width-nK.AQ))},[p.width,b,g]);var $=b?t.slice(Math.max(0,t.length-1-v-x),t.length-v):t,D=usePartitionDurations(I).stepDurationData,z=(0,c.useCallback)(function(){return E(!0)},[]),L=n.partitionStatusesOrError,U=(0,c.useMemo)(function(){return"PartitionStatuses"===L.__typename?L.results:[]},[L]),J=(0,c.useMemo)(function(){var e={},n={};return U.forEach(function(t){e[t.partitionName]=t.runStatus||nc.VOA.NOT_STARTED,$.includes(t.partitionName)&&(n[t.partitionName]=t.runDuration||void 0)}),{runStatusData:e,runDurationData:n}},[U,$]),M=J.runStatusData,q=J.runDurationData,V=(0,c.useMemo)(function(){return{runStatusForPartitionKey:function(e){return M[e]}}},[M]);return(0,o.jsxs)("div",{children:[(0,o.jsx)(ni.Vq,{canEscapeKeyClose:!P,canOutsideClickClose:!P,onClose:function(){return k(!1)},style:{width:800,zIndex:1e3},title:"Launch ".concat(n.pipelineName," backfill"),isOpen:R,children:R&&(0,o.jsx)(BackfillPartitionSelector,{partitionSetName:n.name,partitionNames:t,runStatusData:M,pipelineName:n.pipelineName,onCancel:function(){return k(!1)},onLaunch:function(e,n){F(T+1),k(!1)},onSubmit:z,repoAddress:r})}),(0,o.jsxs)(s.x,{flex:{justifyContent:"space-between",direction:"row",alignItems:"center"},border:"bottom",padding:{vertical:16,horizontal:24},children:[(0,o.jsx)(f.pm,{children:"Status"}),(0,o.jsxs)(s.x,{flex:{gap:8},children:[(0,o.jsx)(no.zx,{onClick:function(){return _(!b)},active:R,children:b?"Hide per-step status":"Show per-step status"}),a?(0,o.jsx)(no.zx,{onClick:function(){return k(!R)},icon:(0,o.jsx)(w.JO,{name:"add_circle"}),active:R,children:"Launch backfill…"}):(0,o.jsx)(eN.u,{content:l.canLaunchPartitionBackfill,children:(0,o.jsx)(no.zx,{icon:(0,o.jsx)(w.JO,{name:"add_circle"}),disabled:!0,children:"Launch backfill…"})})]})]}),(0,o.jsxs)(s.x,{flex:{direction:"row",alignItems:"center"},border:"bottom",padding:{left:8},children:[(0,o.jsx)(CountBox,{count:t.length,label:"Total partitions"}),(0,o.jsx)(CountBox,{count:t.filter(function(e){return M[e]===nc.VOA.FAILURE}).length,label:"Failed partitions"}),(0,o.jsx)(CountBox,{count:t.filter(function(e){return!M[e]||M[e]===nc.VOA.NOT_STARTED}).length,label:"Missing partitions"})]}),(0,o.jsxs)(s.x,{padding:{vertical:16,horizontal:24},children:[(0,o.jsx)("div",(0,el._)((0,ea._)({},h),{children:(0,o.jsx)(nH.b,{partitionNames:t,health:V,selected:b?$:void 0,selectionWindowSize:x,onClick:function(e){var n=t.length-1;S(Math.min(n,Math.max(0,n-t.indexOf(e)-.5*x))),b||_(!0)},tooltipMessage:"Click to view per-step status"})})),b?(0,o.jsx)(s.x,{margin:{top:16},children:(0,o.jsx)(nG.ux,{partitionNames:t,partitions:I,pipelineName:n.pipelineName,repoAddress:r,setPageSize:g,offset:v,setOffset:S})}):null]}),(0,o.jsx)(s.x,{padding:{horizontal:24,vertical:16},border:"top-and-bottom",children:(0,o.jsx)(f.pm,{children:"Run duration"})}),(0,o.jsx)(s.x,{margin:24,children:(0,o.jsx)(PartitionGraph,{isJob:!0,title:"Execution time by partition",yLabel:"Execution time (secs)",partitionNames:b?$:t,jobDataByPartition:q})}),b?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(s.x,{padding:{horizontal:24,vertical:16},children:(0,o.jsx)(f.pm,{children:"Step duration"})}),(0,o.jsx)(s.x,{margin:24,children:(0,o.jsx)(PartitionGraph,{isJob:!0,title:"Execution time by partition",yLabel:"Execution time (secs)",partitionNames:$,stepDataByPartition:D})})]}):null,(0,o.jsx)(s.x,{padding:{horizontal:24,vertical:16},border:"top-and-bottom",style:{marginBottom:-1},children:(0,o.jsx)(f.pm,{children:"Backfill history"})}),(0,o.jsx)(s.x,{margin:{bottom:20},children:(0,o.jsx)(JobBackfillsTable,{partitionSetName:n.name,repositorySelector:C,partitionNames:t,refetchCounter:T})})]})},CountBox=function(e){var n=e.count,t=e.label;return(0,o.jsxs)(s.x,{padding:16,style:{flex:1},border:"right",children:[(0,o.jsx)("div",{style:{fontSize:18,marginBottom:4},children:(0,o.jsx)("strong",{children:n})}),(0,o.jsx)("div",{children:t})]})},nY=(0,m.Ps)(OpJobPartitionsView_templateObject(),j.B),nX=t(49577),n0=t(24601),n1=t(7872),n2=t(185),n4=t(54877),AssetJobPartitionsView=function(e){var n=e.partitionSetName,t=e.repoAddress,r=e.pipelineName,i=(0,nb.S)(),a=i.viewport,l=i.containerProps,u=(0,B.$)(t),p=(0,n0.uc)("*",{pipelineSelector:{pipelineName:r,repositoryName:t.name,repositoryLocationName:t.location}}),h=(0,n4.mR)(p.graphAssetKeys),m=(0,c.useMemo)(function(){var e=(0,n$.$G)(h.filter(function(e){return e.dimensions.length>0})),n=e.dimensions.map(function(e){return{selectedKeys:e.partitionKeys,selectedRanges:[(0,nX.$0)(e)],dimension:e}}),t=(0,n$.ju)(n,function(n){return e.stateForKeyIdx(n).includes(n1.yo.MISSING)});return{merged:e,total:(0,n4.xD)(n),missing:t.length}},[h]),x=m.total,g=m.missing,j=m.merged,v=(0,d._)((0,c.useState)(60),2),S=v[0],y=v[1],b=(0,d._)((0,c.useState)(0),2),_=b[0],O=b[1],R=(0,d._)((0,c.useState)(!1),2),k=R[0],A=R[1];(0,c.useEffect)(function(){a.width&&y((0,nG.Rc)(a.width-nK.AQ))},[a.width,y]);var P=j.dimensions.findIndex(n$.nv);-1===P&&(P=0);var E=j.dimensions[P]?j.dimensions[P]:null,C=(null==E?void 0:E.partitionKeys)||[],N=C.slice(Math.max(0,C.length-1-_-S),C.length-_);return(0,o.jsxs)("div",{children:[(0,o.jsxs)(s.x,{flex:{justifyContent:"space-between",direction:"row",alignItems:"center"},border:"bottom",padding:{vertical:16,horizontal:24},children:[(0,o.jsx)(f.pm,{children:"Status"}),(0,o.jsxs)(s.x,{flex:{gap:8},children:[(0,o.jsx)(no.zx,{onClick:function(){return A(!k)},children:k?"Hide per-asset status":"Show per-asset status"}),(0,o.jsx)(n2.XE,{scope:{all:p.graphQueryItems.map(function(e){return e.node}),skipAllTerm:!0},preferredJobName:r})]})]}),(0,o.jsxs)(s.x,{flex:{direction:"row",alignItems:"center"},border:"bottom",padding:{left:8},children:[(0,o.jsx)(CountBox,{count:x,label:"Total partitions"}),(0,o.jsx)(CountBox,{count:g,label:"Missing partitions"})]}),(0,o.jsxs)(s.x,{padding:{vertical:16,horizontal:24},children:[(0,o.jsx)("div",(0,el._)((0,ea._)({},l),{children:(0,o.jsx)(nH.b,{partitionNames:C,splitPartitions:!!E&&!(0,n$.nv)(E),health:{ranges:j.rangesForSingleDimension(P)},selected:N,selectionWindowSize:S,tooltipMessage:"Click to view per-asset status",onClick:function(e){var n=C.length-1;O(Math.min(n,Math.max(0,n-C.indexOf(e)-.5*S)))}})})),k&&E&&(0,o.jsx)(s.x,{margin:{top:16},children:(0,o.jsx)(nG.ac,{rangeDimensionIdx:P,rangeDimension:E,assetHealth:h,assetQueryItems:p.graphQueryItems,pipelineName:r,setPageSize:y,offset:_,setOffset:O})})]}),k&&(0,o.jsx)(AssetJobPartitionGraphs,{repositorySelector:u,pipelineName:r,partitionSetName:n,multidimensional:((null==j?void 0:j.dimensions.length)||0)>1,dimensionName:E?E.name:null,dimensionKeys:C,selected:N,offset:_,pageSize:S}),(0,o.jsx)(s.x,{padding:{horizontal:24,vertical:16},border:"top-and-bottom",style:{marginBottom:-1},children:(0,o.jsx)(f.pm,{children:"Backfill history"})}),(0,o.jsx)(s.x,{margin:{bottom:20},children:(0,o.jsx)(JobBackfillsTable,{partitionSetName:n,repositorySelector:u,partitionNames:C,refetchCounter:1})})]})},AssetJobPartitionGraphs=function(e){var n=e.repositorySelector,t=e.dimensionKeys,r=e.dimensionName,i=e.selected,a=e.pageSize,l=e.partitionSetName,c=e.multidimensional,u=e.pipelineName,d=e.offset,p=usePartitionDurations((0,nQ.T)({partitionSetName:l,partitionTagName:c?"".concat(nd.H.Partition,"/").concat(r):nd.H.Partition,partitionNames:t,repositorySelector:n,pageSize:a,runsFilter:[],jobName:u,offset:d,skipQuery:!r})),h=p.stepDurationData,m=p.runDurationData;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(s.x,{padding:{horizontal:24,vertical:16},border:"top-and-bottom",children:(0,o.jsx)(f.pm,{children:"Run duration"})}),(0,o.jsx)(s.x,{margin:24,children:(0,o.jsx)(PartitionGraph,{isJob:!0,title:"Execution time by partition",yLabel:"Execution time (secs)",partitionNames:i,jobDataByPartition:m})}),(0,o.jsx)(s.x,{padding:{horizontal:24,vertical:16},border:"top-and-bottom",children:(0,o.jsx)(f.pm,{children:"Step durations"})}),(0,o.jsx)(s.x,{margin:24,children:(0,o.jsx)(PartitionGraph,{isJob:!0,title:"Execution time by partition",yLabel:"Execution time (secs)",partitionNames:i,stepDataByPartition:h})})]})};function usePartitionNameForPipeline_templateObject(){var e=(0,p._)(["\n  query AssetJobPartitionSetsQuery(\n    $pipelineName: String!\n    $repositoryName: String!\n    $repositoryLocationName: String!\n  ) {\n    partitionSetsOrError(\n      pipelineName: $pipelineName\n      repositorySelector: {\n        repositoryName: $repositoryName\n        repositoryLocationName: $repositoryLocationName\n      }\n    ) {\n      ... on PipelineNotFoundError {\n        message\n      }\n      ... on PartitionSets {\n        results {\n          id\n          name\n          mode\n          solidSelection\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n"]);return usePartitionNameForPipeline_templateObject=function(){return e},e}var n8=(0,m.Ps)(usePartitionNameForPipeline_templateObject(),j.B),PipelinePartitionsRoot=function(e){var n,t=e.repoAddress,r=(0,u.UO)(),i=r.pipelinePath,l=(0,O.p3)(i),d=l.pipelineName,p=(0,Z.Ux)(t),m=null==p?void 0:p.repository.pipelines.find(function(e){return e.name===d}),x=!!(null==m?void 0:m.isJob),f=!!(null==m?void 0:m.isAssetJob);(0,nn.b)(l,x),(0,O.Bj)(r);var g=(n=(0,h.a)(n8,{skip:!d,variables:{repositoryLocationName:t.location,repositoryName:t.name,pipelineName:d}}).data,(0,c.useMemo)(function(){return{partitionSet:(null==n?void 0:n.partitionSetsOrError.__typename)==="PartitionSets"?n.partitionSetsOrError.results[0]:void 0,partitionSetError:(null==n?void 0:n.partitionSetsOrError.__typename)==="PipelineNotFoundError"||(null==n?void 0:n.partitionSetsOrError.__typename)==="PythonError"?n.partitionSetsOrError:void 0}},[n])),j=g.partitionSet,v=g.partitionSetError;return j||v?v?(0,o.jsx)(s.x,{padding:{vertical:64},children:(0,o.jsx)(a.t,{icon:"error",title:"Partitions",description:v.message})}):j?f?(0,o.jsx)(AssetJobPartitionsView,{pipelineName:d,partitionSetName:j.name,repoAddress:t}):(0,o.jsx)(OpJobPartitionsView,{partitionSetName:j.name,repoAddress:t}):(0,o.jsx)(s.x,{padding:{vertical:64},children:(0,o.jsx)(a.t,{icon:"error",title:"Partitions",description:(0,o.jsxs)("div",{children:["There are no partition sets defined for ",x?"job":"pipeline"," ",(0,o.jsx)("code",{children:d}),"."]})})}):(0,o.jsx)(R.T,{purpose:"page"})},PipelineRoot=function(e){var n=e.repoAddress,t=(0,c.useContext)(e8.v).FallthroughRoute;return(0,o.jsxs)("div",{style:{display:"flex",flexDirection:"column",minWidth:0,width:"100%",height:"100%"},children:[(0,o.jsx)(PipelineNav,{repoAddress:n}),(0,o.jsxs)(u.rs,{children:[(0,o.jsx)(u.AW,{path:"/locations/:repoPath/pipeline_or_job/:pipelinePath(/?.*)",children:(0,o.jsx)(PipelineOrJobDisambiguationRoot,{repoAddress:n})}),(0,o.jsx)(u.AW,{path:["/locations/:repoPath/pipelines/:pipelinePath/playground/setup","/locations/:repoPath/jobs/:pipelinePath/playground/setup"],children:(0,o.jsx)(LaunchpadSetupRoot,{repoAddress:n})}),(0,o.jsx)(u.AW,{path:["/locations/:repoPath/pipelines/:pipelinePath/playground/setup-from-run/:runId","/locations/:repoPath/jobs/:pipelinePath/playground/setup-from-run/:runId"],children:(0,o.jsx)(LaunchpadSetupFromRunRoot,{repoAddress:n})}),(0,o.jsx)(u.AW,{path:["/locations/:repoPath/pipelines/:pipelinePath/playground","/locations/:repoPath/jobs/:pipelinePath/playground"],children:(0,o.jsx)(e6.H,{repoAddress:n})}),(0,o.jsx)(u.AW,{path:["/locations/:repoPath/pipelines/:pipelinePath/runs/:runId","/locations/:repoPath/jobs/:pipelinePath/runs/:runId"],render:function(e){return(0,o.jsx)(u.l_,{to:"/runs/".concat(e.match.params.runId)})}}),(0,o.jsx)(u.AW,{path:["/locations/:repoPath/pipelines/:pipelinePath/runs","/locations/:repoPath/jobs/:pipelinePath/runs"],children:(0,o.jsx)(e3.G,{repoAddress:n})}),(0,o.jsx)(u.AW,{path:["/locations/:repoPath/pipelines/:pipelinePath/partitions","/locations/:repoPath/jobs/:pipelinePath/partitions"],children:(0,o.jsx)(PipelinePartitionsRoot,{repoAddress:n})}),(0,o.jsx)(u.AW,{path:["/locations/:repoPath/pipelines/:pipelinePath/overview","/locations/:repoPath/jobs/:pipelinePath/overview"],render:function(e){return(0,o.jsx)(u.l_,{to:"/locations/".concat(e.match.url.replace(/\/overview$/i,""))})}}),(0,o.jsx)(u.AW,{path:["/locations/:repoPath/pipelines/(/?.*)","/locations/:repoPath/jobs/(/?.*)"],children:(0,o.jsx)(t,{repoAddress:n})})]})]})},n3=t(56043),n6=t(76588),n5=t(59692),n7=t(49280);function SchedulePartitionStatus_templateObject(){var e=(0,p._)(["\n  query SchedulePartitionStatusQuery($scheduleSelector: ScheduleSelector!) {\n    scheduleOrError(scheduleSelector: $scheduleSelector) {\n      ... on Schedule {\n        id\n        ...SchedulePartitionStatusFragment\n      }\n    }\n  }\n\n  fragment SchedulePartitionStatusFragment on Schedule {\n    id\n    mode\n    pipelineName\n    partitionSet {\n      id\n      name\n      partitionStatusesOrError {\n        ... on PartitionStatuses {\n          results {\n            id\n            ...SchedulePartitionStatusResult\n          }\n        }\n      }\n    }\n  }\n\n  fragment SchedulePartitionStatusResult on PartitionStatus {\n    id\n    partitionName\n    runStatus\n  }\n"]);return SchedulePartitionStatus_templateObject=function(){return e},e}var n9=["Succeeded","Failed","Missing","Pending"],calculateDisplayStatus=function(e){switch(e.runStatus){case null:return"Missing";case nc.VOA.SUCCESS:return"Succeeded";case nc.VOA.FAILURE:case nc.VOA.CANCELED:case nc.VOA.CANCELING:return"Failed";case nc.VOA.MANAGED:case nc.VOA.QUEUED:case nc.VOA.NOT_STARTED:case nc.VOA.STARTED:case nc.VOA.STARTING:return"Pending";default:return(0,nW.UT)(e.runStatus)}},te=(0,c.memo)(function(e){var n=e.repoAddress,t=e.schedule,r=(0,Z.Ux)(n),i=t.name,s=t.partitionSet,a=t.pipelineName,l=null==s?void 0:s.name,u=(0,Z.E8)(r,a),p=(0,c.useMemo)(function(){var e=l?eh().stringify({partitionSet:l},{addQueryPrefix:!0}):"";return"/".concat(u?"jobs":"pipelines","/").concat(a,"/partitions").concat(e)},[l,u,a]),h=(0,k.$U)(n,p),m=(0,d._)((0,Y.t)(tn,{variables:{scheduleSelector:{scheduleName:i,repositoryName:n.name,repositoryLocationName:n.location}}}),2),x=m[0],g=m[1],j=g.data,v=g.loading,S=(0,c.useCallback)(function(){return x()},[x]);return(0,o.jsxs)(n5.Z,{direction:"column",spacing:4,children:[(0,o.jsx)(F.rU,{to:h,children:l}),function(){if(v)return(0,o.jsx)(f.YS,{style:{color:E.$()},children:"Loading…"});if(!j)return(0,o.jsx)(nr.Z,{onClick:S,children:(0,o.jsx)(f.YS,{children:"Show coverage"})});var e=j.scheduleOrError;return"Schedule"===e.__typename?(0,o.jsx)(RetrievedSchedulePartitionStatus,{schedule:e,partitionURL:h}):(0,o.jsx)(f.YS,{style:{color:E.Yn()},children:"Partition set not found!"})}()]})}),RetrievedSchedulePartitionStatus=function(e){var n=e.schedule,t=e.partitionURL,r=n.partitionSet;if(!r||"PartitionStatuses"!==r.partitionStatusesOrError.__typename)return(0,o.jsx)("span",{style:{color:E.$()},children:"None"});var i=r.partitionStatusesOrError.results,s={};return i.forEach(function(e){var n=calculateDisplayStatus(e);s[n]=(0,N._)(s[n]||[]).concat([e])}),(0,o.jsx)(n7.Jy,{children:(0,o.jsx)("tbody",{children:n9.map(function(e){return e in s?(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{style:{width:"100px"},children:e}),(0,o.jsx)("td",{children:"Failed"===e||"Missing"===e?(0,o.jsx)(F.rU,{to:"".concat(t,"?showFailuresAndGapsOnly=true"),style:{color:E.Ep()},children:s[e].length}):s[e].length})]},e):null})})})},tn=(0,m.Ps)(SchedulePartitionStatus_templateObject()),tt=t(55055),ScheduleResetButton=function(e){var n=e.repoAddress,t=e.schedule,r=(0,ne.xz)(n.location).permissions,i=r.canStartSchedule,s=r.canStopRunningSchedule,a=t.name,l=(0,el._)((0,ea._)({},(0,B.$)(n)),{scheduleName:a}),c=(0,d._)((0,nP.D)(tt.E1,{onCompleted:tt.JH}),2),u=c[0],p=c[1].loading,h=i&&s,m=h?'In code, a default status for "'.concat(a,'" has been set to "').concat(t.defaultStatus,'". Click here to reset the schedule status to track the status set in code.'):ne.Qr;return(0,o.jsx)(eN.u,{content:m,display:"flex",children:(0,o.jsx)(no.zx,{disabled:p||!h,onClick:function(){u({variables:{scheduleSelector:l}})},children:"Reset schedule status"})})},tr=t(54483),ti=t(90818),to=t(37783),ts=t(44678),ta=t(4472),tl=t(39818),tc=t(59686),tu=t(37305);function EvaluateScheduleDialog_templateObject(){var e=(0,p._)(["\n  query getSchedule(\n    $scheduleSelector: ScheduleSelector!\n    $startTimestamp: Float\n    $ticksAfter: Int\n    $ticksBefore: Int\n  ) {\n    scheduleOrError(scheduleSelector: $scheduleSelector) {\n      ... on PythonError {\n        message\n        stack\n      }\n      ... on Schedule {\n        id\n        name\n        potentialTickTimestamps(\n          startTimestamp: $startTimestamp\n          upperLimit: $ticksAfter\n          lowerLimit: $ticksBefore\n        )\n      }\n    }\n  }\n"]);return EvaluateScheduleDialog_templateObject=function(){return e},e}function EvaluateScheduleDialog_templateObject1(){var e=(0,p._)(["\n  mutation ScheduleDryRunMutation($selectorData: ScheduleSelector!, $timestamp: Float) {\n    scheduleDryRun(selectorData: $selectorData, timestamp: $timestamp) {\n      ...PythonErrorFragment\n      ... on DryRunInstigationTick {\n        timestamp\n        evaluationResult {\n          runRequests {\n            ...RunRequestFragment\n          }\n          skipReason\n          error {\n            ...PythonErrorFragment\n          }\n        }\n      }\n      ... on ScheduleNotFoundError {\n        scheduleName\n      }\n    }\n  }\n  ","\n  ","\n"]);return EvaluateScheduleDialog_templateObject1=function(){return e},e}function EvaluateScheduleDialog_templateObject2(){var e=(0,p._)(["\n  button {\n    width: 100%;\n    display: flex;\n    justify-content: space-between;\n  }\n"]);return EvaluateScheduleDialog_templateObject2=function(){return e},e}function EvaluateScheduleDialog_templateObject3(){var e=(0,p._)(["\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  padding-bottom: 12px;\n  border-bottom: 1px solid ",";\n  margin-bottom: 12px;\n  "," {\n    padding-bottom: 4px;\n    display: block;\n  }\n  pre {\n    margin: 0;\n  }\n  button {\n    margin-top: 4px;\n  }\n"]);return EvaluateScheduleDialog_templateObject3=function(){return e},e}function EvaluateScheduleDialog_templateObject4(){var e=(0,p._)(["\n  padding-bottom: 2px;\n"]);return EvaluateScheduleDialog_templateObject4=function(){return e},e}var td=navigator.language,EvaluateScheduleDialog=function(e){return(0,o.jsx)(ni.Vq,(0,el._)((0,ea._)({},e),{style:{width:"70vw",display:"flex"},title:(0,o.jsxs)(s.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,o.jsx)(w.JO,{name:"schedule"}),(0,o.jsx)("span",{children:e.name})]}),children:(0,o.jsx)(EvaluateSchedule,(0,ea._)({},e))}))},EvaluateSchedule=function(e){var n=e.repoAddress,t=e.name,r=e.onClose,i=e.jobName,a=(0,d._)((0,c.useState)(),2),l=a[0],u=a[1],p=(0,h.a)(tp,{variables:{scheduleSelector:{repositoryLocationName:n.location,repositoryName:n.name,scheduleName:t}}}).data,m=(0,c.useContext)(tc.JB),x=(0,d._)(m.timezone,1)[0],f=(0,d._)((0,c.useState)(!1),2),g=f[0],j=f[1],v=(0,c.useRef)(null),S=(0,nb.S)(),y=S.viewport,b=S.containerProps,_=(0,d._)((0,c.useState)(!1),2),O=_[0],R=_[1],k=(0,c.useMemo)(function(){if(O)return(0,o.jsx)(EvaluateScheduleContent,{repoAddress:n,name:t,timestamp:v.current.ts,jobName:i});if(!p)return(0,o.jsx)(s.x,{padding:{vertical:48},flex:{alignItems:"center",justifyContent:"center"},children:(0,o.jsx)(P.$,{purpose:"page"})});if("PythonError"===p.scheduleOrError.__typename||"ScheduleNotFoundError"===p.scheduleOrError.__typename)return(0,o.jsx)("div",{});var e,r=p.scheduleOrError.potentialTickTimestamps.map(function(e){return{ts:e,label:(0,tu.j)({timestamp:{unix:e},locale:td,timezone:x,timeFormat:{showTimezone:!0}})}});return v.current=l||r[0]||null,(0,o.jsxs)(tm,{children:[(0,o.jsx)(tf,{children:"Select a mock evaluation time"}),(0,o.jsx)(to.J,{isOpen:g,position:"bottom-left",fill:!0,content:(0,o.jsx)(ts.v2,{style:{maxHeight:"400px",overflow:"scroll",width:"".concat(y.width,"px")},children:r.map(function(e){return(0,o.jsx)(ts.sN,{text:(0,o.jsx)("div",{"data-testid":(0,nF.N)("tick-".concat(e.ts)),children:e.label}),onClick:function(){u(e),j(!1)}},e.ts)})}),children:(0,o.jsx)("div",(0,el._)((0,ea._)({},b),{children:(0,o.jsx)(no.zx,{style:{flex:1},rightIcon:(0,o.jsx)(w.JO,{name:"arrow_drop_down"}),onClick:function(){return j(function(e){return!e})},"data-testid":(0,nF.N)("tick-selection"),children:null===(e=v.current)||void 0===e?void 0:e.label})}))})]})},[l,b,p,g,i,t,n,O,x,y.width]),A=(0,c.useMemo)(function(){return O?(0,o.jsx)(no.zx,{onClick:r,children:"Close"}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(no.zx,{onClick:r,children:"Cancel"}),(0,o.jsx)(no.zx,{"data-testid":(0,nF.N)("evaluate"),intent:"primary",onClick:function(){R(!0)},children:"Evaluate"})]})},[r,O]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(ni.a7,{children:(0,o.jsx)("div",{style:{minHeight:"300px"},children:k})}),A?(0,o.jsx)(ni.cN,{topBorder:!0,children:A}):null]})},tp=(0,m.Ps)(EvaluateScheduleDialog_templateObject()),EvaluateScheduleContent=function(e){var n,t,r,i,l=e.repoAddress,u=e.name,p=e.timestamp,h=e.jobName,m=(0,c.useContext)(tc.JB),x=(0,d._)(m.timezone,1)[0],j=(0,d._)((0,nP.D)(th,(0,c.useMemo)(function(){var e=(0,B.$)(l);return{variables:{selectorData:(0,el._)((0,ea._)({},e),{scheduleName:u}),timestamp:p}}},[u,l,p])),1)[0],v=(0,d._)((0,c.useState)(null),2),S=v[0],y=v[1];if((0,c.useEffect)(function(){j().then(function(e){y(function(){return e})})},[j]),!S||!S.data)return(0,o.jsx)(s.x,{padding:32,flex:{justifyContent:"center",alignItems:"center"},children:(0,o.jsx)(P.$,{purpose:"page"})});var b=(null==S?void 0:null===(t=S.data)||void 0===t?void 0:t.scheduleDryRun.__typename)==="DryRunInstigationTick"?null==S?void 0:null===(r=S.data)||void 0===r?void 0:r.scheduleDryRun.evaluationResult:null,_=null==b?void 0:null===(i=b.runRequests)||void 0===i?void 0:i.length,O=null==b?void 0:b.error;return(0,o.jsxs)(s.x,{flex:{direction:"column",gap:8},children:[(0,o.jsx)(s.x,{children:(0,o.jsxs)(tx,{children:[(0,o.jsxs)("div",{children:[(0,o.jsx)(f.pm,{children:"Result"}),(0,o.jsx)(s.x,{flex:{grow:1,alignItems:"center"},children:(0,o.jsx)("div",{children:O?(0,o.jsx)(g.V,{intent:"danger",children:"Failed"}):_?(0,o.jsxs)(g.V,{intent:"success",children:[_," run requests"]}):(0,o.jsx)(g.V,{intent:"warning",children:"Skipped"})})})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)(f.pm,{children:"Tick"}),(0,o.jsx)(s.x,{flex:{grow:1,alignItems:"center"},children:(0,o.jsx)(f.fv,{children:(0,tu.j)({timestamp:{unix:p},locale:td,timezone:x,timeFormat:{showTimezone:!0}})})})]})]})}),S.data&&b?b.error?(0,o.jsx)(nZ.T9,{error:b.error}):(null===(n=b.runRequests)||void 0===n?void 0:n.length)?(0,o.jsx)(ta.k,{runRequests:b.runRequests,repoAddress:l,isJob:!0,jobName:h,name:u}):(0,o.jsxs)("div",{children:[(0,o.jsx)(f.pm,{children:"Skip Reason"}),(0,o.jsx)("div",{children:(null==b?void 0:b.skipReason)||"No skip reason was output"})]}):(0,o.jsx)(a.t,{title:"An unknown error occurred",description:(0,o.jsxs)("span",{children:["File an issue on"," ",(0,o.jsx)("a",{href:"https://github.com/dagster-io/dagster",target:"_blank",rel:"noreferrer",children:"Github"})," ","if you think this is a bug"]}),icon:"error"})]})},th=(0,m.Ps)(EvaluateScheduleDialog_templateObject1(),j.B,tl.s),tm=I.ZP.div.withConfig({componentId:"sc-6b775bda-0"})(EvaluateScheduleDialog_templateObject2()),tx=I.ZP.div.withConfig({componentId:"sc-6b775bda-1"})(EvaluateScheduleDialog_templateObject3(),E.wL(),f.pm),tf=I.ZP.div.withConfig({componentId:"sc-6b775bda-2"})(EvaluateScheduleDialog_templateObject4()),tg=t(581),tj={showSeconds:!0,showTimezone:!0},ScheduleDetails=function(e){var n=e.repoAddress,t=e.schedule,r=e.refreshState,i=t.cronSchedule,a=t.executionTimezone,l=t.futureTicks,u=t.name,p=t.partitionSet,h=t.pipelineName,m=t.scheduleState,j=m.status,v=m.ticks,S=v.length>0?v[0]:null,b=j===nc.ynu.RUNNING,_=(0,Z.Ux)(n),O=(0,Z.E8)(_,h),R=(0,d._)((0,c.useState)(!1),2),k=R[0],A=R[1];return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(x.m,{title:(0,o.jsx)(f.X6,{children:u}),tags:(0,o.jsxs)(g.V,{icon:"schedule",children:["Schedule in ",(0,o.jsx)(y.b,{repoAddress:n})]}),right:(0,o.jsxs)(s.x,{flex:{direction:"row",alignItems:"center",gap:8},children:[(0,o.jsx)(H.xi,{refreshState:r}),(0,o.jsx)(no.zx,{onClick:function(){A(!0)},children:"Test Schedule"})]})}),(0,o.jsx)(EvaluateScheduleDialog,{isOpen:k,onClose:function(){A(!1)},name:t.name,repoAddress:n,jobName:h},k?"1":"0"),(0,o.jsx)(nl.fJ,{children:(0,o.jsxs)("tbody",{children:[t.description?(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:"Description"}),(0,o.jsx)("td",{children:t.description})]}):null,(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:"Latest tick"}),(0,o.jsx)("td",{children:S?(0,o.jsxs)(n5.Z,{direction:"row",spacing:8,alignItems:"center",children:[(0,o.jsx)(nm.v,{timestamp:S.timestamp,timezone:a,timeFormat:tj}),(0,o.jsx)(tg.a,{tick:S})]}):"Schedule has never run"})]}),l.results[0]&&b&&(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:"Next tick"}),(0,o.jsx)("td",{children:(0,o.jsx)(nm.v,{timestamp:l.results[0].timestamp,timezone:a,timeFormat:tj})})]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:O?"Job":"Pipeline"}),(0,o.jsx)("td",{children:(0,o.jsx)(ti.h,{pipelineName:h,pipelineHrefContext:n,isJob:O})})]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:(0,o.jsx)(s.x,{flex:{alignItems:"center"},style:{height:"32px"},children:"Running"})}),(0,o.jsx)("td",{children:(0,o.jsxs)(s.x,{flex:{direction:"row",alignItems:"center"},children:[(0,o.jsx)(nj.M,{repoAddress:n,schedule:t}),t.canReset&&(0,o.jsx)(ScheduleResetButton,{repoAddress:n,schedule:t})]})})]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:"Partition set"}),(0,o.jsx)("td",{children:p?(0,o.jsx)(te,{schedule:t,repoAddress:n}):"None"})]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:"Schedule"}),(0,o.jsx)("td",{children:i?(0,o.jsxs)(n5.Z,{direction:"row",spacing:8,children:[(0,o.jsx)("span",{children:(0,tr.A)(i,a||"UTC")}),(0,o.jsxs)(f.EK,{children:["(",i,")"]})]}):(0,o.jsx)("div",{children:"—"})})]}),a?(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:"Execution timezone"}),(0,o.jsx)("td",{children:a})]}):null]})})]})};function ScheduleUtils_templateObject(){var e=(0,p._)(["\n  fragment ScheduleFragment on Schedule {\n    id\n    name\n    cronSchedule\n    executionTimezone\n    pipelineName\n    solidSelection\n    mode\n    description\n    partitionSet {\n      id\n      name\n    }\n    defaultStatus\n    canReset\n    scheduleState {\n      id\n      ...InstigationStateFragment\n    }\n    futureTicks(limit: 5) {\n      results {\n        timestamp\n      }\n    }\n  }\n\n  ","\n"]);return ScheduleUtils_templateObject=function(){return e},e}var tv=(0,m.Ps)(ScheduleUtils_templateObject(),n7.ai),tS=t(84826),ty=t(31761);t(33521);var tb=t(3842),t_=t(99046),tO=t(54266),tR=t(65511),tk=t(42418),tA=t(91230),tP=t(90437),tE=t(32911),tC=t(85888),tN=t(19211),tw=t(47544),tT=t(88846),tF=t(65767),tI=t(22665);function TickHistory_templateObject(){var e=(0,p._)(["\n  query TickHistoryQuery(\n    $instigationSelector: InstigationSelector!\n    $dayRange: Int\n    $limit: Int\n    $cursor: String\n    $statuses: [InstigationTickStatus!]\n    $beforeTimestamp: Float\n    $afterTimestamp: Float\n  ) {\n    instigationStateOrError(instigationSelector: $instigationSelector) {\n      ... on InstigationState {\n        id\n        instigationType\n        ticks(\n          dayRange: $dayRange\n          limit: $limit\n          cursor: $cursor\n          statuses: $statuses\n          beforeTimestamp: $beforeTimestamp\n          afterTimestamp: $afterTimestamp\n        ) {\n          id\n          ...HistoryTick\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n  ","\n  ","\n"]);return TickHistory_templateObject=function(){return e},e}function TickHistory_templateObject1(){var e=(0,p._)(["\n  background: transparent;\n  border: 0;\n  cursor: pointer;\n  padding: 8px;\n  margin: -6px;\n  outline: none;\n\n  "," {\n    background-color: ",";\n    transition: background-color 100ms;\n  }\n\n  :hover "," {\n    background-color: ",";\n  }\n\n  :focus "," {\n    background-color: ",";\n  }\n"]);return TickHistory_templateObject1=function(){return e},e}function TickHistory_templateObject2(){var e=(0,p._)(["\n  th,\n  td {\n    vertical-align: middle !important;\n  }\n"]);return TickHistory_templateObject2=function(){return e},e}tR.kL.register(tk.ZP);var t$=(r={},(0,nw._)(r,nc.izS.SUCCESS,!0),(0,nw._)(r,nc.izS.FAILURE,!0),(0,nw._)(r,nc.izS.STARTED,!0),(0,nw._)(r,nc.izS.SKIPPED,!0),r),tD=(i={},(0,nw._)(i,nc.izS.SUCCESS,"Requested"),(0,nw._)(i,nc.izS.FAILURE,"Failed"),(0,nw._)(i,nc.izS.STARTED,"In progress"),(0,nw._)(i,nc.izS.SKIPPED,"Skipped"),i),TicksTable=function(e){var n,t=e.name,r=e.repoAddress,i=e.tabs,l=e.setTimerange,u=e.setParentStatuses,p=(0,d._)((0,K.q)({encode:function(e){var n={};return Object.keys(e).map(function(t){n[t.toLowerCase()]=String(e[t])}),n},decode:function(e){var n=(0,ea._)({},t$);return Object.keys(t$).forEach(function(t){t.toLowerCase() in e&&(n[t]="false"!==e[t.toLowerCase()])}),n}}),2),h=p[0],m=p[1],x=(0,el._)((0,ea._)({},(0,B.$)(r)),{name:t}),f=c.useMemo(function(){return Object.keys(h).filter(function(e){return h[e]}).map(function(e){return e})},[h]),g=(0,tF.l)({nextCursorForResult:function(e){var n;if("InstigationState"===e.instigationStateOrError.__typename)return null===(n=e.instigationStateOrError.ticks[24])||void 0===n?void 0:n.id},getResultArray:function(e){return e&&"InstigationState"===e.instigationStateOrError.__typename?e.instigationStateOrError.ticks:[]},variables:{instigationSelector:x,statuses:f},query:tz,pageSize:25}),j=g.queryResult,v=g.paginationProps;(0,H.C4)(j,H.dT);var S=null==j?void 0:null===(n=j.data)||void 0===n?void 0:n.instigationStateOrError,y=c.useMemo(function(){return(null==S?void 0:S.__typename)==="InstigationState"?S.ticks:[]},[S]);c.useEffect(function(){if(v.hasPrevCursor){if(y&&y.length){var e,n,t=null===(e=y[y.length-1])||void 0===e?void 0:e.timestamp,r=null===(n=y[0])||void 0===n?void 0:n.endTimestamp;t&&r&&(null==l||l([t,r]))}}else null==l||l(void 0)},[v.hasPrevCursor,y,l]),c.useEffect(function(){v.hasPrevCursor?null==u||u(Array.from(f)):null==u||u(void 0)},[v.hasPrevCursor,u,f]),c.useEffect(function(){!v.hasPrevCursor||y.length||j.loading||v.reset()},[y,j.loading,v.hasPrevCursor]);var b=(0,d._)(c.useState(),2),_=b[0],O=b[1],R=j.data;if(!R)return(0,o.jsx)(s.x,{padding:{vertical:48},children:(0,o.jsx)(P.$,{purpose:"page"})});if("PythonError"===R.instigationStateOrError.__typename)return(0,o.jsx)(nZ.T9,{error:R.instigationStateOrError});if("InstigationStateNotFoundError"===R.instigationStateOrError.__typename)return(0,o.jsx)(s.x,{padding:{vertical:32},flex:{justifyContent:"center"},children:(0,o.jsx)(a.t,{icon:"no-results",title:"No ticks to display"})});var k=R.instigationStateOrError.instigationType;if(!y.length&&f.length===Object.keys(t$).length)return null;var StatusFilter=function(e){var n=e.status;return(0,o.jsx)(nE.X,{label:tD[n],checked:h[n],onChange:function(e){m((0,el._)((0,ea._)({},h),(0,nw._)({},n,e.target.checked)))}})};return(0,o.jsxs)(o.Fragment,{children:[_?(0,o.jsx)(tI.l,{tick:_,instigationSelector:x,onClose:function(){return O(void 0)}}):null,(0,o.jsx)(s.x,{padding:{vertical:8,horizontal:24},children:(0,o.jsxs)(s.x,{flex:{direction:"row",justifyContent:"space-between",alignItems:"center"},children:[i,(0,o.jsxs)(s.x,{flex:{direction:"row",gap:16},children:[(0,o.jsx)(StatusFilter,{status:nc.izS.STARTED}),(0,o.jsx)(StatusFilter,{status:nc.izS.SUCCESS}),(0,o.jsx)(StatusFilter,{status:nc.izS.FAILURE}),(0,o.jsx)(StatusFilter,{status:nc.izS.SKIPPED})]})]})}),y.length?(0,o.jsxs)(tU,{children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{style:{width:120},children:"Timestamp"}),(0,o.jsx)("th",{style:{width:90},children:"Status"}),(0,o.jsx)("th",{style:{width:90},children:"Duration"}),k===nc._5b.SENSOR?(0,o.jsx)("th",{style:{width:120},children:"Cursor"}):null,(0,o.jsx)("th",{style:{width:180},children:"Result"})]})}),(0,o.jsx)("tbody",{children:y.map(function(e,n){return(0,o.jsx)(TickRow,{tick:e,instigationSelector:x,index:n},e.id)})})]}):(0,o.jsx)(s.x,{padding:{vertical:32},flex:{justifyContent:"center"},children:(0,o.jsx)(a.t,{icon:"no-results",title:"No ticks to display"})}),y.length>0?(0,o.jsx)("div",{style:{marginTop:"16px"},children:(0,o.jsx)(n_.pI,(0,ea._)({},v))}):null]})},TickHistoryTimeline=function(e){var n=e.name,t=e.repoAddress,r=e.onHighlightRunIds,i=e.beforeTimestamp,a=e.afterTimestamp,l=e.statuses,u=(0,d._)((0,K.q)({encode:function(e){return{tickId:e}},decode:function(e){return e.tickId?Number(e.tickId):void 0}}),2),p=u[0],m=u[1],x=(0,d._)(c.useState(!1),2),g=x[0],j=x[1],v=(0,el._)((0,ea._)({},(0,B.$)(t)),{name:n}),S=(0,h.a)(tz,{variables:{instigationSelector:v,beforeTimestamp:i,afterTimestamp:a,statuses:l,limit:i?void 0:15},notifyOnNetworkStatusChange:!0});(0,H.C4)(S,1e3,!(g||i&&a));var y=S.data,b=S.error;if(!y||b)return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(s.x,{padding:{top:16,horizontal:24},border:"bottom",children:(0,o.jsx)(f.pm,{children:"Recent ticks"})}),(0,o.jsx)(s.x,{padding:{vertical:64},children:(0,o.jsx)(P.$,{purpose:"section"})})]});if("PythonError"===y.instigationStateOrError.__typename)return(0,o.jsx)(nZ.T9,{error:y.instigationStateOrError});if("InstigationStateNotFoundError"===y.instigationStateOrError.__typename)return null;var _=y.instigationStateOrError.ticks,onTickClick=function(e){m(e?Number(e.tickId):void 0)};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(tE.X,{isOpen:!!p,tickId:p,instigationSelector:v,onClose:function(){return onTickClick(void 0)}}),(0,o.jsx)(s.x,{padding:{vertical:16,horizontal:24},children:(0,o.jsx)(f.pm,{children:"Recent ticks"})}),(0,o.jsx)(s.x,{border:"top",children:(0,o.jsx)(tP.p,{ticks:void 0===_?[]:_,onHoverTick:function(e){e||j(!1),(null==e?void 0:e.runIds)&&(r&&r(e.runIds),j(!0))},onSelectTick:onTickClick,exactRange:i&&a?[a,i]:void 0})})]})};function TickRow(e){var n=e.tick,t=e.instigationSelector,r=e.index,i=(0,tw.m)(),a=(0,d._)(c.useState(!1),2),l=a[0],u=a[1],p=(0,d._)(c.useMemo(function(){var e=n.dynamicPartitionsRequestResults;return[(0,tC.sw)(e,nc.Dq2.ADD_PARTITIONS),(0,tC.sw)(e,nc.Dq2.DELETE_PARTITIONS)]},[null==n?void 0:n.dynamicPartitionsRequestResults]),2),h=p[0],m=p[1],x=(0,tC.g6)(n,r);return(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:(0,o.jsx)(nm.v,{timestamp:n.timestamp,timeFormat:{showTimezone:!1,showSeconds:!0}})}),(0,o.jsx)("td",{children:(0,o.jsx)(tg.a,{tick:n,isStuckStarted:x})}),(0,o.jsx)("td",{children:x?"- ":(0,o.jsx)(tT.Q,{startUnix:n.timestamp,endUnix:n.endTimestamp||Date.now()/1e3})}),n.instigationType===nc._5b.SENSOR?(0,o.jsx)("td",{style:{width:120},children:n.cursor?(0,o.jsxs)(s.x,{flex:{direction:"row",alignItems:"center",gap:8},children:[(0,o.jsx)("div",{style:{fontFamily:tb.b.monospace,fontSize:"16px"},children:(0,tC.$G)(n.cursor||"")}),(0,o.jsx)(tL,{onClick:(0,nk._)(function(){return(0,nA.Jh)(this,function(e){switch(e.label){case 0:return i(n.cursor||""),[4,(0,tN.B7)({message:(0,o.jsx)("div",{children:"Copied value"}),intent:"success"})];case 1:return e.sent(),[2]}})}),children:(0,o.jsx)(w.JO,{name:"assignment"})})]}):(0,o.jsx)(o.Fragment,{children:"—"})}):null,(0,o.jsx)("td",{children:(0,o.jsxs)(s.x,{flex:{direction:"column",gap:6},children:[(0,o.jsxs)(s.x,{flex:{alignItems:"center",gap:8},children:[(0,o.jsx)(nr.Z,{onClick:function(){u(!0)},children:1===n.runIds.length?"1 run requested":"".concat(n.runIds.length," runs requested")}),1===n.runs.length?n.runs.map(function(e){return(0,o.jsx)(c.Fragment,{children:(0,o.jsx)(n7.RX,{run:e})},e.id)}):null]}),h||m?(0,o.jsxs)(f.YS,{children:["(",h?(0,o.jsxs)("span",{children:[h," partition",(0,t_.I)(h,"","s")," created",m?",":""]}):null,m?(0,o.jsxs)("span",{children:[m," partition",(0,t_.I)(m,"","s")," deleted,"]}):null,")"]}):null,(0,o.jsx)(tE.X,{isOpen:l,tickId:Number(n.tickId),instigationSelector:t,onClose:function(){u(!1)}})]})})]})}var tz=(0,m.Ps)(TickHistory_templateObject(),n7.S9,j.B,tA.dY,n7.vw),tL=I.ZP.button.withConfig({componentId:"sc-fc72dcb9-0"})(TickHistory_templateObject1(),w.a1,E.md(),w.a1,E.$l(),w.a1,E.Es()),tU=(0,I.ZP)(tO.i).withConfig({componentId:"sc-fc72dcb9-1"})(TickHistory_templateObject2()),tJ=t(12746);function ScheduleRoot_templateObject(){var e=(0,p._)(['\n  query ScheduleRootQuery($scheduleSelector: ScheduleSelector!) {\n    scheduleOrError(scheduleSelector: $scheduleSelector) {\n      ... on Schedule {\n        id\n        ...ScheduleFragment\n      }\n      ... on ScheduleNotFoundError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n    instance {\n      id\n      daemonHealth {\n        id\n        daemonStatus(daemonType: "SCHEDULER") {\n          id\n          healthy\n        }\n      }\n      ...InstanceHealthFragment\n    }\n  }\n\n  ',"\n  ","\n  ","\n"]);return ScheduleRoot_templateObject=function(){return e},e}function ScheduleRoot_templateObject1(){var e=(0,p._)(["\n  query PreviousRunsForScheduleQuery($filter: RunsFilter, $limit: Int) {\n    pipelineRunsOrError(filter: $filter, limit: $limit) {\n      ... on Runs {\n        results {\n          id\n          ... on PipelineRun {\n            ...RunTableRunFragment\n          }\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n\n  ","\n"]);return ScheduleRoot_templateObject1=function(){return e},e}var ScheduleRoot=function(e){(0,v.Px)();var n=e.repoAddress,t=(0,u.UO)().scheduleName;(0,S.j)("Schedule: ".concat(t));var r=(0,el._)((0,ea._)({},(0,B.$)(n)),{scheduleName:t}),i=(0,d._)(c.useState("ticks"),2),s=i[0],a=i[1],l=(0,h.a)(tM,{variables:{scheduleSelector:r},notifyOnNetworkStatusChange:!0}),p=(0,H.C4)(l,H.dT),m=(0,o.jsxs)(eG.mQ,{selectedTabId:s,onChange:a,children:[(0,o.jsx)(eG.OK,{id:"ticks",title:"Tick history"}),(0,o.jsx)(eG.OK,{id:"runs",title:"Run history"})]});return(0,o.jsx)(R.g,{queryResult:l,allowStaleData:!0,children:function(e){var t=e.scheduleOrError,r=e.instance;if("Schedule"!==t.__typename)return null;var i=!r.daemonHealth.daemonStatus.healthy;return(0,o.jsxs)(eH.T,{children:[(0,o.jsx)(ScheduleDetails,{repoAddress:n,schedule:t,refreshState:p}),i?(0,o.jsx)(tS.K,{daemonHealth:r.daemonHealth,padding:{vertical:16,horizontal:24}}):null,"ticks"===s?(0,o.jsx)(TicksTable,{tabs:m,repoAddress:n,name:t.name}):(0,o.jsx)(SchedulePreviousRuns,{repoAddress:n,schedule:t,tabs:m})]})}})},SchedulePreviousRuns=function(e){var n=e.repoAddress,t=e.schedule,r=e.highlightedIds,i=e.tabs,s=(0,h.a)(tq,{variables:{limit:20,filter:{tags:[{key:nd.H.ScheduleName,value:t.name},{key:nd.H.RepositoryLabelTag,value:(0,D.Wg)(n)}]}},notifyOnNetworkStatusChange:!0});(0,H.C4)(s,H.dT);var l=s.data;if(!l)return null;if("Runs"!==l.pipelineRunsOrError.__typename)return(0,o.jsx)(a.t,{icon:"error",title:"Query Error",description:l.pipelineRunsOrError.message});var c=null==l?void 0:l.pipelineRunsOrError.results;return(0,o.jsx)(tJ.AL,{actionBarComponents:i,runs:c,highlightedIds:r,hideCreatedBy:!0})},tM=(0,m.Ps)(ScheduleRoot_templateObject(),tv,j.B,ty.O),tq=(0,m.Ps)(ScheduleRoot_templateObject1(),tJ.ZZ),tV=t(99596),tW=t(21789);function SensorFragment_templateObject(){var e=(0,p._)(["\n  fragment SensorFragment on Sensor {\n    id\n    jobOriginId\n    name\n    description\n    minIntervalSeconds\n    sensorType\n    nextTick {\n      timestamp\n    }\n    defaultStatus\n    canReset\n    sensorState {\n      id\n      ...InstigationStateFragment\n    }\n    targets {\n      pipelineName\n      solidSelection\n      mode\n    }\n    metadata {\n      assetKeys {\n        path\n      }\n    }\n  }\n\n  ","\n"]);return SensorFragment_templateObject=function(){return e},e}var tB=(0,m.Ps)(SensorFragment_templateObject(),n7.ai),tH=t(56692),tG=t(9676),tK=t(89102);function AssetSensorTicksQuery_templateObject(){var e=(0,p._)(["\n  query AssetSensorTicksQuery(\n    $sensorSelector: SensorSelector!\n    $dayRange: Int\n    $dayOffset: Int\n    $statuses: [InstigationTickStatus!]\n    $limit: Int\n    $cursor: String\n    $beforeTimestamp: Float\n    $afterTimestamp: Float\n  ) {\n    sensorOrError(sensorSelector: $sensorSelector) {\n      ... on Sensor {\n        id\n        sensorState {\n          id\n          ticks(\n            dayRange: $dayRange\n            dayOffset: $dayOffset\n            statuses: $statuses\n            limit: $limit\n            cursor: $cursor\n            beforeTimestamp: $beforeTimestamp\n            afterTimestamp: $afterTimestamp\n          ) {\n            id\n            ...AssetDaemonTickFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"]);return AssetSensorTicksQuery_templateObject=function(){return e},e}var tQ=(0,m.Ps)(AssetSensorTicksQuery_templateObject(),tK.B,j.B),tZ=t(3490),tY=t(80428),tX=t(22370),SensorAutomaterializationEvaluationHistoryTable=function(e){var n,t,r=e.repoAddress,i=e.sensor,s=e.setSelectedTick,a=e.setTableView,l=e.setTimerange,u=e.setParentStatuses,p=(0,d._)((0,K.q)({queryKey:"statuses",decode:(0,c.useCallback)(function(e){var n=e.statuses;return new Set(n?JSON.parse(n):[nc.izS.STARTED,nc.izS.SUCCESS,nc.izS.FAILURE,nc.izS.SKIPPED])},[]),encode:(0,c.useCallback)(function(e){return{statuses:JSON.stringify(Array.from(e))}},[])}),2),h=p[0],m=p[1],x=(0,tF.l)({query:tQ,variables:{sensorSelector:{sensorName:i.name,repositoryName:r.name,repositoryLocationName:r.location},statuses:(0,c.useMemo)(function(){return Array.from(h)},[h])},nextCursorForResult:function(e){if((null==e?void 0:e.sensorOrError.__typename)==="Sensor"){var n,t=e.sensorOrError.sensorState.ticks;if(t.length)return null===(n=t[14])||void 0===n?void 0:n.id}},getResultArray:function(e){return(null==e?void 0:e.sensorOrError.__typename)==="Sensor"?e.sensorOrError.sensorState.ticks:[]},pageSize:15}),f=x.queryResult,g=x.paginationProps;(0,H.C4)(f,1e4,!g.hasPrevCursor);var j=(null===(t=f.data)||void 0===t?void 0:null===(n=t.sensorOrError)||void 0===n?void 0:n.__typename)==="Sensor"?f.data.sensorOrError.sensorState.ticks:null;return(0,c.useEffect)(function(){if(g.hasPrevCursor){if(j&&j.length){var e,n,t=null===(e=j[j.length-1])||void 0===e?void 0:e.timestamp,r=null===(n=j[0])||void 0===n?void 0:n.endTimestamp;t&&r&&l([t,r])}}else l(void 0)},[j,g.hasPrevCursor,l]),(0,c.useEffect)(function(){g.hasPrevCursor?u(Array.from(h)):u(void 0)},[g.hasPrevCursor,u,h]),(0,o.jsx)(tX.V,{loading:f.loading,ticks:j||[],paginationProps:g,setSelectedTick:s,setStatuses:m,setTableView:a,statuses:h})},SensorPageAutomaterialize=function(e){var n,fetchData=function(){y({variables:_})},t=e.repoAddress,r=e.sensor,i=e.loading,a=e.daemonStatus,l=(0,d._)((0,c.useState)(!1),2),u=l[0],p=l[1],h=(0,d._)((0,c.useState)(void 0),2),m=h[0],x=h[1],g=(0,d._)((0,c.useState)(void 0),2),j=g[0],v=g[1],S=(0,d._)((0,Y.t)(tQ),2),y=S[0],b=S[1],_=(0,c.useMemo)(function(){return j||m?{sensorSelector:{sensorName:r.name,repositoryName:t.name,repositoryLocationName:t.location},afterTimestamp:null==j?void 0:j[0],beforeTimestamp:null==j?void 0:j[1],statuses:m}:{sensorSelector:{sensorName:r.name,repositoryName:t.name,repositoryLocationName:t.location},afterTimestamp:(Date.now()-12e5)/1e3}},[r,t,m,j]);(0,c.useLayoutEffect)(fetchData,[_]),(0,H.C4)(b,2e3,!u&&!j&&!m,fetchData);for(var O=(0,d._)((0,c.useState)(null),2),R=O[0],k=O[1],A=(0,d._)((0,K.q)((0,c.useMemo)(function(){return{queryKey:"view",decode:function(e){return"runs"===e.view?"runs":"evaluations"},encode:function(e){return{view:e,cursor:void 0,statuses:void 0}}}},[])),2),C=A[0],w=A[1],T=null!==(n=b.data)&&void 0!==n?n:b.previousData,F=(0,c.useMemo)(function(){return(null==T?void 0:T.sensorOrError.__typename)==="Sensor"?T.sensorOrError.sensorState.ticks:[]},[T]),I=(0,c.useMemo)(function(){return F.map(function(e){return"".concat(e.id,":").concat(e.status)})},[F]);I.length<100;)I.push("");var $=(0,c.useMemo)(function(){var e;return null!==(e=F.map(function(e,n){var t=F[n-1];if(t&&(0,tC.g6)(e,n)){var r=(0,ea._)({},e);return r.endTimestamp=t.timestamp,r.status=nc.izS.FAILURE,r}return e}))&&void 0!==e?e:[]},(0,N._)(I.slice(0,100))),z=(0,c.useCallback)(function(e){p(!!e)},[p]),L=(0,c.useMemo)(function(){return[{key:nd.H.RepositoryLabelTag,value:(0,D.Wg)(t)},{key:nd.H.SensorName,value:r.name}]},[t,r]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(s.x,{padding:{vertical:12,horizontal:24},flex:{direction:"column",gap:12},children:(0,o.jsx)(tG.b,{intent:"info",title:"[Experimental] Dagster can automatically materialize assets when criteria are met.",description:(0,o.jsxs)(o.Fragment,{children:["Auto-materialization enables a declarative approach to asset scheduling – instead of defining imperative workflows to materialize your assets, you just describe the conditions under which they should be materialized."," ",(0,o.jsx)("a",{href:"https://docs.dagster.io/concepts/assets/asset-auto-execution",target:"_blank",rel:"noreferrer",children:"Learn more about auto-materialization here"}),"."]})})}),(0,o.jsx)(tH.F,{assetDaemonHealth:a,padding:{vertical:16,horizontal:24}}),(0,o.jsx)(s.x,{padding:{vertical:12,horizontal:24},border:"bottom",children:(0,o.jsx)(f.Tj,{children:"Evaluation timeline"})}),!r&&i?(0,o.jsxs)(s.x,{padding:{vertical:48},flex:{direction:"row",justifyContent:"center",gap:12,alignItems:"center"},children:[(0,o.jsx)(P.$,{purpose:"body-text"}),(0,o.jsx)("div",{style:{color:E.$()},children:"Loading evaluations…"})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(tP.p,{ticks:$,onHoverTick:z,onSelectTick:k,exactRange:j,timeRange:12e5,tickGrid:3e5,timeAfter:18e4}),(0,o.jsx)(tZ.d,{tick:R,isOpen:!!R,close:function(){k(null)}}),"evaluations"===C?(0,o.jsx)(SensorAutomaterializationEvaluationHistoryTable,{repoAddress:t,sensor:r,setSelectedTick:k,setTableView:w,setParentStatuses:x,setTimerange:v}):(0,o.jsx)(tY.o,{filterTags:L,setTableView:w})]})]})};function SensorPreviousRuns_templateObject(){var e=(0,p._)(["\n  query PreviousRunsForSensorQuery($filter: RunsFilter, $cursor: String, $limit: Int) {\n    pipelineRunsOrError(filter: $filter, limit: $limit, cursor: $cursor) {\n      ... on Runs {\n        results {\n          id\n          ... on PipelineRun {\n            ...RunTableRunFragment\n          }\n        }\n      }\n    }\n  }\n\n  ","\n"]);return SensorPreviousRuns_templateObject=function(){return e},e}var SensorPreviousRuns=function(e){var n=e.sensor,t=e.repoAddress,r=e.highlightedIds,i=e.tabs,s=(0,tF.l)({query:t0,variables:{filter:{tags:[{key:nd.H.SensorName,value:n.name},{key:nd.H.RepositoryLabelTag,value:(0,D.Wg)(t)}]}},nextCursorForResult:function(e){var n;if("Runs"===e.pipelineRunsOrError.__typename)return null===(n=e.pipelineRunsOrError.results[19])||void 0===n?void 0:n.id},getResultArray:function(e){return(null==e?void 0:e.pipelineRunsOrError.__typename)!=="Runs"?[]:e.pipelineRunsOrError.results},pageSize:20}),a=s.queryResult,l=s.paginationProps;(0,H.C4)(a,l.hasPrevCursor?36e5:1e4);var c=a.data;if(c&&(null==c?void 0:c.pipelineRunsOrError.__typename)==="Runs"||(c=a.previousData),!c||(null==c?void 0:c.pipelineRunsOrError.__typename)!=="Runs")return null;var u=c.pipelineRunsOrError.results;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(tJ.AL,{actionBarComponents:i,runs:u,highlightedIds:r,hideCreatedBy:!0}),(0,o.jsx)("div",{style:{paddingBottom:"16px"},children:(0,o.jsx)(n_.pI,(0,ea._)({},l))})]})},t0=(0,m.Ps)(SensorPreviousRuns_templateObject(),tJ.ZZ);function SensorRoot_templateObject(){var e=(0,p._)(['\n  query SensorRootQuery($sensorSelector: SensorSelector!) {\n    sensorOrError(sensorSelector: $sensorSelector) {\n      ... on Sensor {\n        id\n        ...SensorFragment\n      }\n      ...PythonErrorFragment\n    }\n    instance {\n      id\n      daemonHealth {\n        id\n        sensorDaemonStatus: daemonStatus(daemonType: "SENSOR") {\n          id\n          healthy\n          required\n        }\n        ampDaemonStatus: daemonStatus(daemonType: "ASSET") {\n          id\n          healthy\n          required\n        }\n      }\n      ...InstanceHealthFragment\n    }\n  }\n\n  ',"\n  ","\n  ","\n"]);return SensorRoot_templateObject=function(){return e},e}var SensorRoot=function(e){var n=e.repoAddress;(0,v.Px)();var t=(0,u.UO)().sensorName;(0,S.j)("Sensor: ".concat(t));var r=(0,el._)((0,ea._)({},(0,B.$)(n)),{sensorName:t}),i=(0,d._)((0,c.useState)(void 0),2),l=i[0],p=i[1],m=(0,d._)((0,c.useState)(void 0),2),x=m[0],f=m[1],g=(0,c.useMemo)(function(){return x||l?{afterTimestamp:null==x?void 0:x[0],beforeTimestamp:null==x?void 0:x[1],statuses:l}:{}},[l,x]),j=(0,d._)((0,K.q)((0,c.useMemo)(function(){return{queryKey:"view",decode:function(e){return"runs"===e.view?"runs":"evaluations"},encode:function(e){return{view:e,cursor:void 0,statuses:void 0}}}},[])),2),y=j[0],b=j[1],_=(0,h.a)(t1,{variables:{sensorSelector:r},notifyOnNetworkStatusChange:!0}),O=(0,H.C4)(_,H.dT),R=_.data,k=_.loading,A=(0,o.jsx)(tV.h,{activeItems:new Set([y]),buttons:[{id:"evaluations",label:"Evaluations"},{id:"runs",label:"Runs"}],onClick:function(e){b(e)}});if(!R&&k)return(0,o.jsxs)(s.x,{margin:{top:32},flex:{direction:"row",alignItems:"center",justifyContent:"center",gap:16},children:[(0,o.jsx)(P.$,{purpose:"body-text"}),(0,o.jsx)("div",{style:{color:E.$()},children:"Loading sensor…"})]});if(!R||"SensorNotFoundError"===R.sensorOrError.__typename)return(0,o.jsx)(s.x,{padding:{vertical:32},children:(0,o.jsx)(a.t,{icon:"error",title:"Could not find sensor `".concat(t,"` in definitions for `").concat(n.name,"`")})});var C=R.sensorOrError;if("PythonError"===C.__typename)return(0,o.jsx)(nZ.T9,{error:C});if("UnauthorizedError"===C.__typename)return(0,o.jsx)(u.l_,{to:"/overview/sensors"});var N=R.instance;if(C.sensorType===nc.dEY.AUTOMATION_POLICY){var w=N.daemonHealth.ampDaemonStatus;return(0,o.jsxs)(eH.T,{children:[(0,o.jsx)(tW.e,{repoAddress:n,sensor:C,daemonHealth:w.healthy,refreshState:O}),(0,o.jsx)(SensorPageAutomaterialize,{repoAddress:n,sensor:C,daemonStatus:w,loading:k})]})}var T=N.daemonHealth.sensorDaemonStatus;return(0,o.jsxs)(eH.T,{children:[(0,o.jsx)(tW.e,{repoAddress:n,sensor:C,daemonHealth:T.healthy,refreshState:O}),(0,o.jsx)(tH.F,{sensorDaemonStatus:T,padding:{vertical:16,horizontal:24}}),(0,o.jsx)(TickHistoryTimeline,(0,ea._)({repoAddress:n,name:C.name},g)),(0,o.jsx)(s.x,{margin:{top:32},border:"top",children:"evaluations"===y?(0,o.jsx)(TicksTable,{tabs:A,repoAddress:n,name:C.name,setParentStatuses:p,setTimerange:f}):(0,o.jsx)(SensorPreviousRuns,{repoAddress:n,sensor:C,tabs:A})})]})},t1=(0,m.Ps)(SensorRoot_templateObject(),tB,j.B,ty.O),RepoRouteContainer=function(){var e=(0,u.UO)().repoPath,n=(0,c.useContext)(Z.C5),t=(0,eB.g)(e);return t?n.loading?(0,o.jsx)("div",{}):n.allRepos.find(function(e){return e.repository.name===t.name&&e.repositoryLocation.name===t.location})?(0,o.jsxs)(u.rs,{children:[(0,o.jsx)(u.AW,{path:"/locations/:repoPath/resources",exact:!0,children:(0,o.jsx)(n6.g,{repoAddress:t})}),(0,o.jsx)(u.AW,{path:"/locations/:repoPath/assets",exact:!0,children:(0,o.jsx)(WorkspaceAssetsRoot,{repoAddress:t})}),(0,o.jsx)(u.AW,{path:"/locations/:repoPath/jobs",exact:!0,children:(0,o.jsx)(WorkspaceJobsRoot,{repoAddress:t})}),(0,o.jsx)(u.AW,{path:"/locations/:repoPath/schedules",exact:!0,children:(0,o.jsx)(WorkspaceSchedulesRoot,{repoAddress:t})}),(0,o.jsx)(u.AW,{path:"/locations/:repoPath/sensors",exact:!0,children:(0,o.jsx)(WorkspaceSensorsRoot,{repoAddress:t})}),(0,o.jsx)(u.AW,{path:"/locations/:repoPath/graphs",exact:!0,children:(0,o.jsx)(WorkspaceGraphsRoot,{repoAddress:t})}),(0,o.jsx)(u.AW,{path:"/locations/:repoPath/ops/:name?",exact:!0,children:(0,o.jsx)(WorkspaceOpsRoot,{repoAddress:t})}),(0,o.jsx)(u.AW,{path:"/locations/:repoPath/graphs/(/?.*)",children:(0,o.jsx)(GraphRoot,{repoAddress:t})}),(0,o.jsx)(u.AW,{path:["/locations/:repoPath/pipelines/(/?.*)","/locations/:repoPath/jobs/(/?.*)","/locations/:repoPath/pipeline_or_job/(/?.*)"],children:(0,o.jsx)(PipelineRoot,{repoAddress:t})}),(0,o.jsx)(u.AW,{path:"/locations/:repoPath/schedules/:scheduleName/:runTab?",children:(0,o.jsx)(ScheduleRoot,{repoAddress:t})}),(0,o.jsx)(u.AW,{path:"/locations/:repoPath/sensors/:sensorName",children:(0,o.jsx)(SensorRoot,{repoAddress:t})}),(0,o.jsx)(u.AW,{path:"/locations/:repoPath/resources/:resourceName",children:(0,o.jsx)(n3.r,{repoAddress:t})}),(0,o.jsx)(u.AW,{path:["/locations/:repoPath/asset-groups/:groupName/list(/?.*)"],children:(0,o.jsx)(AssetGroupRoot,{repoAddress:t,tab:"list"})}),(0,o.jsx)(u.AW,{path:["/locations/:repoPath/asset-groups/:groupName/(/?.*)","/locations/:repoPath/asset-groups/:groupName"],children:(0,o.jsx)(AssetGroupRoot,{repoAddress:t,tab:"lineage"})}),(0,o.jsx)(u.AW,{path:"/locations/:repoPath/*",children:(0,o.jsx)(u.l_,{to:(0,k.$U)(t,"/assets")})})]}):(0,o.jsx)(s.x,{padding:{vertical:64},children:(0,o.jsx)(a.t,{icon:"error",title:"Unknown code location",description:(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{children:(0,o.jsx)("strong",{children:(0,D.Uz)(t)})}),"  is not loaded in the current workspace."]})})}):(0,o.jsx)(s.x,{padding:{vertical:64},children:(0,o.jsx)(a.t,{icon:"error",title:"Invalid code location path",description:(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{children:(0,o.jsx)("strong",{children:e})}),"  is not a valid code location path."]})})})},WorkspaceRoot=function(){return(0,o.jsx)(l.M,{children:(0,o.jsx)(u.rs,{children:(0,o.jsx)(u.AW,{path:"/locations/:repoPath",children:(0,o.jsx)(RepoRouteContainer,{})})})})},t2=WorkspaceRoot}}]);
//# sourceMappingURL=312.77bac2a515d29d3b.js.map